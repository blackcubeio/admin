"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[143],{337:(e,t,i)=>{var n={};i.r(n),i.d(n,{bindables:()=>M,default:()=>A,dependencies:()=>I,name:()=>N,register:()=>U,template:()=>F});var a={};i.r(a),i.d(a,{bindables:()=>$,default:()=>X,dependencies:()=>G,name:()=>q,register:()=>Q,template:()=>H});var s={};i.r(s),i.d(s,{bindables:()=>te,default:()=>Z,dependencies:()=>ee,name:()=>K,register:()=>ne,template:()=>Y});var l={};i.r(l),i.d(l,{bindables:()=>fe,default:()=>me,dependencies:()=>ge,name:()=>ue,register:()=>be,template:()=>pe});var o={};i.r(o),i.d(o,{bindables:()=>je,default:()=>Ce,dependencies:()=>Se,name:()=>De,register:()=>Pe,template:()=>xe});var r={};i.r(r),i.d(r,{bindables:()=>Re,default:()=>Je,dependencies:()=>ze,name:()=>Be,register:()=>We,template:()=>Ue});var c={};i.r(c),i.d(c,{bindables:()=>_e,default:()=>Ge,dependencies:()=>$e,name:()=>He,register:()=>Ke,template:()=>Xe});var d={};i.r(d),i.d(d,{bindables:()=>nt,default:()=>tt,dependencies:()=>it,name:()=>Ze,register:()=>st,template:()=>et});var h={};i.r(h),i.d(h,{bindables:()=>vt,default:()=>gt,dependencies:()=>ft,name:()=>pt,register:()=>yt,template:()=>mt});var u={};i.r(u),i.d(u,{bindables:()=>Ct,default:()=>Dt,dependencies:()=>xt,name:()=>Tt,register:()=>jt,template:()=>kt});var p={};i.r(p),i.d(p,{bindables:()=>Bt,default:()=>It,dependencies:()=>Mt,name:()=>Ft,register:()=>Jt,template:()=>At});var m={};i.r(m),i.d(m,{bindables:()=>_t,default:()=>Gt,dependencies:()=>$t,name:()=>Ht,register:()=>Kt,template:()=>Xt});var g={};i.r(g),i.d(g,{bindables:()=>si,default:()=>ni,dependencies:()=>ai,name:()=>ti,register:()=>oi,template:()=>ii});var f={};i.r(f),i.d(f,{bindables:()=>vi,default:()=>gi,dependencies:()=>fi,name:()=>pi,register:()=>yi,template:()=>mi});var v={};i.r(v),i.d(v,{Alert:()=>ke,Blocs:()=>Ot,Burger:()=>qe,Composites:()=>Nt,ElementToolbar:()=>qt,File:()=>ut,Notification:()=>de,NotificationCenter:()=>he,Overlay:()=>Me,Permissions:()=>ei,Profile:()=>W,QuillEditor:()=>Di,SchemaEditor:()=>ui,Test:()=>Ye});var b={};i.r(b),i.d(b,{Ajaxify:()=>P,AlertDelete:()=>Si,BcTestCustomAttribute:()=>O,BroadcastElement:()=>Ui,Fold:()=>Vi,Menu:()=>C,NotificationTrigger:()=>Ai,OverlayClose:()=>Ii,OverlayTrigger:()=>Pi,ToggleDependencies:()=>Ji,UrlGenerator:()=>Hi,ViewEdit:()=>Xi});var y=i(53),E=i(171),w=i(149);let O=(()=>{let e,t,i=[(0,w.OVJ)("bc-test")],n=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("BcTestCustomAttribute"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(w.ND1)){this.logger=e,this.ea=t,this.element=i,this.logger=e.scopeTo("BcTestCustomAttribute")}attaching(){this.logger.trace("Attaching")}},a=t,"symbol"==typeof(s="BcTestCustomAttribute")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n)})(),t;var a,s,l})();var T,k;!function(e){e[e.OPEN=0]="OPEN",e[e.CLOSE=1]="CLOSE"}(T||(T={})),function(e){e[e.OPENING=0]="OPENING",e[e.OPENED=1]="OPENED",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(k||(k={}));const D=E.DI.createInterface("IStorageService",(e=>e.singleton(x)));class x{getElementOpened(e,t,i){return""!==i&&""!==t&&""!==e&&"1"===localStorage.getItem("admin:element:"+e+"-"+i+":"+t+":opened")}setElementOpened(e,t,i){""!==i&&""!==t&&""!==e&&localStorage.setItem("admin:element:"+e+"-"+i+":"+t+":opened","1")}setElementClosed(e,t,i){""!==i&&""!==t&&""!==e&&localStorage.removeItem("admin:element:"+e+"-"+i+":"+t+":opened")}getSectionOpened(e,t){return""!==t&&""!==e&&"1"===localStorage.getItem("admin:section:"+e+"-"+t+":opened")}setSectionOpened(e,t){""!==t&&""!==e&&localStorage.setItem("admin:section:"+e+"-"+t+":opened","1")}setSectionClosed(e,t){""!==t&&""!==e&&localStorage.removeItem("admin:section:"+e+"-"+t+":opened")}getElementSlugOpened(e){return""!==e&&"1"===localStorage.getItem("admin:element:"+e+":slug:opened")}setElementSlugOpened(e){""!==e&&localStorage.setItem("admin:element:"+e+":slug:opened","1")}setElementSlugClosed(e){""!==e&&localStorage.removeItem("admin:element:"+e+":slug:opened")}}let C=(()=>{let e,t,i=[(0,w.OVJ)("blackcube-menu")],n=[];var a,s,l,o=t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("Menu"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(w.TIm),n=(0,E.DB)(D),a=(0,E.DB)(w.ND1)){this.logger=e,this.ea=t,this.platform=i,this.storageService=n,this.element=a,this.onClickExpander=e=>{const t=e.currentTarget.closest(".navbar-item"),i=t.dataset.blackcubeSection;t.classList.contains("expanded")?(t.classList.remove("expanded"),i&&this.storageService.setSectionClosed("menu",i)):(t.classList.add("expanded"),i&&this.storageService.setSectionOpened("menu",i))},this.onMenuEvent=e=>{this.isMobile&&(e.type===T.OPEN?this.openWithTransition():e.type===T.CLOSE&&this.closeWithTransition())},this.onCloseMobileMenu=e=>{e.preventDefault(),this.ea.publish(o.channel,{type:T.CLOSE}),this.logger.trace("Close mobile menu")}}attaching(){this.logger.trace("Attaching"),this.element.classList.contains("menu-mobile")?(this.isMobile=!0,this.element.style.display="none",this.menuMobileCloseBtn=this.element.querySelector("[data-ref=close]"),this.menuMobileClosePanel=this.element.querySelector("[data-ref=closepanel]"),this.menuMobileOffcanvas=this.element.querySelector("[data-ref=offcanvas]"),this.menuMobileOverlay=this.element.querySelector("[data-ref=overlay]"),this.menuMobileSubscriber=this.ea.subscribe(o.channel,this.onMenuEvent)):this.element.classList.contains("menu-desktop")&&(this.isMobile=!1,this.menuDesktop=this.element.querySelector(".menu-desktop")),this.expanders=this.element.querySelectorAll(".navbar-item-btn")}attached(){this.logger.trace("Attached"),this.isMobile&&this.menuMobileCloseBtn&&this.menuMobileCloseBtn.addEventListener("click",this.onCloseMobileMenu),this.element.querySelectorAll("[data-blackcube-section]").forEach((e=>{const t=e.dataset.blackcubeSection;t&&(this.storageService.getSectionOpened("menu",t)?e.classList.add("expanded"):e.classList.remove("expanded"))})),this.expanders.forEach(((e,t)=>{e.addEventListener("click",this.onClickExpander)}))}detaching(){this.logger.trace("Detached"),this.expanders.forEach(((e,t)=>{e.removeEventListener("click",this.onClickExpander)})),this.isMobile&&this.menuMobileCloseBtn.removeEventListener("click",this.onCloseMobileMenu)}openWithTransition(){return this.element.style.display="inherit",this.ea.publish(o.channel,{status:k.OPENING}),new Promise((e=>{setTimeout((()=>{e(!0)}))})).then((e=>{const t=[],i=new Promise((e=>{const t=i=>{this.menuMobileOverlay.classList.contains("opening")&&(this.menuMobileOverlay.classList.remove("opening","closed"),this.menuMobileOverlay.removeEventListener("transitionend",t),e(!0))};this.menuMobileOverlay.addEventListener("transitionend",t),this.menuMobileOverlay.classList.remove("closed"),this.menuMobileOverlay.classList.add("opening","opened")}));t.push(i);const n=new Promise((e=>{const t=i=>{this.menuMobileOffcanvas.classList.contains("opening")&&(this.menuMobileOffcanvas.classList.remove("opening","closed"),this.menuMobileOffcanvas.removeEventListener("transitionend",t),e(!0))};this.menuMobileOffcanvas.addEventListener("transitionend",t),this.menuMobileOffcanvas.classList.remove("closed"),this.menuMobileOffcanvas.classList.add("opening","opened")}));t.push(n);const a=new Promise((e=>{const t=i=>{this.menuMobileClosePanel.classList.contains("opening")&&(this.menuMobileClosePanel.classList.remove("opening","closed"),this.menuMobileClosePanel.removeEventListener("transitionend",t),e(!0))};this.menuMobileClosePanel.addEventListener("transitionend",t),this.menuMobileClosePanel.classList.remove("closed"),this.menuMobileClosePanel.classList.add("opening","opened")}));return t.push(a),Promise.all(t)})).then((e=>(this.ea.publish(o.channel,{status:k.OPENED}),e.reduce(((e,t)=>t&&e),!0))))}closeWithTransition(){return this.ea.publish(o.channel,{status:k.CLOSING}),new Promise((e=>{setTimeout((()=>{e(!0)}))})).then((e=>{const t=[],i=new Promise((e=>{const t=i=>{this.menuMobileOverlay.classList.contains("closing")&&(this.menuMobileOverlay.classList.remove("closing","opened"),this.menuMobileOverlay.removeEventListener("transitionend",t),e(!0))};this.menuMobileOverlay.addEventListener("transitionend",t),this.menuMobileOverlay.classList.remove("opened"),this.menuMobileOverlay.classList.add("closing","closed")}));t.push(i);const n=new Promise((e=>{const t=i=>{this.menuMobileOffcanvas.classList.contains("closing")&&(this.menuMobileOffcanvas.classList.remove("closing","opened"),this.menuMobileOffcanvas.removeEventListener("transitionend",t),e(!0))};this.menuMobileOffcanvas.addEventListener("transitionend",t),this.menuMobileOffcanvas.classList.remove("opened"),this.menuMobileOffcanvas.classList.add("closing","closed")}));t.push(n);const a=new Promise((e=>{const t=i=>{this.menuMobileClosePanel.classList.contains("closing")&&(this.menuMobileClosePanel.classList.remove("closing","opened"),this.menuMobileClosePanel.removeEventListener("transitionend",t),e(!0))};this.menuMobileClosePanel.addEventListener("transitionend",t),this.menuMobileClosePanel.classList.remove("opened"),this.menuMobileClosePanel.classList.add("closing","closed")}));return t.push(a),Promise.all(t)})).then((e=>(this.ea.publish(o.channel,{status:k.CLOSED}),this.element.style.display="none",e.reduce(((e,t)=>t&&e),!0))))}};return a=t,"symbol"==typeof(s="Menu")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),o=t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),t.channel="Menu",function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n),o=t})();var S=i(997);const j=E.DI.createInterface("IHttpService",(e=>e.singleton(L)));class L{constructor(e=(0,E.DB)(S.tL)){this.httpClient=e,this.httpClient.configure((e=>(e.withDefaults({headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"include"}),e)))}getHtmlContent(e){return this.httpClient.get(e,{headers:{Accept:"text/html"}}).then((e=>e.text()))}runFormRequest(e,t=null,i="post"){return this.httpClient.fetch(e,{method:i.toLocaleLowerCase(),body:t}).then((e=>e.text()))}fetch(e,t){return this.httpClient.fetch(e,t)}deleteRequest(e,t=""){return this.httpClient.fetch(e,{method:"delete",headers:{"X-CSRF-Token":t}})}}let P=(()=>{let e,t,i=[(0,w.OVJ)("blackcube-ajaxify")],n=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("Ajaxify"),t=(0,E.DB)(w.TIm),i=(0,E.DB)(j),n=(0,E.DB)(w.ND1)){this.logger=e,this.platform=t,this.httpService=i,this.element=n,this.onDelegateEvent=e=>{if(e.target){const t=e.target.closest("[data-ajaxify-source]");if(t){const i=t.dataset.ajaxifySource;let n=t.dataset.ajaxifyUrl;!n&&(t instanceof HTMLLinkElement||t instanceof HTMLAnchorElement)&&(n=t.href);const a=this.element.querySelector('[data-ajaxify-target="'+i+'"]');i&&n&&a&&(e.preventDefault(),this.httpService.getHtmlContent(n).then((e=>{a.innerHTML=e,this.platform.taskQueue.queueTask((()=>{a.scrollIntoView({behavior:"smooth"})}))})))}}},this.logger.debug("Construct")}attaching(){this.logger.trace("Attaching")}attached(){this.element.addEventListener("click",this.onDelegateEvent),this.logger.trace("Attached")}detaching(){this.logger.trace("Detaching"),this.element.removeEventListener("click",this.onDelegateEvent)}},a=t,"symbol"==typeof(s="Ajaxify")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n)})(),t;var a,s,l})();const N="profile",F='<template>\n    <div>\n        <button type="button" class="profile-btn" click.trigger="onToggle($event)" id="user-menu-button" aria-expanded="false" aria-haspopup="true">\n            <span class="sr-only">Open user menu</span>\n            <img if.bind="avatar" class="profile-img" src.bind="avatar" alt="">\n            <span else class="profile-initials">\n                <span class="profile-initials-letters">${initials}</span>\n            </span>\n        </button>\n    </div>\n    <div if.bind="items.length > 0" ref="menu" class="profile-menu closed"  role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" tabindex="-1">\n        <a repeat.for="item of items" click.trigger="onClickItem($event, $index)" href.bind="item.url" class="profile-menu-item" class.bind="item.active ? \'active\': \'\'" role="menuitem" tabindex="-1" innerHTML.bind="item.label"></a>\n    </div>\n</template>\n',A=F,I=[],M={};let B;function U(e){B||(B=w.b_N.define({name:N,template:F,dependencies:I,bindables:M})),e.register(B)}var J,z=i(0);!function(e){e[e.OPENED=0]="OPENED",e[e.OPENING=1]="OPENING",e[e.CLOSED=2]="CLOSED",e[e.CLOSING=3]="CLOSING"}(J||(J={})),i(144);var R=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0},V=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0};let W=(()=>{let e,t,i,a,s,l,o=[(0,w.MoW)(Object.assign(Object.assign({},n),{name:"blackcube-profile"}))],r=[],c=[],d=[],h=[],u=[],p=[],m=[],g=[];var f,v,b,y=t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("Profile"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(w.TIm),n=(0,E.DB)(w.ND1)){this.logger=(R(this,c),e),this.ea=t,this.platform=i,this.element=n,this.avatar=R(this,d,void 0),this.initials=(R(this,h),R(this,u,void 0)),this.items=(R(this,p),R(this,m,[])),this.menu=R(this,g),this.hasListener=!1,this.onTransitionMenuEnded=e=>{this.menu.classList.contains("closing")?(this.menu.classList.remove("closing","opened"),this.menu.style.display="none",this.ea.publish(y.channel,{status:J.CLOSED})):this.menu.classList.contains("opening")&&(this.menu.classList.remove("opening","closed"),this.ea.publish(y.channel,{status:J.OPENED}))}}attaching(){this.logger.trace("Attaching")}attached(){this.logger.trace("Attached"),this.items.length>0&&(this.hasListener=!0,this.menu.style.display="none",this.menu.addEventListener("transitionend",this.onTransitionMenuEnded))}detaching(){this.logger.trace("Detaching"),!0===this.hasListener&&this.menu.removeEventListener("transitionend",this.onTransitionMenuEnded)}onToggle(e){this.items.length>0&&(this.menu.classList.contains("opened")?this.closeMenu(e):this.menu.classList.contains("closed")&&this.openMenu(e))}onClickItem(e,t){return this.closeMenu(e),!0}openMenu(e){this.ea.publish(y.channel,{status:J.OPENING}),this.menu.style.display="inherit",this.platform.setTimeout((()=>{this.menu.classList.remove("closed"),this.menu.classList.add("opening","opened")}),0)}closeMenu(e){this.ea.publish(y.channel,{status:J.CLOSING}),this.menu.classList.remove("opened"),this.menu.classList.add("closing","closed")}handleTransitionMenu(e,t){this.logger.debug("onChangeItems",e,t),e>0&&0===t?(this.platform.setTimeout((()=>{this.menu.addEventListener("transitionend",this.onTransitionMenuEnded)})),this.hasListener=!0):0===e&&t>0&&(this.menu.removeEventListener("transitionend",this.onTransitionMenuEnded),this.hasListener=!1)}};return f=t,"symbol"==typeof(v="Profile")&&(v=v.description?"[".concat(v.description,"]"):""),Object.defineProperty(f,"name",{configurable:!0,value:b?"".concat(b," ",v):v}),(()=>{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)({mode:z.BindingMode.toView})],a=[(0,w.ExJ)({mode:z.BindingMode.toView})],s=[(0,w.ExJ)({mode:z.BindingMode.toView})],l=[(0,w.YPB)((e=>e.items.length))],V(t,null,l,{kind:"method",name:"handleTransitionMenu",static:!1,private:!1,access:{has:e=>"handleTransitionMenu"in e,get:e=>e.handleTransitionMenu},metadata:n},null,c),V(null,null,i,{kind:"field",name:"avatar",static:!1,private:!1,access:{has:e=>"avatar"in e,get:e=>e.avatar,set:(e,t)=>{e.avatar=t}},metadata:n},d,h),V(null,null,a,{kind:"field",name:"initials",static:!1,private:!1,access:{has:e=>"initials"in e,get:e=>e.initials,set:(e,t)=>{e.initials=t}},metadata:n},u,p),V(null,null,s,{kind:"field",name:"items",static:!1,private:!1,access:{has:e=>"items"in e,get:e=>e.items,set:(e,t)=>{e.items=t}},metadata:n},m,g),V(null,e={value:t},o,{kind:"class",name:t.name,metadata:n},null,r),y=t=e.value,n&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})})(),t.channel="Profile",R(t,r),y=t})();const q="notification-center",H='<template>\n    <div aria-live="assertive" class="notification-center">\n        <blackcube-notification repeat.for="notification of notifications"\n                                class="notification"\n            type.bind="notification.type"\n        title.bind="notification.title"\n        content.bind="notification.content"\n        index.bind="$index"\n        duration.bind="notification.duration">\n        </blackcube-notification>\n    </div>\n</template>\n',X=H,G=[],$={};let _;function Q(e){_||(_=w.b_N.define({name:q,template:H,dependencies:G,bindables:$})),e.register(_)}const K="notification",Y='<template>\n        \x3c!--\n          NotificationData panel, dynamically insert this into the live region when it needs to be displayed\n\n          Entering: "transform ease-out duration-300 transition"\n            From: "translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2"\n            To: "translate-y-0 opacity-100 sm:translate-x-0"\n          Leaving: "transition ease-in duration-100"\n            From: "opacity-100"\n            To: "opacity-0"\n        --\x3e\n        <div ref="wrapper" class="notification-wrapper closed">\n            <div class="notification-icon">\n                \x3c!-- Heroicon name: outline/check-circle --\x3e\n                <svg if.bind="type === notificationTypes.CHECK" class="notification-icon-img check" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />\n                </svg>\n                \x3c!-- Heroicon name: outline/exclamation --\x3e\n                <svg if.bind="type === notificationTypes.EXCLAMATION" class="notification-icon-img exclamation" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />\n                </svg>\n                \x3c!-- Heroicon name: outline/information --\x3e\n                <svg if.bind="type === notificationTypes.INFORMATION" class="notification-icon-img" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />\n                </svg>\n            </div>\n            <div class="notification-panel">\n                <p class="notification-title">\n                    ${title}\n                </p>\n                <p class="notification-content">\n                    ${content}\n                </p>\n            </div>\n            <div class="notification-btn-wrapper">\n                <button  click.trigger="onClose($event)" class="notification-btn">\n                    <span class="sr-only">Close</span>\n                    \x3c!-- Heroicon name: solid/x --\x3e\n                    <svg class="notification-close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">\n                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />\n                    </svg>\n                </button>\n            </div>\n        </div>\n</template>\n',Z=Y,ee=[],te={};let ie;function ne(e){ie||(ie=w.b_N.define({name:K,template:Y,dependencies:ee,bindables:te})),e.register(ie)}var ae,se,le;function oe(e,t){return new Promise((t=>{e.startingCallback&&e.startingCallback(),e.beforeDisplayStyle&&(e.element.style.display=e.beforeDisplayStyle),setTimeout((()=>{t(!0)}),10)})).then((e=>{const i=[Promise.resolve(!0)];return t.forEach((e=>{const t=new Promise((t=>{const i=n=>{e.element.removeEventListener("transitionend",i),e.transition.forEach((t=>{e.element.classList.remove(t)})),t(!0)};e.element.addEventListener("transitionend",i),e.from.forEach((t=>{e.element.classList.remove(t)})),e.to.forEach((t=>{e.element.classList.add(t)})),e.transition.forEach((t=>{e.element.classList.add(t)}))}));i.push(t)})),Promise.all(i)})).then((e=>{const t=e.reduce(((e,t)=>e&&t),!0);return new Promise((e=>{setTimeout((()=>{e(t)}))}))})).then((e=>{const i=[];return i.push(Promise.resolve(e)),t.forEach((e=>{e.transition.forEach((t=>{i.push(new Promise((i=>{e.element.classList.remove(t),i(!0)})))}))})),Promise.all(i)})).then((t=>(e.afterDisplayStyle&&(e.element.style.display=e.afterDisplayStyle),e.endingCallback&&e.endingCallback(),new Promise((e=>{setTimeout((()=>{e(!0)}),10)})))))}!function(e){e[e.OPENING=0]="OPENING",e[e.OPENED=1]="OPENED",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED",e[e.REMOVED=4]="REMOVED"}(ae||(ae={})),function(e){e.CHECK="check",e.EXCLAMATION="exclamation",e.INFORMATION="information"}(se||(se={})),function(e){e[e.CREATE=0]="CREATE",e[e.REMOVE_ALL=1]="REMOVE_ALL"}(le||(le={}));var re=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},ce=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let de=(()=>{let e,t,i,n,a,l,o,r=[(0,w.MoW)(Object.assign(Object.assign({},s),{name:"blackcube-notification"}))],c=[],d=[],h=[],u=[],p=[],m=[],g=[],f=[],v=[],b=[],y=[];var O,T,k,D=t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("Notification"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(w.TIm),n=(0,E.DB)(w.ND1)){this.logger=e,this.ea=t,this.platform=i,this.element=n,this.notificationTypes=se,this.type=ce(this,d,se.INFORMATION),this.title=(ce(this,h),ce(this,u,"")),this.content=(ce(this,p),ce(this,m,"")),this.index=(ce(this,g),ce(this,f,void 0)),this.duration=(ce(this,v),ce(this,b,void 0)),this.closeTimer=ce(this,y)}attaching(){this.logger.trace("Attaching",this.duration),this.duration||(this.duration=5e3)}attached(){this.logger.trace("Attached"),this.openWithTransition(),this.closeTimer=this.platform.setTimeout((()=>{this.logger.trace("Auto close"),this.closeWithTransition()}),this.duration)}detaching(){return this.logger.trace("Detaching"),this.wrapper.classList.contains("opened")?this.closeWithTransition().then((e=>Promise.resolve())):Promise.resolve()}onClose(e){e.preventDefault(),this.closeWithTransition()}closeWithTransition(){return this.closeTimer&&this.platform.clearTimeout(this.closeTimer),oe({element:this.wrapper,afterDisplayStyle:"none",startingCallback:()=>{this.ea.publish(D.channel,{status:ae.CLOSING,index:this.index})},endingCallback:()=>{this.ea.publish(D.channel,{status:ae.CLOSED,index:this.index})}},[{element:this.wrapper,from:["opened"],to:["closed"],transition:["closing"]}])}openWithTransition(){return oe({element:this.wrapper,beforeDisplayStyle:"inherit",startingCallback:()=>{this.ea.publish(D.channel,{status:ae.OPENING,index:this.index})},endingCallback:()=>{this.ea.publish(D.channel,{status:ae.OPENED,index:this.index})}},[{element:this.wrapper,from:["closed"],to:["opened"],transition:["opening"]}])}};return O=t,"symbol"==typeof(T="Notification")&&(T=T.description?"[".concat(T.description,"]"):""),Object.defineProperty(O,"name",{configurable:!0,value:k?"".concat(k," ",T):T}),(()=>{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)()],n=[(0,w.ExJ)()],a=[(0,w.ExJ)()],l=[(0,w.ExJ)()],o=[(0,w.ExJ)()],re(null,null,i,{kind:"field",name:"type",static:!1,private:!1,access:{has:e=>"type"in e,get:e=>e.type,set:(e,t)=>{e.type=t}},metadata:s},d,h),re(null,null,n,{kind:"field",name:"title",static:!1,private:!1,access:{has:e=>"title"in e,get:e=>e.title,set:(e,t)=>{e.title=t}},metadata:s},u,p),re(null,null,a,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}},metadata:s},m,g),re(null,null,l,{kind:"field",name:"index",static:!1,private:!1,access:{has:e=>"index"in e,get:e=>e.index,set:(e,t)=>{e.index=t}},metadata:s},f,v),re(null,null,o,{kind:"field",name:"duration",static:!1,private:!1,access:{has:e=>"duration"in e,get:e=>e.duration,set:(e,t)=>{e.duration=t}},metadata:s},b,y),re(null,e={value:t},r,{kind:"class",name:t.name,metadata:s},null,c),D=t=e.value,s&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})})(),t.channel="Notification",ce(t,c),D=t})();let he=(()=>{let e,t,i=[(0,w.MoW)(Object.assign(Object.assign({},a),{name:"blackcube-notification-center"}))],n=[];var s,l,o,r=t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("NotificationCenter"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(w.ND1)){this.logger=e,this.ea=t,this.element=i,this.notifications=[],this.onNotificationEvent=e=>{e.status===ae.CLOSED&&(this.logger.debug("Notification event",e),this.removeNotification(e.index))},this.onNotificationCenterEvent=e=>{e.type===le.CREATE&&e.notification?(this.logger.debug("Notification event",e),this.addNotification(e.notification)):e.type===le.REMOVE_ALL&&(this.logger.debug("Should close children"),this.notifications.splice(0,this.notifications.length))}}attaching(){this.logger.trace("Attaching"),this.subscriberNotification=this.ea.subscribe(de.channel,this.onNotificationEvent),this.subscriber=this.ea.subscribe(r.channel,this.onNotificationCenterEvent)}attached(){this.logger.trace("Attached")}dispose(){this.subscriberNotification.dispose(),this.subscriber.dispose()}addNotification(e){this.notifications.push(e)}removeNotification(e){this.notifications.splice(e,1)}detaching(){this.logger.trace("Detaching")}};return s=t,"symbol"==typeof(l="NotificationCenter")&&(l=l.description?"[".concat(l.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:o?"".concat(o," ",l):l}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),r=t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),t.channel="NotificationCenter",function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n),r=t})();const ue="alert",pe='<template>\n    <div class="alert" aria-labelledby="modal-title" role="dialog" aria-modal="true">\n        <div class="alert-wrapper">\n            \x3c!--\n              Background overlay, show/hide based on modal state.\n\n              Entering: "ease-out duration-300"\n                From: "opacity-0"\n                To: "opacity-100"\n              Leaving: "ease-in duration-200"\n                From: "opacity-100"\n                To: "opacity-0"\n            --\x3e\n            <div ref="wrapper" click.trigger="onClickCancel($event)" class="alert-overlay closed" aria-hidden="true"></div>\n\n            \x3c!-- This element is to trick the browser into centering the modal contents. --\x3e\n            <span class="alert-fix" aria-hidden="true">&#8203;</span>\n\n            \x3c!--\n              Modal panel, show/hide based on modal state.\n\n              Entering: "ease-out duration-300"\n                From: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"\n                To: "opacity-100 translate-y-0 sm:scale-100"\n              Leaving: "ease-in duration-200"\n                From: "opacity-100 translate-y-0 sm:scale-100"\n                To: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"\n            --\x3e\n            <div ref="panel" class="alert-panel closed">\n                <div class="alert-panel-content">\n                    <div class="alert-icon" class.bind="type === alertTypes.CHECK ? \'check\' : (type === alertTypes.EXCLAMATION ? \'exclamation\': \'question\')">\n                        \x3c!-- Heroicon name: outline/check --\x3e\n                        <svg if.bind="type === alertTypes.CHECK" class="alert-icon-img" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />\n                        </svg>\n                        \x3c!-- Heroicon name: outline/exclamation --\x3e\n                        <svg if.bind="type === alertTypes.EXCLAMATION" class="alert-icon-img" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />\n                        </svg>\n                        \x3c!-- Heroicon name: outline/information --\x3e\n                        <svg if.bind="type === alertTypes.QUESTION" class="alert-icon-img" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />\n                        </svg>\n                    </div>\n                    <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">\n                        <au-compose template.bind="htmlData"></au-compose>\n                    </div>\n                </div>\n                <div class="alert-panel-actions">\n                    <button click.trigger="onClickAction($event)" type="button" class="alert-btn" class.bind="type === alertTypes.CHECK ? \'check\' : (type === alertTypes.EXCLAMATION ? \'exclamation\': \'question\')">\n                        ${actionTitle}\n                    </button>\n                    <button click.trigger="onClickCancel($event)" type="button" class="alert-btn">\n                        ${cancelTitle}\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n',me=pe,ge=[],fe={};let ve;function be(e){ve||(ve=w.b_N.define({name:ue,template:pe,dependencies:ge,bindables:fe})),e.register(ve)}var ye,Ee,we;!function(e){e[e.OPENING=0]="OPENING",e[e.OPENED=1]="OPENED",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED",e[e.REMOVED=4]="REMOVED"}(ye||(ye={})),function(e){e.CHECK="check",e.EXCLAMATION="exclamation",e.QUESTION="question"}(Ee||(Ee={})),function(e){e[e.OPEN=0]="OPEN",e[e.CLOSE=1]="CLOSE"}(we||(we={}));var Oe=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Te=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let ke=(()=>{let e,t,i,n=[(0,w.MoW)(Object.assign(Object.assign({},l),{name:"blackcube-alert"}))],a=[],s=[],o=[];var r,c,d,h=t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("Alert"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(j),n=(0,E.DB)(w.ND1)){this.logger=e,this.ea=t,this.httpService=i,this.element=n,this.alertTypes=Ee,this.type=Te(this,s,Ee.QUESTION),this.cancelTitle=(Te(this,o),"Cancel"),this.actionTitle="Action",this.stackedAlerts=[],this.alertShown=!1,this.onAlertEvent=e=>{e.type===we.OPEN&&e.alert?(this.type=e.alert.type,e.alert.actionTitle&&(this.actionTitle=e.alert.actionTitle),e.alert.cancelTitle&&(this.cancelTitle=e.alert.cancelTitle),this.contentUrl=e.alert.contentUrl,this.action=e.alert.action,this.cancel=e.alert.cancel,this.httpService.getHtmlContent(this.contentUrl).then((e=>(this.htmlData=e,!0))).then((e=>{this.logger.warn("Opening alert"),this.openWithTransition()}))):e.type===we.CLOSE&&this.closeWithTransition()}}attaching(){this.logger.trace("Attaching"),this.element.style.display="none",this.subscription=this.ea.subscribe(h.channel,this.onAlertEvent)}attached(){this.logger.trace("Attached")}detaching(){this.logger.trace("Detaching")}openWithTransition(){return oe({element:this.element,beforeDisplayStyle:"inherit",startingCallback:()=>{this.logger.warn("opening"),this.ea.publish(h.channel,{status:ye.OPENING})},endingCallback:()=>{this.logger.warn("opened"),this.ea.publish(h.channel,{status:ye.OPENED}),this.alertShown=!0}},[{element:this.wrapper,from:["closed"],to:["opened"],transition:["opening"]},{element:this.panel,from:["closed"],to:["opened"],transition:["opening"]}])}closeWithTransition(){return oe({element:this.element,afterDisplayStyle:"none",startingCallback:()=>{this.ea.publish(h.channel,{status:ye.CLOSING})},endingCallback:()=>{this.ea.publish(h.channel,{status:ye.CLOSED}),this.alertShown=!0}},[{element:this.wrapper,from:["opened"],to:["closed"],transition:["closing"]},{element:this.panel,from:["opened"],to:["closed"],transition:["closing"]}])}onClickAction(e){e.preventDefault(),this.logger.debug("Click action"),this.action&&this.action(),this.closeWithTransition()}onClickCancel(e){e.preventDefault(),this.logger.debug("Click cancel"),this.cancel&&this.cancel(),this.closeWithTransition()}};return r=t,"symbol"==typeof(c="Alert")&&(c=c.description?"[".concat(c.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:d?"".concat(d," ",c):c}),(()=>{const l="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)()],Oe(null,null,i,{kind:"field",name:"type",static:!1,private:!1,access:{has:e=>"type"in e,get:e=>e.type,set:(e,t)=>{e.type=t}},metadata:l},s,o),Oe(null,e={value:t},n,{kind:"class",name:t.name,metadata:l},null,a),h=t=e.value,l&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),t.channel="Alert",Te(t,a),h=t})();const De="overlay",xe='<template>\n    <div class="overlay-wrapper">\n        \x3c!--\n          Background overlay, show/hide based on slide-over state.\n\n          Entering: "ease-in-out duration-500"\n            From: "opacity-0"\n            To: "opacity-100"\n          Leaving: "ease-in-out duration-500"\n            From: "opacity-100"\n            To: "opacity-0"\n        --\x3e\n        <div ref="overlay" click.trigger="onClickClose($event)" class="overlay-overlay closed" aria-hidden="true"></div>\n\n        <div class="overlay-content">\n            \x3c!--\n              Slide-over panel, show/hide based on slide-over state.\n\n              Entering: "transform transition ease-in-out duration-500 sm:duration-700"\n                From: "translate-x-full"\n                To: "translate-x-0"\n              Leaving: "transform transition ease-in-out duration-500 sm:duration-700"\n                From: "translate-x-0"\n                To: "translate-x-full"\n            --\x3e\n            <div ref="panel" class="overlay-panel closed">\n                <div class="overlay-panel-wrapper">\x3c!-- innerHTML.bind="htmlData" --\x3e\n                    \x3c!-- Replace with your content --\x3e\n                    <au-compose template.bind="htmlData"></au-compose>\n\n                    \x3c!-- /End replace --\x3e\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n',Ce=xe,Se=[],je={};let Le;function Pe(e){Le||(Le=w.b_N.define({name:De,template:xe,dependencies:Se,bindables:je})),e.register(Le)}var Ne,Fe;!function(e){e[e.OPENING=0]="OPENING",e[e.OPENED=1]="OPENED",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED",e[e.REMOVED=4]="REMOVED"}(Ne||(Ne={})),function(e){e[e.OPEN=0]="OPEN",e[e.CLOSE=1]="CLOSE"}(Fe||(Fe={}));var Ae=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Ie=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Me=(()=>{let e,t,i,n,a,s,l=[(0,w.MoW)(Object.assign(Object.assign({},o),{name:"blackcube-overlay"}))],r=[],c=[],d=[],h=[],u=[],p=[],m=[],g=[],f=[];var v,b,y,O=t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("Overlay"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(w.TIm),n=(0,E.DB)(j),a=(0,E.DB)(w.ND1)){this.logger=e,this.ea=t,this.platform=i,this.httpService=n,this.element=a,this.title=Ie(this,c,""),this.abstract=(Ie(this,d),Ie(this,h,"")),this.cancelTitle=(Ie(this,u),Ie(this,p,"")),this.actionTitle=(Ie(this,m),Ie(this,g,"")),this.htmlData=Ie(this,f),this.isOpen=!1,this.onOverlayEvent=e=>{e.type===Fe.OPEN?this.closeWithTransition().then((t=>{var i,n,a,s;return this.title=e.overlay.title,this.abstract=e.overlay.abstract,this.cancel=null===(i=e.overlay)||void 0===i?void 0:i.cancel,this.action=null===(n=e.overlay)||void 0===n?void 0:n.action,this.cancelTitle=(null===(a=e.overlay)||void 0===a?void 0:a.cancelTitle)||"Cancel",this.actionTitle=(null===(s=e.overlay)||void 0===s?void 0:s.actionTitle)||"Action",this.httpService.getHtmlContent(e.overlay.url)})).then((e=>(this.htmlData=e,new Promise((e=>{this.platform.setTimeout((()=>{e(!0)}),40)}))))).then((e=>this.openWithTransition())):e.type===Fe.CLOSE&&this.closeWithTransition()},this.onDelegatedEvent=e=>{var t,i,n;const a=null===(t=e.target)||void 0===t?void 0:t.closest("[data-overlay-action]"),s=e;if("click"===e.type&&a&&this.panel.contains(a)){if(a.dataset.overlayAction&&"close"===a.dataset.overlayAction&&(e.stopPropagation(),e.preventDefault(),this.onClickClose(e),this.logger.warn("delegated "+e.type+" done",e.target,e.type)),a.dataset.overlayAction&&"submit"===a.dataset.overlayAction){e.stopPropagation(),e.preventDefault();const t=null===(i=e.target)||void 0===i?void 0:i.closest("form");if(t){const e=new FormData(t);a instanceof HTMLButtonElement&&a.hasAttribute("name")&&a.hasAttribute("value")&&e.append(a.name,a.value),this.httpService.fetch(t.action,{method:t.method,body:e}).then((e=>{const t=e.headers.get("X-Redirect");if(t)throw window.location.href=t,new Error("Should redirect");return e.text()})).then((e=>{this.htmlData=e}))}}}else if("submit"===e.type){const t=null===(n=e.target)||void 0===n?void 0:n.closest("form");if(s.preventDefault(),t){const e=new FormData(t),i=s.submitter;i.hasAttribute("name")&&i.hasAttribute("value")&&e.append(i.name,i.value),this.httpService.runFormRequest(t.action,e,t.method).then((e=>{this.htmlData=e})),this.logger.warn("delegated "+s.type+" done")}}},this.onClickClose=e=>{this.cancel&&this.cancel(),this.closeWithTransition()}}attaching(){this.logger.trace("Attaching"),this.subscriber=this.ea.subscribe(O.channel,this.onOverlayEvent)}attached(){this.element.style.display="none",this.logger.trace("Attached"),this.panel.addEventListener("submit",this.onDelegatedEvent),this.panel.addEventListener("click",this.onDelegatedEvent)}detaching(){this.logger.trace("Detaching"),this.panel.removeEventListener("click",this.onDelegatedEvent),this.panel.removeEventListener("submit",this.onDelegatedEvent)}dispose(){this.subscriber.dispose()}openWithTransition(){return!1===this.isOpen?(this.isOpen=!0,oe({element:this.element,beforeDisplayStyle:"inherit",startingCallback:()=>{this.ea.publish(O.channel,{status:Ne.OPENING})},endingCallback:()=>{this.ea.publish(O.channel,{status:Ne.OPENED})}},[{element:this.overlay,from:["closed"],to:["opened"],transition:["opening"]},{element:this.panel,from:["closed"],to:["opened"],transition:["opening"]}])):Promise.resolve(!0)}closeWithTransition(){return!0===this.isOpen?(this.isOpen=!1,oe({element:this.element,afterDisplayStyle:"none",startingCallback:()=>{this.ea.publish(O.channel,{status:Ne.CLOSING})},endingCallback:()=>{this.htmlData="",this.ea.publish(O.channel,{status:Ne.CLOSED})}},[{element:this.overlay,from:["opened"],to:["closed"],transition:["closing"]},{element:this.panel,from:["opened"],to:["closed"],transition:["closing"]}])):Promise.resolve(!0)}};return v=t,"symbol"==typeof(b="Overlay")&&(b=b.description?"[".concat(b.description,"]"):""),Object.defineProperty(v,"name",{configurable:!0,value:y?"".concat(y," ",b):b}),(()=>{const o="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)()],n=[(0,w.ExJ)()],a=[(0,w.ExJ)()],s=[(0,w.ExJ)()],Ae(null,null,i,{kind:"field",name:"title",static:!1,private:!1,access:{has:e=>"title"in e,get:e=>e.title,set:(e,t)=>{e.title=t}},metadata:o},c,d),Ae(null,null,n,{kind:"field",name:"abstract",static:!1,private:!1,access:{has:e=>"abstract"in e,get:e=>e.abstract,set:(e,t)=>{e.abstract=t}},metadata:o},h,u),Ae(null,null,a,{kind:"field",name:"cancelTitle",static:!1,private:!1,access:{has:e=>"cancelTitle"in e,get:e=>e.cancelTitle,set:(e,t)=>{e.cancelTitle=t}},metadata:o},p,m),Ae(null,null,s,{kind:"field",name:"actionTitle",static:!1,private:!1,access:{has:e=>"actionTitle"in e,get:e=>e.actionTitle,set:(e,t)=>{e.actionTitle=t}},metadata:o},g,f),Ae(null,e={value:t},l,{kind:"class",name:t.name,metadata:o},null,r),O=t=e.value,o&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o})})(),t.channel="Overlay",Ie(t,r),O=t})();const Be="burger",Ue='<template>\n    <button ref="openMenuBtn" class="px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 md:hidden">\n        <span class="sr-only">Open sidebar</span>\n        \x3c!-- Heroicon name: outline/menu-alt-2 --\x3e\n        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" />\n        </svg>\n    </button>\n</template>\n',Je=Ue,ze=[],Re={};let Ve;function We(e){Ve||(Ve=w.b_N.define({name:Be,template:Ue,dependencies:ze,bindables:Re})),e.register(Ve)}let qe=(()=>{let e,t,i=[(0,w.MoW)(Object.assign(Object.assign({},r),{name:"blackcube-burger"})),(0,w.r7y)()],n=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("Burger"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(w.ND1)){this.logger=e,this.ea=t,this.element=i,this.onClick=e=>{e.preventDefault(),this.ea.publish(C.channel,{type:T.OPEN})}}attaching(){this.logger.trace("Attaching"),this.openMenuBtn.addEventListener("click",this.onClick)}attached(){this.logger.trace("Attached")}detaching(){this.logger.trace("Detaching"),this.openMenuBtn.removeEventListener("click",this.onClick)}},a=t,"symbol"==typeof(s="Burger")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n)})(),t;var a,s,l})();const He="test",Xe='<template>\n\n    Test component with button\n\n    <button click.trigger="onClick($event)">Click me</button>\n</template>',Ge=Xe,$e=[],_e={};let Qe;function Ke(e){Qe||(Qe=w.b_N.define({name:He,template:Xe,dependencies:$e,bindables:_e})),e.register(Qe)}let Ye=(()=>{let e,t,i=[(0,w.MoW)(Object.assign(Object.assign({},c),{name:"blackcube-test"}))],n=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("Test"),t=(0,E.DB)(E.Rp)){this.logger=e,this.ea=t}attaching(){this.logger.trace("Attaching")}attached(){this.logger.trace("Attached")}bound(){this.logger.trace("Bound")}detaching(){this.logger.trace("Detaching")}onClick(e){e.preventDefault(),this.logger.warn("Click"),this.ea.publish(ke.channel,{type:we.OPEN,alert:{type:Ee.QUESTION,title:"Titre Alerte",content:"Contenu Alerte",action:()=>{this.logger.warn("Closing with action")},cancel:()=>{this.logger.warn("Closing with cancel")}}})}},a=t,"symbol"==typeof(s="Test")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n)})(),t;var a,s,l})();const Ze="file",et='\n    <div class="element-form-bloc-upload-wrapper">\n        <label class="element-form-bloc-label" if.bind="title">\n            ${title}\n        </label>\n        <div class="element-form-bloc-upload-input-wrapper">\n            <div class="element-form-bloc-upload-drop" class.bind="error?\'error\':\'\'" ref="drop">\n                <div class="element-form-bloc-upload-drop-wrapper">\n                    <svg class="element-form-bloc-upload-icon" ref="icon" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">\n                        <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n                    </svg>\n                    <div class="element-form-bloc-upload-drop-input-wrapper" ref="browse">\n                        <label class="element-form-bloc-upload-drop-input-label">\n                            <span>${uploadFileText}</span>\n                        </label>\n                        <p class="element-form-bloc-upload-drop-input-accessory">${uploadFileDnd}</p>\n                    </div>\n                    <p class="element-form-bloc-abstract">\n                        ${fileInfo}\n                    </p>\n                </div>\n            </div>\n        </div>\n        <p class="element-form-bloc-abstract">${uploadFileDescription}</p>\n        <ul class="w-full">\n            <li class="inline-block text-gray-600 text-center p-2 relative" repeat.for="handledFile of handledFiles">\n                <button click.trigger="onRemove(handledFile, $event)" class="absolute top-0 right-0 rounded-full p-1 text-center bg-white border-gray-600 border h-6 w-6 flex items-center justify-center text-xs hover:border-red-700 hover:text-red-700">\n                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">\n                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />\n                    </svg>\n                </button>\n                <a target="_blank" href.bind="handledFile.previewUrl + \'&original=1\'" class="cursor-pointer">\n                <img class="object-contain h-24" src.bind="handledFile.previewUrl" title.bind="handledFile.shortname">\n                </a>\n            </li>\n        </ul>\n    </div>\n',tt=et,it=[],nt={};let at;function st(e){at||(at=w.b_N.define({name:Ze,template:et,dependencies:it,bindables:nt})),e.register(at)}var lt=i(904),ot=i.n(lt),rt=i(938),ct=i.n(rt),dt=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},ht=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let ut=(()=>{let e,t,i,n,a,s,l,o,r,c,h,u,p,m,g,f,v=[(0,w.MoW)(Object.assign(Object.assign({},d),{name:"blackcube-file-upload"}))],b=[],y=[],O=[],T=[],k=[],D=[],x=[],C=[],S=[],L=[],P=[],N=[],F=[],A=[],I=[],M=[],B=[],U=[],J=[],z=[],R=[],V=[],W=[],q=[],H=[],X=[],G=[],$=[],_=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("File"),t=(0,E.DB)(j),i=(0,E.DB)(w.TIm),n=(0,E.DB)(w.ND1)){this.logger=e,this.httpService=t,this.platform=i,this.element=n,this.uploadCount=0,this.uploadUrl=ht(this,y,void 0),this.previewUrl=(ht(this,O),ht(this,T,void 0)),this.deleteUrl=(ht(this,k),ht(this,D,void 0)),this.fileType=(ht(this,x),ht(this,C,"")),this.name=(ht(this,S),ht(this,L,void 0)),this.multiple=(ht(this,P),ht(this,N,!1)),this.value=(ht(this,F),ht(this,A,"")),this.imageWidth=(ht(this,I),ht(this,M,void 0)),this.imageHeight=(ht(this,B),ht(this,U,void 0)),this.title=(ht(this,J),ht(this,z,void 0)),this.uploadFileText=(ht(this,R),ht(this,V,void 0)),this.uploadFileDnd=(ht(this,W),ht(this,q,void 0)),this.uploadFileDescription=(ht(this,H),ht(this,X,void 0)),this.error=(ht(this,G),ht(this,$,!1)),this.onDragEnter=(ht(this,_),e=>{e.preventDefault();let t=e.currentTarget,i=e.dataTransfer;i&&i.types.indexOf("Files")>=0?(e.stopPropagation(),i.dropEffect="copy",i.effectAllowed="copy",t.classList.add("border-green-700")):i&&(i.dropEffect="none",i.effectAllowed="none")}),this.onDragLeave=e=>{e.currentTarget.classList.remove("border-green-700")},this.onFileAdded=(e,t)=>{this.logger.debug("onFileAdded",e,t),this.error=!1,this.resumable.upload()},this.onFileSuccess=(e,t)=>{const i=JSON.parse(t);!1===this.multiple?this.setFile("@blackcubetmp/"+i.finalFilename,e):this.appendFile("@blackcubetmp/"+i.finalFilename,e),this.logger.debug("onFileSuccess",e,t)},this.onFileProgress=(e,t)=>{this.logger.debug("onFileProgress",e,t)},this.onFilesAdded=(e,t)=>{this.logger.debug("onFilesAdded",e,t)},this.onFileRetry=e=>{this.logger.debug("onFileRetry",e)},this.onFileError=(e,t)=>{this.logger.debug("onFileError",e,t)},this.onUploadStart=()=>{this.logger.debug("onUploadStart"),this.handleUploadIcon(1)},this.onComplete=()=>{this.logger.debug("onComplete"),this.handleUploadIcon(-1)},this.onProgress=()=>{this.logger.debug("onProgress")},this.onError=(e,t)=>{this.logger.debug("onError",t,e)},this.onPause=()=>{this.logger.debug("onPause")},this.onBeforeCancel=()=>{this.logger.debug("onBeforeCancel")},this.onCancel=()=>{this.logger.debug("onCancel"),this.handleUploadIcon(-1)},this.onChunkingStart=e=>{this.logger.debug("onChunkingStart",e)},this.onChunkingProgress=(e,t)=>{this.logger.debug("onChunkingProgressd",e,t)},this.onChunkingComplete=e=>{this.logger.debug("onChunkingComplete",e)},this.logger=e.scopeTo("File")}appendParametersUrl(e){let t=new(ct())(e);return this.imageWidth&&t.addSearch({width:this.imageWidth}),this.imageHeight&&t.addSearch({height:this.imageHeight}),t.toString()}generatePreviewUrl(e){let t=this.previewUrl.replace("__name__",e);return this.appendParametersUrl(t)}generateDeleteUrl(e){return this.deleteUrl.replace("__name__",e)}setFiles(e){let t=e.split(/\s*,\s*/);this.handledFiles=t.filter(((e,t)=>""!==e.trim())).map(((e,t)=>({name:e,shortname:e.split(/.*[\/|\\]/).pop(),previewUrl:this.generatePreviewUrl(e),deleteUrl:this.generateDeleteUrl(e)}))),this.hiddenField.value=this.getFilesValue()}setFile(e,t=null){this.handledFiles.forEach(((e,t)=>{e.file&&null!==e.file&&this.resumable.removeFile(e.file),this.httpService.deleteRequest(e.deleteUrl,this.csfr.value)})),this.handledFiles=[{name:e,shortname:e.split(/.*[\/|\\]/).pop(),previewUrl:this.generatePreviewUrl(e),deleteUrl:this.generateDeleteUrl(e),file:t}],this.hiddenField.value=this.getFilesValue()}appendFile(e,t=null){this.handledFiles.push({name:e,shortname:e.split(/.*[\/|\\]/).pop(),previewUrl:this.generatePreviewUrl(e),deleteUrl:this.generateDeleteUrl(e),file:t}),this.hiddenField.value=this.getFilesValue()}getFilesValue(){let e=this.handledFiles.map(((e,t)=>e.name)).join(", ");return"string"==typeof e?e:""}onRemove(e,t){t.stopPropagation(),t.preventDefault(),this.logger.debug("Should remove file",e);let i=null;this.handledFiles.forEach(((t,n)=>{e.name===t.name&&(i=n)})),null!==i&&i>=0&&(e.file&&null!==e.file&&this.resumable.removeFile(e.file),this.handledFiles.splice(i,1),this.httpService.deleteRequest(e.deleteUrl,this.csfr.value));let n=this.getFilesValue();this.hiddenField.value=n}attached(){this.setUp()}setUp(){this.parentForm=this.element.closest("form"),this.logger.debug("Multiple",this.multiple);let e={target:this.uploadUrl,chunkSize:524288},t=this.fileType.split(/\s*,\s*/).filter(((e,t)=>""!==e.trim()));if(this.fileInfo=t.map((e=>e.toLocaleUpperCase())).join(", "),e.fileType=t,this.parentForm){let t=this.parentForm.querySelector("input[name=_csrf]");this.csfr={name:t.name,value:t.value},e.query={},e.query[this.csfr.name]=this.csfr.value,this.logger.debug("CSRF : ",t.value)}this.hiddenField=document.createElement("input"),this.hiddenField.type="hidden",this.hiddenField.name=this.name,this.element.appendChild(this.hiddenField),this.setFiles(this.value),this.resumable=new(ot())(e),this.resumable.support&&(this.resumable.assignBrowse(this.browse,!1),this.resumable.assignDrop(this.drop),this.drop.addEventListener("dragover",this.onDragEnter),this.drop.addEventListener("dragenter",this.onDragEnter),this.drop.addEventListener("dragleave",this.onDragLeave),this.drop.addEventListener("drop",this.onDragLeave),this.resumable.on("fileAdded",this.onFileAdded),this.resumable.on("fileSuccess",this.onFileSuccess),this.resumable.on("fileProgress",this.onFileProgress),this.resumable.on("filesAdded",this.onFilesAdded),this.resumable.on("fileRetry",this.onFileRetry),this.resumable.on("fileError",this.onFileError),this.resumable.on("uploadStart",this.onUploadStart),this.resumable.on("complete",this.onComplete),this.resumable.on("progress",this.onProgress),this.resumable.on("error",this.onError),this.resumable.on("pause",this.onPause),this.resumable.on("beforeCancel",this.onBeforeCancel),this.resumable.on("cancel",this.onCancel),this.resumable.on("chunkingStart",this.onChunkingStart),this.resumable.on("chunkingProgress",this.onChunkingProgress),this.resumable.on("chunkingComplete",this.onChunkingComplete)),this.logger.debug("Attached")}handleUploadIcon(e){this.uploadCount=this.uploadCount+e,this.uploadCount>0?this.icon.classList.add("animate-ping"):this.icon.classList.remove("animate-ping")}get getFiles(){return this.resumable.support?this.resumable.files.map(((e,t)=>e.fileName)):[]}detaching(){this.resumable.support&&(this.drop.removeEventListener("dragover",this.onDragEnter),this.drop.removeEventListener("dragenter",this.onDragEnter),this.drop.removeEventListener("dragleave",this.onDragLeave),this.drop.removeEventListener("drop",this.onDragLeave))}},Q=t,"symbol"==typeof(K="File")&&(K=K.description?"[".concat(K.description,"]"):""),Object.defineProperty(Q,"name",{configurable:!0,value:Y?"".concat(Y," ",K):K}),(()=>{const d="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)()],n=[(0,w.ExJ)()],a=[(0,w.ExJ)()],s=[(0,w.ExJ)()],l=[(0,w.ExJ)()],o=[(0,w.ExJ)()],r=[(0,w.ExJ)()],c=[(0,w.ExJ)()],h=[(0,w.ExJ)()],u=[(0,w.ExJ)()],p=[(0,w.ExJ)()],m=[(0,w.ExJ)()],g=[(0,w.ExJ)()],f=[(0,w.ExJ)()],dt(null,null,i,{kind:"field",name:"uploadUrl",static:!1,private:!1,access:{has:e=>"uploadUrl"in e,get:e=>e.uploadUrl,set:(e,t)=>{e.uploadUrl=t}},metadata:d},y,O),dt(null,null,n,{kind:"field",name:"previewUrl",static:!1,private:!1,access:{has:e=>"previewUrl"in e,get:e=>e.previewUrl,set:(e,t)=>{e.previewUrl=t}},metadata:d},T,k),dt(null,null,a,{kind:"field",name:"deleteUrl",static:!1,private:!1,access:{has:e=>"deleteUrl"in e,get:e=>e.deleteUrl,set:(e,t)=>{e.deleteUrl=t}},metadata:d},D,x),dt(null,null,s,{kind:"field",name:"fileType",static:!1,private:!1,access:{has:e=>"fileType"in e,get:e=>e.fileType,set:(e,t)=>{e.fileType=t}},metadata:d},C,S),dt(null,null,l,{kind:"field",name:"name",static:!1,private:!1,access:{has:e=>"name"in e,get:e=>e.name,set:(e,t)=>{e.name=t}},metadata:d},L,P),dt(null,null,o,{kind:"field",name:"multiple",static:!1,private:!1,access:{has:e=>"multiple"in e,get:e=>e.multiple,set:(e,t)=>{e.multiple=t}},metadata:d},N,F),dt(null,null,r,{kind:"field",name:"value",static:!1,private:!1,access:{has:e=>"value"in e,get:e=>e.value,set:(e,t)=>{e.value=t}},metadata:d},A,I),dt(null,null,c,{kind:"field",name:"imageWidth",static:!1,private:!1,access:{has:e=>"imageWidth"in e,get:e=>e.imageWidth,set:(e,t)=>{e.imageWidth=t}},metadata:d},M,B),dt(null,null,h,{kind:"field",name:"imageHeight",static:!1,private:!1,access:{has:e=>"imageHeight"in e,get:e=>e.imageHeight,set:(e,t)=>{e.imageHeight=t}},metadata:d},U,J),dt(null,null,u,{kind:"field",name:"title",static:!1,private:!1,access:{has:e=>"title"in e,get:e=>e.title,set:(e,t)=>{e.title=t}},metadata:d},z,R),dt(null,null,p,{kind:"field",name:"uploadFileText",static:!1,private:!1,access:{has:e=>"uploadFileText"in e,get:e=>e.uploadFileText,set:(e,t)=>{e.uploadFileText=t}},metadata:d},V,W),dt(null,null,m,{kind:"field",name:"uploadFileDnd",static:!1,private:!1,access:{has:e=>"uploadFileDnd"in e,get:e=>e.uploadFileDnd,set:(e,t)=>{e.uploadFileDnd=t}},metadata:d},q,H),dt(null,null,g,{kind:"field",name:"uploadFileDescription",static:!1,private:!1,access:{has:e=>"uploadFileDescription"in e,get:e=>e.uploadFileDescription,set:(e,t)=>{e.uploadFileDescription=t}},metadata:d},X,G),dt(null,null,f,{kind:"field",name:"error",static:!1,private:!1,access:{has:e=>"error"in e,get:e=>e.error,set:(e,t)=>{e.error=t}},metadata:d},$,_),dt(null,e={value:t},v,{kind:"class",name:t.name,metadata:d},null,b),t=e.value,d&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d}),ht(t,b)})(),t;var Q,K,Y})();const pt="blocs",mt='<template>\n    <div>\n        <au-compose template.bind="view"></au-compose>\n    </div>\n</template>\n',gt=mt,ft=[],vt={};let bt;function yt(e){bt||(bt=w.b_N.define({name:pt,template:mt,dependencies:ft,bindables:vt})),e.register(bt)}var Et=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},wt=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Ot=(()=>{let e,t,i,n,a=[(0,w.MoW)(Object.assign(Object.assign({},h),{name:"blackcube-blocs"}))],s=[],l=[],o=[],r=[],c=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("Blocs"),t=(0,E.DB)(w.TIm),i=(0,E.DB)(j),n=(0,E.DB)(w.ND1)){this.logger=e,this.platform=t,this.httpService=i,this.element=n,this.url=wt(this,l,void 0),this.form=wt(this,o),this.view=wt(this,r,""),this.onDelegateClick=(wt(this,c),e=>{if(e.target){e.stopPropagation();let t=e.target.closest("button[type=button]");if(t&&this.element.contains(t)&&(e.preventDefault(),this.logger.debug("delegateClick"),t.name)){const e=new FormData(this.form);if(e.delete("blocTypeId"),"blocAdd"===t.name){const i=t.previousElementSibling;"SELECT"===i.tagName&&e.append("blocTypeId",i.value)}const i="post";e.append(t.name,t.value),this.httpService.fetch(this.url,{body:e,method:i}).then((e=>e.text())).then((e=>{this.view=e}))}}})}attached(){this.logger.debug("Attached"),this.logger.debug(this.url),this.form=this.element.closest("form"),this.element.addEventListener("click",this.onDelegateClick)}detaching(){this.logger.debug("Detached"),this.element.removeEventListener("click",this.onDelegateClick)}},d=t,"symbol"==typeof(u="Blocs")&&(u=u.description?"[".concat(u.description,"]"):""),Object.defineProperty(d,"name",{configurable:!0,value:p?"".concat(p," ",u):u}),(()=>{const d="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)()],n=[(0,w.ExJ)()],Et(null,null,i,{kind:"field",name:"url",static:!1,private:!1,access:{has:e=>"url"in e,get:e=>e.url,set:(e,t)=>{e.url=t}},metadata:d},l,o),Et(null,null,n,{kind:"field",name:"view",static:!1,private:!1,access:{has:e=>"view"in e,get:e=>e.view,set:(e,t)=>{e.view=t}},metadata:d},r,c),Et(null,e={value:t},a,{kind:"class",name:t.name,metadata:d},null,s),t=e.value,d&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d}),wt(t,s)})(),t;var d,u,p})();const Tt="composites",kt='<template>\n    <div>\n        <au-compose template.bind="view"></au-compose>\n    </div>\n</template>\n',Dt=kt,xt=[],Ct={};let St;function jt(e){St||(St=w.b_N.define({name:Tt,template:kt,dependencies:xt,bindables:Ct})),e.register(St)}var Lt=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Pt=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Nt=(()=>{let e,t,i,n,a=[(0,w.MoW)(Object.assign(Object.assign({},u),{name:"blackcube-composites"}))],s=[],l=[],o=[],r=[],c=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("Composites"),t=(0,E.DB)(w.TIm),i=(0,E.DB)(j),n=(0,E.DB)(w.ND1)){this.logger=e,this.platform=t,this.httpService=i,this.element=n,this.url=Pt(this,l,void 0),this.form=Pt(this,o),this.view=Pt(this,r,""),this.onDelegateClick=(Pt(this,c),e=>{if(e.target){e.stopPropagation();let t=e.target.closest("button[type=button]");if(t&&this.element.contains(t)&&(e.preventDefault(),this.logger.debug("delegateClick"),t.name)){const e=new FormData(this.form),i="post";e.append(t.name,t.value),this.httpService.fetch(this.url,{body:e,method:i}).then((e=>e.text())).then((e=>{this.view=e}))}}})}attached(){this.logger.debug("Attached"),this.logger.debug(this.url),this.form=this.element.closest("form"),this.element.addEventListener("click",this.onDelegateClick)}detaching(){this.logger.debug("Detached"),this.element.removeEventListener("click",this.onDelegateClick)}},d=t,"symbol"==typeof(h="Composites")&&(h=h.description?"[".concat(h.description,"]"):""),Object.defineProperty(d,"name",{configurable:!0,value:p?"".concat(p," ",h):h}),(()=>{const d="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)()],n=[(0,w.ExJ)()],Lt(null,null,i,{kind:"field",name:"url",static:!1,private:!1,access:{has:e=>"url"in e,get:e=>e.url,set:(e,t)=>{e.url=t}},metadata:d},l,o),Lt(null,null,n,{kind:"field",name:"view",static:!1,private:!1,access:{has:e=>"view"in e,get:e=>e.view,set:(e,t)=>{e.view=t}},metadata:d},r,c),Lt(null,e={value:t},a,{kind:"class",name:t.name,metadata:d},null,s),t=e.value,d&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d}),Pt(t,s)})(),t;var d,h,p})();const Ft="element-toolbar",At='<template>\n    <div class="page-header-buttons">\n        <button type="button" class="page-header-buttons-button" class.bind="slugActive ? \'active\':\'inactive\'" click.trigger="onClickSlug($event)">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>\n            <span class="ml-2">${slugTitle}</span>\n        </button>\n        <button if.bind="slugExists" type="button" class="page-header-buttons-button" class.bind="sitemapActive ? \'active\':\'inactive\'" click.trigger="onClickSitemap($event)">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg>\n            <span class="ml-2">${sitemapTitle}</span>\n        </button>\n        <span else type="button" class="page-header-buttons-button disabled">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg>\n            <span class="ml-2">${sitemapTitle}</span>\n        </span>\n        <button if.bind="slugExists" type="button" class="page-header-buttons-button" class.bind="seoActive ? \'active\':\'inactive\'" click.trigger="onClickSeo($event)">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>\n            <span class="ml-2">${seoTitle}</span>\n        </button>\n        <span else type="button" class="page-header-buttons-button disabled">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>\n            <span class="ml-2">${seoTitle}</span>\n        </span>\n        <button if.bind="showTags" type="button" class="page-header-buttons-button" click.trigger="onClickTags($event)">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg>\n            <span class="ml-2">${tagsTitle}</span>\n        </button>\n        <a if.bind="linkUrl.length>1" href.bind="realUrl" class="page-header-buttons-button link" target="_blank">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>\n            <span class="ml-2">${linkTitle}</span>\n        </a>\n    </div>\n</template>\n',It=At,Mt=[],Bt={};let Ut;function Jt(e){Ut||(Ut=w.b_N.define({name:Ft,template:At,dependencies:Mt,bindables:Bt})),e.register(Ut)}var zt;!function(e){e.CREATE="create",e.UPDATE="update",e.DELETE="delete",e.ACTIVATE="activate",e.DEACTIVATE="deactivate"}(zt||(zt={}));class Rt{}Rt.channel="general";var Vt=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Wt=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let qt=(()=>{let e,t,i,n,a,s,l,o,r,c,d,h,u,m,g,f,v,b,y=[(0,w.MoW)(Object.assign(Object.assign({},p),{name:"blackcube-element-toolbar"}))],O=[],T=[],k=[],D=[],x=[],C=[],S=[],L=[],P=[],N=[],F=[],A=[],I=[],M=[],B=[],U=[],J=[],z=[],R=[],V=[],W=[],q=[],H=[],X=[],G=[],$=[],_=[],Q=[],K=[],Y=[],Z=[],ee=[],te=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("ElementToolbar"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(w.TIm),n=(0,E.DB)(j),a=(0,E.DB)(w.ND1)){this.logger=e,this.ea=t,this.platform=i,this.httpService=n,this.element=a,this.slugTitle=Wt(this,T,"Slug"),this.slugUrl=(Wt(this,k),Wt(this,D,void 0)),this.slugActive=(Wt(this,x),Wt(this,C,!1)),this.slugExists=(Wt(this,S),Wt(this,L,!1)),this.sitemapTitle=(Wt(this,P),Wt(this,N,"Sitemap")),this.sitemapUrl=(Wt(this,F),Wt(this,A,void 0)),this.sitemapActive=(Wt(this,I),Wt(this,M,!1)),this.seoTitle=(Wt(this,B),Wt(this,U,"SEO")),this.seoUrl=(Wt(this,J),Wt(this,z,void 0)),this.seoActive=(Wt(this,R),Wt(this,V,!1)),this.showTags=(Wt(this,W),Wt(this,q,!0)),this.tagsTitle=(Wt(this,H),Wt(this,X,"Tags")),this.tagsUrl=(Wt(this,G),Wt(this,$,void 0)),this.host=(Wt(this,_),Wt(this,Q,"")),this.linkUrl=(Wt(this,K),Wt(this,Y,"")),this.linkTitle=(Wt(this,Z),Wt(this,ee,"View")),this.realUrl=(Wt(this,te),""),this.onEvent=e=>{var t,i,n;"slug"===(null===(t=e.data)||void 0===t?void 0:t.type)&&(e.type===zt.CREATE||e.type===zt.UPDATE?this.slugExists=!0:e.type===zt.DELETE&&(this.slugExists=!1,this.slugActive=!1,this.seoActive=!1,this.sitemapActive=!1),e.type===zt.ACTIVATE?this.slugActive=!0:e.type===zt.DEACTIVATE&&(this.slugActive=!1)),"seo"===(null===(i=e.data)||void 0===i?void 0:i.type)&&(e.type===zt.ACTIVATE?this.seoActive=!0:e.type===zt.DEACTIVATE&&(this.seoActive=!1)),"sitemap"===(null===(n=e.data)||void 0===n?void 0:n.type)&&(e.type===zt.ACTIVATE?this.sitemapActive=!0:e.type===zt.DEACTIVATE&&(this.sitemapActive=!1))}}attaching(){this.eventListener=this.ea.subscribe(Rt.channel,this.onEvent)}attached(){this.logger.debug("Attached"),this.host&&this.linkUrl?this.realUrl="//"+this.host+this.linkUrl:this.realUrl="//"+this.platform.document.location.host+this.linkUrl}detaching(){this.logger.debug("Detached")}dispose(){this.eventListener.dispose()}onClickSlug(e){e.preventDefault(),this.ea.publish(Me.channel,{type:Fe.OPEN,overlay:{url:this.slugUrl}})}onClickSitemap(e){e.preventDefault(),this.slugExists&&this.ea.publish(Me.channel,{type:Fe.OPEN,overlay:{url:this.sitemapUrl}})}onClickSeo(e){e.preventDefault(),this.slugExists&&this.ea.publish(Me.channel,{type:Fe.OPEN,overlay:{url:this.seoUrl}})}onClickTags(e){e.preventDefault(),this.ea.publish(Me.channel,{type:Fe.OPEN,overlay:{url:this.tagsUrl}})}},ie=t,"symbol"==typeof(ne="ElementToolbar")&&(ne=ne.description?"[".concat(ne.description,"]"):""),Object.defineProperty(ie,"name",{configurable:!0,value:ae?"".concat(ae," ",ne):ne}),(()=>{const p="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)()],n=[(0,w.ExJ)()],a=[(0,w.ExJ)()],s=[(0,w.ExJ)()],l=[(0,w.ExJ)()],o=[(0,w.ExJ)()],r=[(0,w.ExJ)()],c=[(0,w.ExJ)()],d=[(0,w.ExJ)()],h=[(0,w.ExJ)()],u=[(0,w.ExJ)()],m=[(0,w.ExJ)()],g=[(0,w.ExJ)()],f=[(0,w.ExJ)()],v=[(0,w.ExJ)()],b=[(0,w.ExJ)()],Vt(null,null,i,{kind:"field",name:"slugTitle",static:!1,private:!1,access:{has:e=>"slugTitle"in e,get:e=>e.slugTitle,set:(e,t)=>{e.slugTitle=t}},metadata:p},T,k),Vt(null,null,n,{kind:"field",name:"slugUrl",static:!1,private:!1,access:{has:e=>"slugUrl"in e,get:e=>e.slugUrl,set:(e,t)=>{e.slugUrl=t}},metadata:p},D,x),Vt(null,null,a,{kind:"field",name:"slugActive",static:!1,private:!1,access:{has:e=>"slugActive"in e,get:e=>e.slugActive,set:(e,t)=>{e.slugActive=t}},metadata:p},C,S),Vt(null,null,s,{kind:"field",name:"slugExists",static:!1,private:!1,access:{has:e=>"slugExists"in e,get:e=>e.slugExists,set:(e,t)=>{e.slugExists=t}},metadata:p},L,P),Vt(null,null,l,{kind:"field",name:"sitemapTitle",static:!1,private:!1,access:{has:e=>"sitemapTitle"in e,get:e=>e.sitemapTitle,set:(e,t)=>{e.sitemapTitle=t}},metadata:p},N,F),Vt(null,null,o,{kind:"field",name:"sitemapUrl",static:!1,private:!1,access:{has:e=>"sitemapUrl"in e,get:e=>e.sitemapUrl,set:(e,t)=>{e.sitemapUrl=t}},metadata:p},A,I),Vt(null,null,r,{kind:"field",name:"sitemapActive",static:!1,private:!1,access:{has:e=>"sitemapActive"in e,get:e=>e.sitemapActive,set:(e,t)=>{e.sitemapActive=t}},metadata:p},M,B),Vt(null,null,c,{kind:"field",name:"seoTitle",static:!1,private:!1,access:{has:e=>"seoTitle"in e,get:e=>e.seoTitle,set:(e,t)=>{e.seoTitle=t}},metadata:p},U,J),Vt(null,null,d,{kind:"field",name:"seoUrl",static:!1,private:!1,access:{has:e=>"seoUrl"in e,get:e=>e.seoUrl,set:(e,t)=>{e.seoUrl=t}},metadata:p},z,R),Vt(null,null,h,{kind:"field",name:"seoActive",static:!1,private:!1,access:{has:e=>"seoActive"in e,get:e=>e.seoActive,set:(e,t)=>{e.seoActive=t}},metadata:p},V,W),Vt(null,null,u,{kind:"field",name:"showTags",static:!1,private:!1,access:{has:e=>"showTags"in e,get:e=>e.showTags,set:(e,t)=>{e.showTags=t}},metadata:p},q,H),Vt(null,null,m,{kind:"field",name:"tagsTitle",static:!1,private:!1,access:{has:e=>"tagsTitle"in e,get:e=>e.tagsTitle,set:(e,t)=>{e.tagsTitle=t}},metadata:p},X,G),Vt(null,null,g,{kind:"field",name:"tagsUrl",static:!1,private:!1,access:{has:e=>"tagsUrl"in e,get:e=>e.tagsUrl,set:(e,t)=>{e.tagsUrl=t}},metadata:p},$,_),Vt(null,null,f,{kind:"field",name:"host",static:!1,private:!1,access:{has:e=>"host"in e,get:e=>e.host,set:(e,t)=>{e.host=t}},metadata:p},Q,K),Vt(null,null,v,{kind:"field",name:"linkUrl",static:!1,private:!1,access:{has:e=>"linkUrl"in e,get:e=>e.linkUrl,set:(e,t)=>{e.linkUrl=t}},metadata:p},Y,Z),Vt(null,null,b,{kind:"field",name:"linkTitle",static:!1,private:!1,access:{has:e=>"linkTitle"in e,get:e=>e.linkTitle,set:(e,t)=>{e.linkTitle=t}},metadata:p},ee,te),Vt(null,e={value:t},y,{kind:"class",name:t.name,metadata:p},null,O),t=e.value,p&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:p}),Wt(t,O)})(),t;var ie,ne,ae})();const Ht="permissions",Xt='<template>\n    <div>\n        <au-compose template.bind="view"></au-compose>\n    </div>\n</template>\n',Gt=Xt,$t=[],_t={};let Qt;function Kt(e){Qt||(Qt=w.b_N.define({name:Ht,template:Xt,dependencies:$t,bindables:_t})),e.register(Qt)}var Yt=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Zt=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let ei=(()=>{let e,t,i,n,a=[(0,w.MoW)(Object.assign(Object.assign({},m),{name:"blackcube-permissions"}))],s=[],l=[],o=[],r=[],c=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("Permissions"),t=(0,E.DB)(w.TIm),i=(0,E.DB)(j),n=(0,E.DB)(w.ND1)){this.logger=e,this.platform=t,this.httpService=i,this.element=n,this.url=Zt(this,l,void 0),this.form=Zt(this,o),this.view=Zt(this,r,""),this.csrf=Zt(this,c),this.onDelegateChange=e=>{if(e.target){let t=e.target.closest("input[type=checkbox]");if(t&&this.element.contains(t)){e.stopPropagation(),e.preventDefault(),this.logger.debug("delegateClick");const i=new FormData;i.append(this.csrf.name,this.csrf.value),t.dataset.rbacType&&i.append("type",t.dataset.rbacType),t.dataset.rbacName&&i.append("name",t.dataset.rbacName),i.append("mode",t.checked?"add":"remove");const n="post";this.httpService.fetch(this.url,{body:i,method:n}).then((e=>e.text())).then((e=>{this.view=e}))}}}}attached(){this.logger.debug("Attached"),this.logger.debug(this.url),this.form=this.element.closest("form");let e=this.form.querySelector("input[name=_csrf]");this.csrf={name:e.name,value:e.value},this.logger.debug(this.form),this.element.addEventListener("change",this.onDelegateChange);const t=new FormData;t.append(this.csrf.name,this.csrf.value),this.httpService.fetch(this.url,{body:t,method:"post"}).then((e=>e.text())).then((e=>{this.view=e}))}detaching(){this.logger.debug("Detached"),this.element.removeEventListener("change",this.onDelegateChange)}},d=t,"symbol"==typeof(h="Permissions")&&(h=h.description?"[".concat(h.description,"]"):""),Object.defineProperty(d,"name",{configurable:!0,value:u?"".concat(u," ",h):h}),(()=>{const d="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)()],n=[(0,w.ExJ)()],Yt(null,null,i,{kind:"field",name:"url",static:!1,private:!1,access:{has:e=>"url"in e,get:e=>e.url,set:(e,t)=>{e.url=t}},metadata:d},l,o),Yt(null,null,n,{kind:"field",name:"view",static:!1,private:!1,access:{has:e=>"view"in e,get:e=>e.view,set:(e,t)=>{e.view=t}},metadata:d},r,c),Yt(null,e={value:t},a,{kind:"class",name:t.name,metadata:d},null,s),t=e.value,d&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d}),Zt(t,s)})(),t;var d,h,u})();const ti="schema-editor",ii='<template>\n    <input type="hidden" ref="hiddenField"/>\n    <div ref="editorElement"></div>\n</template>\n',ni=ii,ai=[],si={};let li;function oi(e){li||(li=w.b_N.define({name:ti,template:ii,dependencies:ai,bindables:si})),e.register(li)}var ri=i(83),ci=i.n(ri),di=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},hi=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let ui=(()=>{let e,t,i,n,a,s,l=[(0,w.MoW)(Object.assign(Object.assign({},g),{name:"blackcube-schema-editor"}))],o=[],r=[],c=[],d=[],h=[],u=[],p=[],m=[],f=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("SchemaEditor"),t=(0,E.DB)(w.TIm),i=(0,E.DB)(w.ND1)){this.logger=e,this.platform=t,this.element=i,this.fieldId=hi(this,r,void 0),this.fieldName=(hi(this,c),hi(this,d,void 0)),this.schema=(hi(this,h),hi(this,u,void 0)),this.language=(hi(this,p),hi(this,m,void 0)),hi(this,f),this.logger=e,this.platform=t,this.element=i}attached(){this.logger.debug("Attached"),this.fieldId&&(this.hiddenField.id=this.fieldId),this.fieldName&&(this.hiddenField.name=this.fieldName),this.schema&&(this.hiddenField.value=this.schema),this.buildEditor()}buildEditor(){let e={mode:"tree",modes:["tree","text"],search:!1,navigationBar:!1,statusBar:!0,mainMenuBar:!0,enableSort:!1,enableTransform:!1,language:"en",templates:[{text:"text",title:"Insert Text property",className:"jsoneditor-type-object",field:"text",value:{type:"string",title:"Field title",description:"Field description",minLength:1,maxLength:255}},{text:"Wysiwyg",title:"Insert Wysiwyg property",className:"jsoneditor-type-object",field:"wysiwyg",value:{type:"string",format:"wysiwyg",options:{theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{list:"bullet"}],["link"]]},formats:["bold","italic","link","underline","list"]},title:"Field title",description:"Field description"}},{text:"Checkbox",title:"Insert Checkbox property",className:"jsoneditor-type-object",field:"checkbox",value:{type:"string",format:"checkbox",title:"Field title",description:"Field description"}},{text:"Dropdown",title:"Insert Dropdown property",className:"jsoneditor-type-object",field:"dropdown",value:{type:"string",multiple:!1,format:"dropdownlist",items:[{title:"Item 1",value:"item1"},{title:"Item 2",value:"item2"}],title:"Field title",description:"Field description"}},{text:"Image",title:"Insert Image property",className:"jsoneditor-type-object",field:"image",value:{type:"string",format:"file",fileType:"png,jpg",imageWidth:600,imageHeight:200,title:"Field title",description:"Field description"}},{text:"File",title:"Insert File property",className:"jsoneditor-type-object",field:"file",value:{type:"string",format:"file",fileType:"pdf",title:"Field title",description:"Field description"}},{text:"Email",title:"Insert Email property",className:"jsoneditor-type-object",field:"email",value:{type:"string",format:"email",minLength:1,maxLength:255,title:"Field title",description:"Field description"}},{text:"Textarea",title:"Insert Textarea property",className:"jsoneditor-type-object",field:"textarea",value:{type:"string",format:"textarea",title:"Field title",description:"Field description"}},{text:"Radios",title:"Insert Radios property",className:"jsoneditor-type-object",field:"radiolist",value:{type:"string",format:"radiolist",items:[{title:"Item 1",value:"item1"},{title:"Item 2",value:"item2"}],title:"Field title",description:"Field description"}},{text:"Regexp",title:"Insert Regexp property",className:"jsoneditor-type-object",field:"regexp",value:{type:"string",pattern:"^[a-z0-9]+$",minLength:1,maxLength:255,title:"Field title",description:"Field description"}},{text:"Images",title:"Insert Images property",className:"jsoneditor-type-object",field:"image",value:{type:"string",format:"files",fileType:"png,jpg",imageWidth:600,imageHeight:200,title:"Field title",description:"Field description"}},{text:"Files",title:"Insert Files property",className:"jsoneditor-type-object",field:"files",value:{type:"string",format:"files",fileType:"pdf",title:"Field title",description:"Field description"}}]};this.language&&(e.language=this.language),e.onChangeJSON=e=>{this.hiddenField.value=JSON.stringify(e,null,4)},e.onChangeText=e=>{this.hiddenField.value=e},this.jsonSchema=new(ci())(this.editorElement,e),this.jsonSchema.setText(this.schema),this.jsonSchema.expandAll()}},v=t,"symbol"==typeof(b="SchemaEditor")&&(b=b.description?"[".concat(b.description,"]"):""),Object.defineProperty(v,"name",{configurable:!0,value:y?"".concat(y," ",b):b}),(()=>{const g="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)()],n=[(0,w.ExJ)()],a=[(0,w.ExJ)()],s=[(0,w.ExJ)()],di(null,null,i,{kind:"field",name:"fieldId",static:!1,private:!1,access:{has:e=>"fieldId"in e,get:e=>e.fieldId,set:(e,t)=>{e.fieldId=t}},metadata:g},r,c),di(null,null,n,{kind:"field",name:"fieldName",static:!1,private:!1,access:{has:e=>"fieldName"in e,get:e=>e.fieldName,set:(e,t)=>{e.fieldName=t}},metadata:g},d,h),di(null,null,a,{kind:"field",name:"schema",static:!1,private:!1,access:{has:e=>"schema"in e,get:e=>e.schema,set:(e,t)=>{e.schema=t}},metadata:g},u,p),di(null,null,s,{kind:"field",name:"language",static:!1,private:!1,access:{has:e=>"language"in e,get:e=>e.language,set:(e,t)=>{e.language=t}},metadata:g},m,f),di(null,e={value:t},l,{kind:"class",name:t.name,metadata:g},null,o),t=e.value,g&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:g}),hi(t,o)})(),t;var v,b,y})();const pi="quill-editor",mi='<template>\n    <input type="hidden" ref="hiddenField">\n    <div ref="editorElement"></div>\n\n</template>\n',gi=mi,fi=[],vi={};let bi;function yi(e){bi||(bi=w.b_N.define({name:pi,template:mi,dependencies:fi,bindables:vi})),e.register(bi)}var Ei=i(831),wi=i.n(Ei),Oi=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Ti=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};const ki=wi().import("formats/link");wi().register(class extends ki{static create(e){let t=super.create(e);return e=this.sanitize(e),t.setAttribute("href",e),e.startsWith("https://")||e.startsWith("http://")||e.startsWith("://")||t.removeAttribute("target"),t}},!0);let Di=(()=>{let e,t,i,n,a,s,l=[(0,w.MoW)(Object.assign(Object.assign({},f),{name:"blackcube-quill-editor"}))],o=[],r=[],c=[],d=[],h=[],u=[],p=[],m=[],g=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("QuillEditor"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(j),n=(0,E.DB)(w.ND1)){this.logger=e,this.ea=t,this.httpService=i,this.element=n,this.fieldId=Ti(this,r,void 0),this.fieldName=(Ti(this,c),Ti(this,d,void 0)),this.content=(Ti(this,h),Ti(this,u,"")),this.options=(Ti(this,p),Ti(this,m,{theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{list:"bullet"}],["link"]]},formats:["bold","italic","link","underline","list"]})),this.editorElement=Ti(this,g),this.onTextChange=()=>{var e,t;this.hiddenField.value=null===(e=this.editorElement.querySelector(".ql-editor"))||void 0===e?void 0:e.innerHTML,this.logger.trace(null===(t=this.editorElement.querySelector(".ql-editor"))||void 0===t?void 0:t.innerHTML)},this.logger=e.scopeTo("QuillEditor")}attaching(){this.logger.trace("Attaching")}attached(){this.fieldId&&(this.hiddenField.id=this.fieldId),this.fieldName&&(this.hiddenField.name=this.fieldName),this.hiddenField.value=this.content,this.editorElement.innerHTML=this.content,this.options.theme="snow",this.quill=new(wi())(this.editorElement,this.options),this.quill.on("text-change",this.onTextChange),this.logger.trace("Attached")}detaching(){this.quill.off("text-change",this.onTextChange),this.logger.trace("Detaching")}},v=t,"symbol"==typeof(b="QuillEditor")&&(b=b.description?"[".concat(b.description,"]"):""),Object.defineProperty(v,"name",{configurable:!0,value:y?"".concat(y," ",b):b}),(()=>{const f="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)()],n=[(0,w.ExJ)()],a=[(0,w.ExJ)()],s=[(0,w.ExJ)()],Oi(null,null,i,{kind:"field",name:"fieldId",static:!1,private:!1,access:{has:e=>"fieldId"in e,get:e=>e.fieldId,set:(e,t)=>{e.fieldId=t}},metadata:f},r,c),Oi(null,null,n,{kind:"field",name:"fieldName",static:!1,private:!1,access:{has:e=>"fieldName"in e,get:e=>e.fieldName,set:(e,t)=>{e.fieldName=t}},metadata:f},d,h),Oi(null,null,a,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}},metadata:f},u,p),Oi(null,null,s,{kind:"field",name:"options",static:!1,private:!1,access:{has:e=>"options"in e,get:e=>e.options,set:(e,t)=>{e.options=t}},metadata:f},m,g),Oi(null,e={value:t},l,{kind:"class",name:t.name,metadata:f},null,o),t=e.value,f&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f}),Ti(t,o)})(),t;var v,b,y})();var xi=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Ci=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Si=(()=>{let e,t,i,n,a=[(0,w.OVJ)("blackcube-alert-delete")],s=[],l=[],o=[],r=[],c=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("AlertDelete"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(j),n=(0,E.DB)(w.ND1)){this.logger=e,this.ea=t,this.httpService=i,this.element=n,this.action=Ci(this,l,"Delete"),this.cancel=(Ci(this,o),Ci(this,r,"Cancel")),this.onDelegateEvent=(Ci(this,c),e=>{if(e.target){const t=e.target.closest("[data-alert-delete]");if(t instanceof HTMLAnchorElement){const i=t.dataset.alertDelete,n=t.dataset.alertDeleteMethod||"post",a=t.href;i&&i.length>1&&(e.preventDefault(),this.ea.publish(ke.channel,{type:we.OPEN,alert:{type:Ee.EXCLAMATION,contentUrl:i,actionTitle:this.action,cancelTitle:this.cancel,cancel:()=>{this.logger.trace("Should Close")},action:()=>{var e;const i=null===(e=t.closest("form"))||void 0===e?void 0:e.querySelector("input[name=_csrf]"),s=new FormData;i&&s.append(i.name,i.value),this.httpService.fetch(a,{method:n,body:s}).then((e=>{const t=e.headers.get("X-Redirect");t&&(window.location.href=t),this.logger.trace("daya",e.headers)}))}}}))}}})}attaching(){this.logger.trace("Attaching")}attached(){this.logger.trace("Attached"),this.element.addEventListener("click",this.onDelegateEvent)}detaching(){this.logger.trace("Detaching"),this.element.removeEventListener("click",this.onDelegateEvent)}},d=t,"symbol"==typeof(h="AlertDelete")&&(h=h.description?"[".concat(h.description,"]"):""),Object.defineProperty(d,"name",{configurable:!0,value:u?"".concat(u," ",h):h}),(()=>{const d="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)()],n=[(0,w.ExJ)()],xi(null,null,i,{kind:"field",name:"action",static:!1,private:!1,access:{has:e=>"action"in e,get:e=>e.action,set:(e,t)=>{e.action=t}},metadata:d},l,o),xi(null,null,n,{kind:"field",name:"cancel",static:!1,private:!1,access:{has:e=>"cancel"in e,get:e=>e.cancel,set:(e,t)=>{e.cancel=t}},metadata:d},r,c),xi(null,e={value:t},a,{kind:"class",name:t.name,metadata:d},null,s),t=e.value,d&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d}),Ci(t,s)})(),t;var d,h,u})();var ji=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Li=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Pi=(()=>{let e,t,i,n,a,s,l,o=[(0,w.OVJ)("blackcube-overlay-trigger")],r=[],c=[],d=[],h=[],u=[],p=[],m=[],g=[],f=[],v=[],b=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("OverlayTrigger"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(w.ND1)){this.logger=e,this.ea=t,this.element=i,this.title=Li(this,c,void 0),this.abstract=(Li(this,d),Li(this,h,void 0)),this.url=(Li(this,u),Li(this,p,void 0)),this.actionTitle=(Li(this,m),Li(this,g,void 0)),this.cancelTitle=(Li(this,f),Li(this,v,void 0)),this.onClick=(Li(this,b),e=>{this.logger.debug("onClickOverlay"),e.preventDefault(),this.ea.publish(Me.channel,{type:Fe.OPEN,overlay:{title:this.title,abstract:this.abstract,url:this.url,cancelTitle:this.cancelTitle,actionTitle:this.actionTitle}})})}attaching(){this.logger.trace("Attaching")}attached(){this.logger.trace("Attached"),this.element.addEventListener("click",this.onClick)}detaching(){this.logger.trace("Detaching"),this.element.removeEventListener("click",this.onClick)}},y=t,"symbol"==typeof(O="OverlayTrigger")&&(O=O.description?"[".concat(O.description,"]"):""),Object.defineProperty(y,"name",{configurable:!0,value:T?"".concat(T," ",O):O}),(()=>{const y="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)()],n=[(0,w.ExJ)()],a=[(0,w.ExJ)()],s=[(0,w.ExJ)()],l=[(0,w.ExJ)()],ji(null,null,i,{kind:"field",name:"title",static:!1,private:!1,access:{has:e=>"title"in e,get:e=>e.title,set:(e,t)=>{e.title=t}},metadata:y},c,d),ji(null,null,n,{kind:"field",name:"abstract",static:!1,private:!1,access:{has:e=>"abstract"in e,get:e=>e.abstract,set:(e,t)=>{e.abstract=t}},metadata:y},h,u),ji(null,null,a,{kind:"field",name:"url",static:!1,private:!1,access:{has:e=>"url"in e,get:e=>e.url,set:(e,t)=>{e.url=t}},metadata:y},p,m),ji(null,null,s,{kind:"field",name:"actionTitle",static:!1,private:!1,access:{has:e=>"actionTitle"in e,get:e=>e.actionTitle,set:(e,t)=>{e.actionTitle=t}},metadata:y},g,f),ji(null,null,l,{kind:"field",name:"cancelTitle",static:!1,private:!1,access:{has:e=>"cancelTitle"in e,get:e=>e.cancelTitle,set:(e,t)=>{e.cancelTitle=t}},metadata:y},v,b),ji(null,e={value:t},o,{kind:"class",name:t.name,metadata:y},null,r),t=e.value,y&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:y}),Li(t,r)})(),t;var y,O,T})();var Ni=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Fi=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Ai=(()=>{let e,t,i,n,a,s,l,o=[(0,w.OVJ)("blackcube-notification-trigger")],r=[],c=[],d=[],h=[],u=[],p=[],m=[],g=[],f=[],v=[],b=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("NotificationTrigger"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(w.TIm),n=(0,E.DB)(w.ND1)){this.logger=e,this.ea=t,this.platform=i,this.element=n,this.title=Fi(this,c,""),this.type=(Fi(this,d),Fi(this,h,se.CHECK)),this.content=(Fi(this,u),Fi(this,p,"")),this.duration=(Fi(this,m),Fi(this,g,5e3)),this.closeOverlay=(Fi(this,f),Fi(this,v,!1)),Fi(this,b),this.logger=e,this.ea=t,this.platform=i,this.element=n,this.logger.trace("constructor")}attaching(){this.logger.trace("Attaching")}attached(){this.logger.trace("Send Notification"),this.platform.taskQueue.queueTask((()=>{this.ea.publish(he.channel,{type:le.CREATE,notification:{title:this.title,type:this.type,content:this.content,duration:this.duration}}),this.closeOverlay&&this.ea.publish(Me.channel,{type:Fe.CLOSE})}))}},y=t,"symbol"==typeof(O="NotificationTrigger")&&(O=O.description?"[".concat(O.description,"]"):""),Object.defineProperty(y,"name",{configurable:!0,value:T?"".concat(T," ",O):O}),(()=>{const y="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)()],n=[(0,w.ExJ)()],a=[(0,w.ExJ)()],s=[(0,w.ExJ)()],l=[(0,w.ExJ)()],Ni(null,null,i,{kind:"field",name:"title",static:!1,private:!1,access:{has:e=>"title"in e,get:e=>e.title,set:(e,t)=>{e.title=t}},metadata:y},c,d),Ni(null,null,n,{kind:"field",name:"type",static:!1,private:!1,access:{has:e=>"type"in e,get:e=>e.type,set:(e,t)=>{e.type=t}},metadata:y},h,u),Ni(null,null,a,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}},metadata:y},p,m),Ni(null,null,s,{kind:"field",name:"duration",static:!1,private:!1,access:{has:e=>"duration"in e,get:e=>e.duration,set:(e,t)=>{e.duration=t}},metadata:y},g,f),Ni(null,null,l,{kind:"field",name:"closeOverlay",static:!1,private:!1,access:{has:e=>"closeOverlay"in e,get:e=>e.closeOverlay,set:(e,t)=>{e.closeOverlay=t}},metadata:y},v,b),Ni(null,e={value:t},o,{kind:"class",name:t.name,metadata:y},null,r),t=e.value,y&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:y}),Fi(t,r)})(),t;var y,O,T})();let Ii=(()=>{let e,t,i=[(0,w.OVJ)("blackcube-overlay-close")],n=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("OverlayClose"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(w.ND1)){this.logger=e,this.ea=t,this.element=i,this.logger=e.scopeTo("OverlayClose")}attached(){this.logger.trace("Attaching"),this.ea.publish(Me.channel,{type:Fe.CLOSE})}},a=t,"symbol"==typeof(s="OverlayClose")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n)})(),t;var a,s,l})();var Mi=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Bi=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Ui=(()=>{let e,t,i,n,a,s,l=[(0,w.OVJ)("blackcube-broadcast-element")],o=[],r=[],c=[],d=[],h=[],u=[],p=[],m=[],g=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("BroadcastElement"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(w.ND1)){this.logger=e,this.ea=t,this.element=i,this.event=Bi(this,r,void 0),this.events=(Bi(this,c),Bi(this,d,void 0)),this.type=(Bi(this,h),Bi(this,u,void 0)),this.id=(Bi(this,p),Bi(this,m,void 0)),Bi(this,g),this.logger=e,this.ea=t,this.element=i}attached(){this.logger.trace("Attaching"),this.event?this.ea.publish(Rt.channel,{type:this.event,data:{type:this.type,id:this.id}}):this.events&&this.events.forEach((e=>{this.ea.publish(Rt.channel,{type:e,data:{type:this.type,id:this.id}})}))}},f=t,"symbol"==typeof(v="BroadcastElement")&&(v=v.description?"[".concat(v.description,"]"):""),Object.defineProperty(f,"name",{configurable:!0,value:b?"".concat(b," ",v):v}),(()=>{const f="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)()],n=[(0,w.ExJ)()],a=[(0,w.ExJ)()],s=[(0,w.ExJ)()],Mi(null,null,i,{kind:"field",name:"event",static:!1,private:!1,access:{has:e=>"event"in e,get:e=>e.event,set:(e,t)=>{e.event=t}},metadata:f},r,c),Mi(null,null,n,{kind:"field",name:"events",static:!1,private:!1,access:{has:e=>"events"in e,get:e=>e.events,set:(e,t)=>{e.events=t}},metadata:f},d,h),Mi(null,null,a,{kind:"field",name:"type",static:!1,private:!1,access:{has:e=>"type"in e,get:e=>e.type,set:(e,t)=>{e.type=t}},metadata:f},u,p),Mi(null,null,s,{kind:"field",name:"id",static:!1,private:!1,access:{has:e=>"id"in e,get:e=>e.id,set:(e,t)=>{e.id=t}},metadata:f},m,g),Mi(null,e={value:t},l,{kind:"class",name:t.name,metadata:f},null,o),t=e.value,f&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f}),Bi(t,o)})(),t;var f,v,b})();let Ji=(()=>{let e,t,i=[(0,w.OVJ)("blackcube-toggle-dependencies")],n=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("ToggleDependencies"),t=(0,E.DB)(E.Rp),i=(0,E.DB)(w.ND1)){this.logger=e,this.ea=t,this.element=i,this.target="data-dependency",this.source="data-dependency-source",this.onChange=e=>{e.currentTarget.checked?this.activateFields():this.deactivateFields()}}attached(){this.toggleElement=this.element.querySelector("["+this.source+"]"),this.toggleElement&&(this.toggleTargets=this.element.querySelectorAll("["+this.target+"]"),this.toggleElement.checked?this.activateFields():this.deactivateFields(),this.toggleElement.addEventListener("change",this.onChange))}detaching(){this.toggleElement&&this.toggleElement.removeEventListener("change",this.onChange)}activateFields(){this.toggleTargets.forEach((e=>{e.classList.remove("opacity-50"),e.querySelectorAll("input, select").forEach((e=>{e.disabled=!1}))}))}deactivateFields(){this.toggleTargets.forEach((e=>{e.classList.add("opacity-50"),e.querySelectorAll("input, select").forEach((e=>{e.disabled=!0}))}))}},a=t,"symbol"==typeof(s="ToggleDependencies")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n)})(),t;var a,s,l})();var zi=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Ri=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Vi=(()=>{let e,t,i,n,a,s=[(0,w.OVJ)("blackcube-fold")],l=[],o=[],r=[],c=[],d=[],h=[],u=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("Fold"),t=(0,E.DB)(w.TIm),i=(0,E.DB)(j),n=(0,E.DB)(D),a=(0,E.DB)(w.ND1)){this.logger=e,this.platform=t,this.httpService=i,this.storageService=n,this.element=a,this.elementId=Ri(this,o,void 0),this.elementType=(Ri(this,r),Ri(this,c,void 0)),this.elementSubData=(Ri(this,d),Ri(this,h,void 0)),this.onDelegateEvent=(Ri(this,u),e=>{if(e.target){const t=e.target.closest("[data-fold]");t&&(t.dataset.fold,e.preventDefault(),e.stopPropagation(),this.toggle())}})}attaching(){this.logger.trace("Attaching")}attached(){var e,t,i,n,a,s;this.targetElement=this.element.querySelector("[data-target-fold]"),this.openElement=this.element.querySelector("[data-fold=down]"),this.closeElement=this.element.querySelector("[data-fold=up]"),this.element.addEventListener("click",this.onDelegateEvent),this.logger.trace("Attached"),this.storageService.getElementOpened(this.elementType,this.elementSubData,this.elementId)?(null===(e=this.openElement)||void 0===e||e.classList.remove("hidden"),null===(t=this.closeElement)||void 0===t||t.classList.add("hidden"),null===(i=this.targetElement)||void 0===i||i.classList.remove("hidden")):(null===(n=this.openElement)||void 0===n||n.classList.add("hidden"),null===(a=this.closeElement)||void 0===a||a.classList.remove("hidden"),null===(s=this.targetElement)||void 0===s||s.classList.add("hidden"))}detaching(){this.logger.trace("Detaching"),this.element.removeEventListener("click",this.onDelegateEvent)}toggle(){var e,t,i,n,a,s,l;(null===(e=this.targetElement)||void 0===e?void 0:e.classList.contains("hidden"))?(null===(t=this.openElement)||void 0===t||t.classList.remove("hidden"),null===(i=this.closeElement)||void 0===i||i.classList.add("hidden"),null===(n=this.targetElement)||void 0===n||n.classList.remove("hidden"),this.storageService.setElementOpened(this.elementType,this.elementSubData,this.elementId)):(null===(a=this.openElement)||void 0===a||a.classList.add("hidden"),null===(s=this.closeElement)||void 0===s||s.classList.remove("hidden"),null===(l=this.targetElement)||void 0===l||l.classList.add("hidden"),this.storageService.setElementClosed(this.elementType,this.elementSubData,this.elementId))}},p=t,"symbol"==typeof(m="Fold")&&(m=m.description?"[".concat(m.description,"]"):""),Object.defineProperty(p,"name",{configurable:!0,value:g?"".concat(g," ",m):m}),(()=>{const p="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)()],n=[(0,w.ExJ)()],a=[(0,w.ExJ)()],zi(null,null,i,{kind:"field",name:"elementId",static:!1,private:!1,access:{has:e=>"elementId"in e,get:e=>e.elementId,set:(e,t)=>{e.elementId=t}},metadata:p},o,r),zi(null,null,n,{kind:"field",name:"elementType",static:!1,private:!1,access:{has:e=>"elementType"in e,get:e=>e.elementType,set:(e,t)=>{e.elementType=t}},metadata:p},c,d),zi(null,null,a,{kind:"field",name:"elementSubData",static:!1,private:!1,access:{has:e=>"elementSubData"in e,get:e=>e.elementSubData,set:(e,t)=>{e.elementSubData=t}},metadata:p},h,u),zi(null,e={value:t},s,{kind:"class",name:t.name,metadata:p},null,l),t=e.value,p&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:p}),Ri(t,l)})(),t;var p,m,g})();var Wi=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},qi=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Hi=(()=>{let e,t,i,n=[(0,w.OVJ)("blackcube-url-generator")],a=[],s=[],l=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("UrlGenerator"),t=(0,E.DB)(w.TIm),i=(0,E.DB)(j),n=(0,E.DB)(w.ND1)){this.logger=e,this.platform=t,this.httpService=i,this.element=n,this.button=null,this.target=null,this.url=qi(this,s,null),this.onDelegateEvent=(qi(this,l),e=>{e.preventDefault(),this.logger.trace("onDelegateEvent",this.url),this.httpService.fetch(this.url).then((e=>e.ok&&200===e.status?e.json():Promise.reject(e))).then((e=>{this.logger.trace("onDelegateEvent",e),this.target.value=e.url})).catch((e=>{this.logger.warn("onDelegateEvent: error",e)}))})}attaching(){this.logger.trace("Attaching")}attached(){this.button=this.element.querySelector("[data-url-generator=button]"),this.target=this.element.querySelector("[data-url-generator=target]"),this.button&&this.target&&this.button.addEventListener("click",this.onDelegateEvent),this.logger.trace("Attached")}detaching(){this.logger.trace("Detaching"),this.button&&this.target&&this.button.removeEventListener("click",this.onDelegateEvent)}},o=t,"symbol"==typeof(r="UrlGenerator")&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(o,"name",{configurable:!0,value:c?"".concat(c," ",r):r}),(()=>{const o="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,w.ExJ)({primary:!0})],Wi(null,null,i,{kind:"field",name:"url",static:!1,private:!1,access:{has:e=>"url"in e,get:e=>e.url,set:(e,t)=>{e.url=t}},metadata:o},s,l),Wi(null,e={value:t},n,{kind:"class",name:t.name,metadata:o},null,a),t=e.value,o&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o}),qi(t,a)})(),t;var o,r,c})();let Xi=(()=>{let e,t,i=[(0,w.OVJ)("blackcube-view-edit")],n=[];return t=class{constructor(e=(0,E.DB)(E.Xo).scopeTo("ViewEdit"),t=(0,E.DB)(w.TIm),i=(0,E.DB)(w.ND1)){this.logger=e,this.platform=t,this.element=i,this.onToggleEvent=e=>{this.elements.forEach((e=>{e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden")}))}}attaching(){this.logger.trace("Attaching")}attached(){var e;this.elements=this.element.querySelectorAll("[data-view-edit]"),this.toggleButton=this.element.querySelector("[data-view-edit=toggle] button"),null===(e=this.toggleButton)||void 0===e||e.addEventListener("click",this.onToggleEvent)}detaching(){var e;this.logger.trace("Detaching"),null===(e=this.toggleButton)||void 0===e||e.removeEventListener("click",this.onToggleEvent)}},a=t,"symbol"==typeof(s="ViewEdit")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var m={};for(var g in n)m[g]="access"===g?{}:n[g];for(var g in n.access)m.access[g]=n.access[g];m.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],m);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n)})(),t;var a,s,l})();window.webpackBaseUrl&&(i.p=webpackBaseUrl);const Gi=document.querySelector("body");y.ZP.register(b).register(v).enhance({host:Gi,component:class{constructor(e=(0,E.DB)(E.Xo).scopeTo("Enhance")){this.logger=e}attaching(){this.logger.trace("Attaching")}}})}},e=>{e.O(0,[216],(()=>(337,e(e.s=337)))),e.O()}]);