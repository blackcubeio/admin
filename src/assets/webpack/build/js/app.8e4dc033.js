"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[143],{741:(e,t,n)=>{var i={};n.r(i),n.d(i,{default:()=>U,dependencies:()=>H,name:()=>I,register:()=>V,template:()=>J});var s={};n.r(s),n.d(s,{default:()=>K,dependencies:()=>Y,name:()=>z,register:()=>ee,template:()=>Q});var o={};n.r(o),n.d(o,{default:()=>ie,dependencies:()=>se,name:()=>te,register:()=>ae,template:()=>ne});var a={};n.r(a),n.d(a,{default:()=>Oe,dependencies:()=>Te,name:()=>ye,register:()=>Ce,template:()=>Ee});var l={};n.r(l),n.d(l,{default:()=>Ae,dependencies:()=>Fe,name:()=>Pe,register:()=>Je,template:()=>Me});var r={};n.r(r),n.d(r,{default:()=>_e,dependencies:()=>ze,name:()=>$e,register:()=>Ke,template:()=>Ge});var c={};n.r(c),n.d(c,{default:()=>nt,dependencies:()=>it,name:()=>et,register:()=>ot,template:()=>tt});var h={};n.r(h),n.d(h,{default:()=>ht,dependencies:()=>dt,name:()=>rt,register:()=>gt,template:()=>ct});var d={};n.r(d),n.d(d,{default:()=>Ct,dependencies:()=>Lt,name:()=>Tt,register:()=>xt,template:()=>wt});var p={};n.r(p),n.d(p,{default:()=>Mt,dependencies:()=>At,name:()=>Nt,register:()=>It,template:()=>Pt});var g={};n.r(g),n.d(g,{default:()=>qt,dependencies:()=>Xt,name:()=>Vt,register:()=>Gt,template:()=>Wt});var u={};n.r(u),n.d(u,{default:()=>nn,dependencies:()=>sn,name:()=>en,register:()=>an,template:()=>tn});var m={};n.r(m),n.d(m,{default:()=>gn,dependencies:()=>un,name:()=>dn,register:()=>fn,template:()=>pn});var f={};n.r(f),n.d(f,{default:()=>Ln,dependencies:()=>jn,name:()=>wn,register:()=>kn,template:()=>Cn});var v={};n.r(v),n.d(v,{Alert:()=>Ne,Blocs:()=>Rt,Burger:()=>Ze,Composites:()=>Bt,ElementToolbar:()=>Zt,File:()=>Ot,Notification:()=>me,NotificationCenter:()=>be,Overlay:()=>Xe,Permissions:()=>hn,Profile:()=>_,QuillEditor:()=>An,SchemaEditor:()=>Tn,Test:()=>lt});var b={};n.r(b),n.d(b,{Ajaxify:()=>F,AlertDelete:()=>Un,BcTestCustomAttribute:()=>C,BroadcastElement:()=>Zn,Fold:()=>oi,Menu:()=>D,NotificationTrigger:()=>Gn,OverlayClose:()=>zn,OverlayTrigger:()=>Wn,ToggleDependencies:()=>ti,UrlGenerator:()=>ci,ViewEdit:()=>di});var y=n(53),E=n(171),O=n(149),T=(n(144),function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),w=function(e,t){return function(n,i){t(n,i,e)}};let C=class{constructor(e,t,n){this.logger=e,this.ea=t,this.element=n,this.logger=e.scopeTo("BcTestCustomAttribute")}attaching(){this.logger.trace("Attaching")}};var L,j;C=T([(0,O.OVJ)("bc-test"),w(0,E.Xo),w(1,E.Rp),w(2,O.ND1),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,Object,HTMLElement])],C),function(e){e[e.OPEN=0]="OPEN",e[e.CLOSE=1]="CLOSE"}(L||(L={})),function(e){e[e.OPENING=0]="OPENING",e[e.OPENED=1]="OPENED",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(j||(j={}));class x{getElementOpened(e,t,n){return""!==n&&""!==t&&""!==e&&"1"===localStorage.getItem("admin:element:"+e+"-"+n+":"+t+":opened")}setElementOpened(e,t,n){""!==n&&""!==t&&""!==e&&localStorage.setItem("admin:element:"+e+"-"+n+":"+t+":opened","1")}setElementClosed(e,t,n){""!==n&&""!==t&&""!==e&&localStorage.removeItem("admin:element:"+e+"-"+n+":"+t+":opened")}getSectionOpened(e,t){return""!==t&&""!==e&&"1"===localStorage.getItem("admin:section:"+e+"-"+t+":opened")}setSectionOpened(e,t){""!==t&&""!==e&&localStorage.setItem("admin:section:"+e+"-"+t+":opened","1")}setSectionClosed(e,t){""!==t&&""!==e&&localStorage.removeItem("admin:section:"+e+"-"+t+":opened")}getElementSlugOpened(e){return""!==e&&"1"===localStorage.getItem("admin:element:"+e+":slug:opened")}setElementSlugOpened(e){""!==e&&localStorage.setItem("admin:element:"+e+":slug:opened","1")}setElementSlugClosed(e){""!==e&&localStorage.removeItem("admin:element:"+e+":slug:opened")}}var k,S=function(e,t){return function(n,i){t(n,i,e)}};let D=k=class{constructor(e,t,n,i,s){this.logger=e,this.ea=t,this.platform=n,this.storageService=i,this.element=s,this.onClickExpander=e=>{const t=e.currentTarget.closest(".navbar-item"),n=t.dataset.blackcubeSection;t.classList.contains("expanded")?(t.classList.remove("expanded"),n&&this.storageService.setSectionClosed("menu",n)):(t.classList.add("expanded"),n&&this.storageService.setSectionOpened("menu",n))},this.onMenuEvent=e=>{this.isMobile&&(e.type===L.OPEN?this.openWithTransition():e.type===L.CLOSE&&this.closeWithTransition())},this.onCloseMobileMenu=e=>{e.preventDefault(),this.ea.publish(k.channel,{type:L.CLOSE}),this.logger.trace("Close mobile menu")},this.logger=e.scopeTo("Menu")}attaching(){this.logger.trace("Attaching"),this.element.classList.contains("menu-mobile")?(this.isMobile=!0,this.element.style.display="none",this.menuMobileCloseBtn=this.element.querySelector("[data-ref=close]"),this.menuMobileClosePanel=this.element.querySelector("[data-ref=closepanel]"),this.menuMobileOffcanvas=this.element.querySelector("[data-ref=offcanvas]"),this.menuMobileOverlay=this.element.querySelector("[data-ref=overlay]"),this.menuMobileSubscriber=this.ea.subscribe(k.channel,this.onMenuEvent)):this.element.classList.contains("menu-desktop")&&(this.isMobile=!1,this.menuDesktop=this.element.querySelector(".menu-desktop")),this.expanders=this.element.querySelectorAll(".navbar-item-btn")}attached(){this.logger.trace("Attached"),this.isMobile&&this.menuMobileCloseBtn&&this.menuMobileCloseBtn.addEventListener("click",this.onCloseMobileMenu),this.element.querySelectorAll("[data-blackcube-section]").forEach((e=>{const t=e.dataset.blackcubeSection;t&&(this.storageService.getSectionOpened("menu",t)?e.classList.add("expanded"):e.classList.remove("expanded"))})),this.expanders.forEach(((e,t)=>{e.addEventListener("click",this.onClickExpander)}))}detaching(){this.logger.trace("Detached"),this.expanders.forEach(((e,t)=>{e.removeEventListener("click",this.onClickExpander)})),this.isMobile&&this.menuMobileCloseBtn.removeEventListener("click",this.onCloseMobileMenu)}openWithTransition(){return this.element.style.display="inherit",this.ea.publish(k.channel,{status:j.OPENING}),new Promise((e=>{setTimeout((()=>{e(!0)}))})).then((e=>{const t=[],n=new Promise((e=>{const t=n=>{this.menuMobileOverlay.classList.contains("opening")&&(this.menuMobileOverlay.classList.remove("opening","closed"),this.menuMobileOverlay.removeEventListener("transitionend",t),e(!0))};this.menuMobileOverlay.addEventListener("transitionend",t),this.menuMobileOverlay.classList.remove("closed"),this.menuMobileOverlay.classList.add("opening","opened")}));t.push(n);const i=new Promise((e=>{const t=n=>{this.menuMobileOffcanvas.classList.contains("opening")&&(this.menuMobileOffcanvas.classList.remove("opening","closed"),this.menuMobileOffcanvas.removeEventListener("transitionend",t),e(!0))};this.menuMobileOffcanvas.addEventListener("transitionend",t),this.menuMobileOffcanvas.classList.remove("closed"),this.menuMobileOffcanvas.classList.add("opening","opened")}));t.push(i);const s=new Promise((e=>{const t=n=>{this.menuMobileClosePanel.classList.contains("opening")&&(this.menuMobileClosePanel.classList.remove("opening","closed"),this.menuMobileClosePanel.removeEventListener("transitionend",t),e(!0))};this.menuMobileClosePanel.addEventListener("transitionend",t),this.menuMobileClosePanel.classList.remove("closed"),this.menuMobileClosePanel.classList.add("opening","opened")}));return t.push(s),Promise.all(t)})).then((e=>(this.ea.publish(k.channel,{status:j.OPENED}),e.reduce(((e,t)=>t&&e),!0))))}closeWithTransition(){return this.ea.publish(k.channel,{status:j.CLOSING}),new Promise((e=>{setTimeout((()=>{e(!0)}))})).then((e=>{const t=[],n=new Promise((e=>{const t=n=>{this.menuMobileOverlay.classList.contains("closing")&&(this.menuMobileOverlay.classList.remove("closing","opened"),this.menuMobileOverlay.removeEventListener("transitionend",t),e(!0))};this.menuMobileOverlay.addEventListener("transitionend",t),this.menuMobileOverlay.classList.remove("opened"),this.menuMobileOverlay.classList.add("closing","closed")}));t.push(n);const i=new Promise((e=>{const t=n=>{this.menuMobileOffcanvas.classList.contains("closing")&&(this.menuMobileOffcanvas.classList.remove("closing","opened"),this.menuMobileOffcanvas.removeEventListener("transitionend",t),e(!0))};this.menuMobileOffcanvas.addEventListener("transitionend",t),this.menuMobileOffcanvas.classList.remove("opened"),this.menuMobileOffcanvas.classList.add("closing","closed")}));t.push(i);const s=new Promise((e=>{const t=n=>{this.menuMobileClosePanel.classList.contains("closing")&&(this.menuMobileClosePanel.classList.remove("closing","opened"),this.menuMobileClosePanel.removeEventListener("transitionend",t),e(!0))};this.menuMobileClosePanel.addEventListener("transitionend",t),this.menuMobileClosePanel.classList.remove("opened"),this.menuMobileClosePanel.classList.add("closing","closed")}));return t.push(s),Promise.all(t)})).then((e=>(this.ea.publish(k.channel,{status:j.CLOSED}),this.element.style.display="none",e.reduce(((e,t)=>t&&e),!0))))}};D.channel="Menu",D=k=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([(0,O.OVJ)("blackcube-menu"),S(0,E.Xo),S(1,E.Rp),S(2,O.TIm),S(4,O.ND1),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,Object,Object,x,HTMLElement])],D);var R=n(997);let N=class{constructor(e){this.httpClient=e,this.httpClient.configure((e=>(e.withDefaults({headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"include"}),e)))}getHtmlContent(e){return this.httpClient.get(e,{headers:{Accept:"text/html"}}).then((e=>e.text()))}runFormRequest(e,t=null,n="post"){return this.httpClient.fetch(e,{method:n.toLocaleLowerCase(),body:t}).then((e=>e.text()))}fetch(e,t){return this.httpClient.fetch(e,t)}deleteRequest(e,t=""){return this.httpClient.fetch(e,{method:"delete",headers:{"X-CSRF-Token":t}})}};var P,M;N=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([(P=0,M=R.tL,function(e,t){M(e,t,P)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],N);var A=function(e,t){return function(n,i){t(n,i,e)}};let F=class{constructor(e,t,n,i){this.logger=e,this.platform=t,this.httpService=n,this.element=i,this.onDelegateEvent=e=>{if(e.target){const t=e.target.closest("[data-ajaxify-source]");if(t){const n=t.dataset.ajaxifySource;let i=t.dataset.ajaxifyUrl;!i&&(t instanceof HTMLLinkElement||t instanceof HTMLAnchorElement)&&(i=t.href);const s=this.element.querySelector('[data-ajaxify-target="'+n+'"]');n&&i&&s&&(e.preventDefault(),this.httpService.getHtmlContent(i).then((e=>{s.innerHTML=e,this.platform.taskQueue.queueTask((()=>{s.scrollIntoView({behavior:"smooth"})}))})))}}},this.logger=e.scopeTo("Ajaxify")}attaching(){this.logger.trace("Attaching")}attached(){this.element.addEventListener("click",this.onDelegateEvent),this.logger.trace("Attached")}detaching(){this.logger.trace("Detaching"),this.element.removeEventListener("click",this.onDelegateEvent)}};F=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([(0,O.OVJ)("blackcube-ajaxify"),A(0,E.Xo),A(1,O.TIm),A(3,O.ND1),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,Object,N,HTMLElement])],F);const I="profile",J='<template>\n    <div>\n        <button type="button" class="profile-btn" click.trigger="onToggle($event)" id="user-menu-button" aria-expanded="false" aria-haspopup="true">\n            <span class="sr-only">Open user menu</span>\n            <img if.bind="avatar" class="profile-img" src.bind="avatar" alt="">\n            <span else class="profile-initials">\n                <span class="profile-initials-letters">${initials}</span>\n            </span>\n        </button>\n    </div>\n    <div if.bind="items.length > 0" ref="menu" class="profile-menu closed"  role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" tabindex="-1">\n        <a repeat.for="item of items" click.trigger="onClickItem($event, $index)" href.bind="item.url" class="profile-menu-item" class.bind="item.active ? \'active\': \'\'" role="menuitem" tabindex="-1" innerHTML.bind="item.label"></a>\n    </div>\n</template>\n',U=J,H=[];let B;function V(e){B||(B=O.b_N.define({name:I,template:J,dependencies:H})),e.register(B)}var W;!function(e){e[e.OPENED=0]="OPENED",e[e.OPENING=1]="OPENING",e[e.CLOSED=2]="CLOSED",e[e.CLOSING=3]="CLOSING"}(W||(W={}));var q,X=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},$=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},G=function(e,t){return function(n,i){t(n,i,e)}};let _=q=class{constructor(e,t,n,i){this.logger=e,this.ea=t,this.platform=n,this.element=i,this.items=[],this.hasListener=!1,this.onTransitionMenuEnded=e=>{this.menu.classList.contains("closing")?(this.menu.classList.remove("closing","opened"),this.menu.style.display="none",this.ea.publish(q.channel,{status:W.CLOSED})):this.menu.classList.contains("opening")&&(this.menu.classList.remove("opening","closed"),this.ea.publish(q.channel,{status:W.OPENED}))},this.logger=e.scopeTo("Profile")}attaching(){this.logger.trace("Attaching")}attached(){this.logger.trace("Attached"),this.items.length>0&&(this.hasListener=!0,this.menu.style.display="none",this.menu.addEventListener("transitionend",this.onTransitionMenuEnded))}detaching(){this.logger.trace("Detaching"),!0===this.hasListener&&this.menu.removeEventListener("transitionend",this.onTransitionMenuEnded)}onToggle(e){this.items.length>0&&(this.menu.classList.contains("opened")?this.closeMenu(e):this.menu.classList.contains("closed")&&this.openMenu(e))}onClickItem(e,t){return this.closeMenu(e),!0}openMenu(e){this.ea.publish(q.channel,{status:W.OPENING}),this.menu.style.display="inherit",this.platform.setTimeout((()=>{this.menu.classList.remove("closed"),this.menu.classList.add("opening","opened")}),0)}closeMenu(e){this.ea.publish(q.channel,{status:W.CLOSING}),this.menu.classList.remove("opened"),this.menu.classList.add("closing","closed")}handleTransitionMenu(e,t){this.logger.debug("onChangeItems",e,t),e>0&&0===t?(this.platform.setTimeout((()=>{this.menu.addEventListener("transitionend",this.onTransitionMenuEnded)})),this.hasListener=!0):0===e&&t>0&&(this.menu.removeEventListener("transitionend",this.onTransitionMenuEnded),this.hasListener=!1)}};_.channel="Profile",X([(0,O.ExJ)({mode:2}),$("design:type",String)],_.prototype,"avatar",void 0),X([(0,O.ExJ)({mode:2}),$("design:type",String)],_.prototype,"initials",void 0),X([(0,O.ExJ)({mode:2}),$("design:type",Array)],_.prototype,"items",void 0),X([(0,O.YPB)((e=>e.items.length)),$("design:type",Function),$("design:paramtypes",[Object,Object]),$("design:returntype",void 0)],_.prototype,"handleTransitionMenu",null),_=q=X([(0,O.MoW)(Object.assign(Object.assign({},i),{name:"blackcube-profile"})),G(0,E.Xo),G(1,E.Rp),G(2,O.TIm),G(3,O.ND1),$("design:paramtypes",[Object,Object,Object,HTMLElement])],_);const z="notification-center",Q='<template>\n    <div aria-live="assertive" class="notification-center">\n        <blackcube-notification repeat.for="notification of notifications"\n                                class="notification"\n            type.bind="notification.type"\n        title.bind="notification.title"\n        content.bind="notification.content"\n        index.bind="$index"\n        duration.bind="notification.duration">\n        </blackcube-notification>\n    </div>\n</template>\n',K=Q,Y=[];let Z;function ee(e){Z||(Z=O.b_N.define({name:z,template:Q,dependencies:Y})),e.register(Z)}const te="notification",ne='<template>\n        \x3c!--\n          NotificationData panel, dynamically insert this into the live region when it needs to be displayed\n\n          Entering: "transform ease-out duration-300 transition"\n            From: "translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2"\n            To: "translate-y-0 opacity-100 sm:translate-x-0"\n          Leaving: "transition ease-in duration-100"\n            From: "opacity-100"\n            To: "opacity-0"\n        --\x3e\n        <div ref="wrapper" class="notification-wrapper closed">\n            <div class="notification-icon">\n                \x3c!-- Heroicon name: outline/check-circle --\x3e\n                <svg if.bind="type === notificationTypes.CHECK" class="notification-icon-img check" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />\n                </svg>\n                \x3c!-- Heroicon name: outline/exclamation --\x3e\n                <svg if.bind="type === notificationTypes.EXCLAMATION" class="notification-icon-img exclamation" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />\n                </svg>\n                \x3c!-- Heroicon name: outline/information --\x3e\n                <svg if.bind="type === notificationTypes.INFORMATION" class="notification-icon-img" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />\n                </svg>\n            </div>\n            <div class="notification-panel">\n                <p class="notification-title">\n                    ${title}\n                </p>\n                <p class="notification-content">\n                    ${content}\n                </p>\n            </div>\n            <div class="notification-btn-wrapper">\n                <button  click.trigger="onClose($event)" class="notification-btn">\n                    <span class="sr-only">Close</span>\n                    \x3c!-- Heroicon name: solid/x --\x3e\n                    <svg class="notification-close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">\n                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />\n                    </svg>\n                </button>\n            </div>\n        </div>\n</template>\n',ie=ne,se=[];let oe;function ae(e){oe||(oe=O.b_N.define({name:te,template:ne,dependencies:se})),e.register(oe)}var le,re,ce;function he(e,t){return new Promise((t=>{e.startingCallback&&e.startingCallback(),e.beforeDisplayStyle&&(e.element.style.display=e.beforeDisplayStyle),setTimeout((()=>{t(!0)}),10)})).then((e=>{const n=[Promise.resolve(!0)];return t.forEach((e=>{const t=new Promise((t=>{const n=i=>{e.element.removeEventListener("transitionend",n),e.transition.forEach((t=>{e.element.classList.remove(t)})),t(!0)};e.element.addEventListener("transitionend",n),e.from.forEach((t=>{e.element.classList.remove(t)})),e.to.forEach((t=>{e.element.classList.add(t)})),e.transition.forEach((t=>{e.element.classList.add(t)}))}));n.push(t)})),Promise.all(n)})).then((e=>{const t=e.reduce(((e,t)=>e&&t),!0);return new Promise((e=>{setTimeout((()=>{e(t)}))}))})).then((e=>{const n=[];return n.push(Promise.resolve(e)),t.forEach((e=>{e.transition.forEach((t=>{n.push(new Promise((n=>{e.element.classList.remove(t),n(!0)})))}))})),Promise.all(n)})).then((t=>(e.afterDisplayStyle&&(e.element.style.display=e.afterDisplayStyle),e.endingCallback&&e.endingCallback(),new Promise((e=>{setTimeout((()=>{e(!0)}),10)})))))}!function(e){e[e.OPENING=0]="OPENING",e[e.OPENED=1]="OPENED",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED",e[e.REMOVED=4]="REMOVED"}(le||(le={})),function(e){e.CHECK="check",e.EXCLAMATION="exclamation",e.INFORMATION="information"}(re||(re={})),function(e){e[e.CREATE=0]="CREATE",e[e.REMOVE_ALL=1]="REMOVE_ALL"}(ce||(ce={}));var de,pe=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ge=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ue=function(e,t){return function(n,i){t(n,i,e)}};let me=de=class{constructor(e,t,n,i){this.logger=e,this.ea=t,this.platform=n,this.element=i,this.notificationTypes=re,this.type=re.INFORMATION,this.title="",this.content="",this.logger=e.scopeTo("Notification")}attaching(){this.logger.trace("Attaching",this.duration),this.duration||(this.duration=5e3)}attached(){this.logger.trace("Attached"),this.openWithTransition(),this.closeTimer=this.platform.setTimeout((()=>{this.logger.trace("Auto close"),this.closeWithTransition()}),this.duration)}detaching(){return this.logger.trace("Detaching"),this.wrapper.classList.contains("opened")?this.closeWithTransition().then((e=>Promise.resolve())):Promise.resolve()}onClose(e){e.preventDefault(),this.closeWithTransition()}closeWithTransition(){return this.closeTimer&&this.platform.clearTimeout(this.closeTimer),he({element:this.wrapper,afterDisplayStyle:"none",startingCallback:()=>{this.ea.publish(de.channel,{status:le.CLOSING,index:this.index})},endingCallback:()=>{this.ea.publish(de.channel,{status:le.CLOSED,index:this.index})}},[{element:this.wrapper,from:["opened"],to:["closed"],transition:["closing"]}])}openWithTransition(){return he({element:this.wrapper,beforeDisplayStyle:"inherit",startingCallback:()=>{this.ea.publish(de.channel,{status:le.OPENING,index:this.index})},endingCallback:()=>{this.ea.publish(de.channel,{status:le.OPENED,index:this.index})}},[{element:this.wrapper,from:["closed"],to:["opened"],transition:["opening"]}])}};me.channel="Notification",pe([(0,O.ExJ)(),ge("design:type",String)],me.prototype,"type",void 0),pe([(0,O.ExJ)(),ge("design:type",String)],me.prototype,"title",void 0),pe([(0,O.ExJ)(),ge("design:type",String)],me.prototype,"content",void 0),pe([(0,O.ExJ)(),ge("design:type",Number)],me.prototype,"index",void 0),pe([(0,O.ExJ)(),ge("design:type",Number)],me.prototype,"duration",void 0),me=de=pe([(0,O.MoW)(Object.assign(Object.assign({},o),{name:"blackcube-notification"})),ue(0,E.Xo),ue(1,E.Rp),ue(2,O.TIm),ue(3,O.ND1),ge("design:paramtypes",[Object,Object,Object,HTMLElement])],me);var fe,ve=function(e,t){return function(n,i){t(n,i,e)}};let be=fe=class{constructor(e,t,n){this.logger=e,this.ea=t,this.element=n,this.notifications=[],this.onNotificationEvent=e=>{e.status===le.CLOSED&&(this.logger.debug("Notification event",e),this.removeNotification(e.index))},this.onNotificationCenterEvent=e=>{e.type===ce.CREATE&&e.notification?(this.logger.debug("Notification event",e),this.addNotification(e.notification)):e.type===ce.REMOVE_ALL&&(this.logger.debug("Should close children"),this.notifications.splice(0,this.notifications.length))},this.logger=e.scopeTo("NotificationCenter")}attaching(){this.logger.trace("Attaching"),this.subscriberNotification=this.ea.subscribe(me.channel,this.onNotificationEvent),this.subscriber=this.ea.subscribe(fe.channel,this.onNotificationCenterEvent)}attached(){this.logger.trace("Attached")}dispose(){this.subscriberNotification.dispose(),this.subscriber.dispose()}addNotification(e){this.notifications.push(e)}removeNotification(e){this.notifications.splice(e,1)}detaching(){this.logger.trace("Detaching")}};be.channel="NotificationCenter",be=fe=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([(0,O.MoW)(Object.assign(Object.assign({},s),{name:"blackcube-notification-center"})),ve(0,E.Xo),ve(1,E.Rp),ve(2,O.ND1),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,Object,HTMLElement])],be);const ye="alert",Ee='<template>\n    <div class="alert" aria-labelledby="modal-title" role="dialog" aria-modal="true">\n        <div class="alert-wrapper">\n            \x3c!--\n              Background overlay, show/hide based on modal state.\n\n              Entering: "ease-out duration-300"\n                From: "opacity-0"\n                To: "opacity-100"\n              Leaving: "ease-in duration-200"\n                From: "opacity-100"\n                To: "opacity-0"\n            --\x3e\n            <div ref="wrapper" click.trigger="onClickCancel($event)" class="alert-overlay closed" aria-hidden="true"></div>\n\n            \x3c!-- This element is to trick the browser into centering the modal contents. --\x3e\n            <span class="alert-fix" aria-hidden="true">&#8203;</span>\n\n            \x3c!--\n              Modal panel, show/hide based on modal state.\n\n              Entering: "ease-out duration-300"\n                From: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"\n                To: "opacity-100 translate-y-0 sm:scale-100"\n              Leaving: "ease-in duration-200"\n                From: "opacity-100 translate-y-0 sm:scale-100"\n                To: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"\n            --\x3e\n            <div ref="panel" class="alert-panel closed">\n                <div class="alert-panel-content">\n                    <div class="alert-icon" class.bind="type === alertTypes.CHECK ? \'check\' : (type === alertTypes.EXCLAMATION ? \'exclamation\': \'question\')">\n                        \x3c!-- Heroicon name: outline/check --\x3e\n                        <svg if.bind="type === alertTypes.CHECK" class="alert-icon-img" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />\n                        </svg>\n                        \x3c!-- Heroicon name: outline/exclamation --\x3e\n                        <svg if.bind="type === alertTypes.EXCLAMATION" class="alert-icon-img" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />\n                        </svg>\n                        \x3c!-- Heroicon name: outline/information --\x3e\n                        <svg if.bind="type === alertTypes.QUESTION" class="alert-icon-img" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />\n                        </svg>\n                    </div>\n                    <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">\n                        <au-compose template.bind="htmlData"></au-compose>\n                    </div>\n                </div>\n                <div class="alert-panel-actions">\n                    <button click.trigger="onClickAction($event)" type="button" class="alert-btn" class.bind="type === alertTypes.CHECK ? \'check\' : (type === alertTypes.EXCLAMATION ? \'exclamation\': \'question\')">\n                        ${actionTitle}\n                    </button>\n                    <button click.trigger="onClickCancel($event)" type="button" class="alert-btn">\n                        ${cancelTitle}\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n',Oe=Ee,Te=[];let we;function Ce(e){we||(we=O.b_N.define({name:ye,template:Ee,dependencies:Te})),e.register(we)}var Le,je,xe;!function(e){e[e.OPENING=0]="OPENING",e[e.OPENED=1]="OPENED",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED",e[e.REMOVED=4]="REMOVED"}(Le||(Le={})),function(e){e.CHECK="check",e.EXCLAMATION="exclamation",e.QUESTION="question"}(je||(je={})),function(e){e[e.OPEN=0]="OPEN",e[e.CLOSE=1]="CLOSE"}(xe||(xe={}));var ke,Se=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},De=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Re=function(e,t){return function(n,i){t(n,i,e)}};let Ne=ke=class{constructor(e,t,n,i){this.logger=e,this.ea=t,this.httpService=n,this.element=i,this.alertTypes=je,this.type=je.QUESTION,this.cancelTitle="Cancel",this.actionTitle="Action",this.stackedAlerts=[],this.alertShown=!1,this.onAlertEvent=e=>{e.type===xe.OPEN&&e.alert?(this.type=e.alert.type,e.alert.actionTitle&&(this.actionTitle=e.alert.actionTitle),e.alert.cancelTitle&&(this.cancelTitle=e.alert.cancelTitle),this.contentUrl=e.alert.contentUrl,this.action=e.alert.action,this.cancel=e.alert.cancel,this.httpService.getHtmlContent(this.contentUrl).then((e=>(this.htmlData=e,!0))).then((e=>{this.logger.warn("Opening alert"),this.openWithTransition()}))):e.type===xe.CLOSE&&this.closeWithTransition()},this.logger=e.scopeTo("Alert")}attaching(){this.logger.trace("Attaching"),this.element.style.display="none",this.subscription=this.ea.subscribe(ke.channel,this.onAlertEvent)}attached(){this.logger.trace("Attached")}detaching(){this.logger.trace("Detaching")}openWithTransition(){return he({element:this.element,beforeDisplayStyle:"inherit",startingCallback:()=>{this.logger.warn("opening"),this.ea.publish(ke.channel,{status:Le.OPENING})},endingCallback:()=>{this.logger.warn("opened"),this.ea.publish(ke.channel,{status:Le.OPENED}),this.alertShown=!0}},[{element:this.wrapper,from:["closed"],to:["opened"],transition:["opening"]},{element:this.panel,from:["closed"],to:["opened"],transition:["opening"]}])}closeWithTransition(){return he({element:this.element,afterDisplayStyle:"none",startingCallback:()=>{this.ea.publish(ke.channel,{status:Le.CLOSING})},endingCallback:()=>{this.ea.publish(ke.channel,{status:Le.CLOSED}),this.alertShown=!0}},[{element:this.wrapper,from:["opened"],to:["closed"],transition:["closing"]},{element:this.panel,from:["opened"],to:["closed"],transition:["closing"]}])}onClickAction(e){e.preventDefault(),this.logger.debug("Click action"),this.action&&this.action(),this.closeWithTransition()}onClickCancel(e){e.preventDefault(),this.logger.debug("Click cancel"),this.cancel&&this.cancel(),this.closeWithTransition()}};Ne.channel="Alert",Se([(0,O.ExJ)(),De("design:type",String)],Ne.prototype,"type",void 0),Ne=ke=Se([(0,O.MoW)(Object.assign(Object.assign({},a),{name:"blackcube-alert"})),Re(0,E.Xo),Re(1,E.Rp),Re(3,O.ND1),De("design:paramtypes",[Object,Object,N,HTMLElement])],Ne);const Pe="overlay",Me='<template>\n    <div class="overlay-wrapper">\n        \x3c!--\n          Background overlay, show/hide based on slide-over state.\n\n          Entering: "ease-in-out duration-500"\n            From: "opacity-0"\n            To: "opacity-100"\n          Leaving: "ease-in-out duration-500"\n            From: "opacity-100"\n            To: "opacity-0"\n        --\x3e\n        <div ref="overlay" click.trigger="onClickClose($event)" class="overlay-overlay closed" aria-hidden="true"></div>\n\n        <div class="overlay-content">\n            \x3c!--\n              Slide-over panel, show/hide based on slide-over state.\n\n              Entering: "transform transition ease-in-out duration-500 sm:duration-700"\n                From: "translate-x-full"\n                To: "translate-x-0"\n              Leaving: "transform transition ease-in-out duration-500 sm:duration-700"\n                From: "translate-x-0"\n                To: "translate-x-full"\n            --\x3e\n            <div ref="panel" class="overlay-panel closed">\n                <div class="overlay-panel-wrapper">\x3c!-- innerHTML.bind="htmlData" --\x3e\n                    \x3c!-- Replace with your content --\x3e\n                    <au-compose template.bind="htmlData"></au-compose>\n\n                    \x3c!-- /End replace --\x3e\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n',Ae=Me,Fe=[];let Ie;function Je(e){Ie||(Ie=O.b_N.define({name:Pe,template:Me,dependencies:Fe})),e.register(Ie)}var Ue,He;!function(e){e[e.OPENING=0]="OPENING",e[e.OPENED=1]="OPENED",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED",e[e.REMOVED=4]="REMOVED"}(Ue||(Ue={})),function(e){e[e.OPEN=0]="OPEN",e[e.CLOSE=1]="CLOSE"}(He||(He={}));var Be,Ve=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},We=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},qe=function(e,t){return function(n,i){t(n,i,e)}};let Xe=Be=class{constructor(e,t,n,i,s,o){this.logger=e,this.ea=t,this.platform=n,this.aurelia=i,this.httpService=s,this.element=o,this.title="",this.abstract="",this.cancelTitle="",this.actionTitle="",this.isOpen=!1,this.onOverlayEvent=e=>{e.type===He.OPEN?this.closeWithTransition().then((t=>{var n,i,s,o;return this.title=e.overlay.title,this.abstract=e.overlay.abstract,this.cancel=null===(n=e.overlay)||void 0===n?void 0:n.cancel,this.action=null===(i=e.overlay)||void 0===i?void 0:i.action,this.cancelTitle=(null===(s=e.overlay)||void 0===s?void 0:s.cancelTitle)||"Cancel",this.actionTitle=(null===(o=e.overlay)||void 0===o?void 0:o.actionTitle)||"Action",this.httpService.getHtmlContent(e.overlay.url)})).then((e=>(this.htmlData=e,new Promise((e=>{this.platform.setTimeout((()=>{e(!0)}),40)}))))).then((e=>this.openWithTransition())):e.type===He.CLOSE&&this.closeWithTransition()},this.onDelegatedEvent=e=>{var t,n,i;const s=null===(t=e.target)||void 0===t?void 0:t.closest("[data-overlay-action]"),o=e;if("click"===e.type&&s&&this.panel.contains(s)){if(s.dataset.overlayAction&&"close"===s.dataset.overlayAction&&(e.stopPropagation(),e.preventDefault(),this.onClickClose(e),this.logger.warn("delegated "+e.type+" done",e.target,e.type)),s.dataset.overlayAction&&"submit"===s.dataset.overlayAction){e.stopPropagation(),e.preventDefault();const t=null===(n=e.target)||void 0===n?void 0:n.closest("form");if(t){const e=new FormData(t);s instanceof HTMLButtonElement&&s.hasAttribute("name")&&s.hasAttribute("value")&&e.append(s.name,s.value),this.httpService.fetch(t.action,{method:t.method,body:e}).then((e=>{const t=e.headers.get("X-Redirect");if(t)throw window.location.href=t,new Error("Should redirect");return e.text()})).then((e=>{this.htmlData=e}))}}}else if("submit"===e.type){const t=null===(i=e.target)||void 0===i?void 0:i.closest("form");if(o.preventDefault(),t){const e=new FormData(t),n=o.submitter;n.hasAttribute("name")&&n.hasAttribute("value")&&e.append(n.name,n.value),this.httpService.runFormRequest(t.action,e,t.method).then((e=>{this.htmlData=e})),this.logger.warn("delegated "+o.type+" done")}}},this.onClickClose=e=>{this.cancel&&this.cancel(),this.closeWithTransition()},this.logger=e.scopeTo("Overlay")}attaching(){this.logger.trace("Attaching"),this.subscriber=this.ea.subscribe(Be.channel,this.onOverlayEvent)}attached(){this.element.style.display="none",this.logger.trace("Attached"),this.panel.addEventListener("submit",this.onDelegatedEvent),this.panel.addEventListener("click",this.onDelegatedEvent)}detaching(){this.logger.trace("Detaching"),this.panel.removeEventListener("click",this.onDelegatedEvent),this.panel.removeEventListener("submit",this.onDelegatedEvent)}dispose(){this.subscriber.dispose()}openWithTransition(){return!1===this.isOpen?(this.isOpen=!0,he({element:this.element,beforeDisplayStyle:"inherit",startingCallback:()=>{this.ea.publish(Be.channel,{status:Ue.OPENING})},endingCallback:()=>{this.ea.publish(Be.channel,{status:Ue.OPENED})}},[{element:this.overlay,from:["closed"],to:["opened"],transition:["opening"]},{element:this.panel,from:["closed"],to:["opened"],transition:["opening"]}])):Promise.resolve(!0)}closeWithTransition(){return!0===this.isOpen?(this.isOpen=!1,he({element:this.element,afterDisplayStyle:"none",startingCallback:()=>{this.ea.publish(Be.channel,{status:Ue.CLOSING})},endingCallback:()=>{this.htmlData="",this.ea.publish(Be.channel,{status:Ue.CLOSED})}},[{element:this.overlay,from:["opened"],to:["closed"],transition:["closing"]},{element:this.panel,from:["opened"],to:["closed"],transition:["closing"]}])):Promise.resolve(!0)}};Xe.channel="Overlay",Ve([(0,O.ExJ)(),We("design:type",String)],Xe.prototype,"title",void 0),Ve([(0,O.ExJ)(),We("design:type",String)],Xe.prototype,"abstract",void 0),Ve([(0,O.ExJ)(),We("design:type",String)],Xe.prototype,"cancelTitle",void 0),Ve([(0,O.ExJ)(),We("design:type",String)],Xe.prototype,"actionTitle",void 0),Xe=Be=Ve([(0,O.MoW)(Object.assign(Object.assign({},l),{name:"blackcube-overlay"})),qe(0,E.Xo),qe(1,E.Rp),qe(2,O.TIm),qe(3,O.Pus),qe(5,O.ND1),We("design:paramtypes",[Object,Object,Object,Object,N,HTMLElement])],Xe);const $e="burger",Ge='<template>\n    <button ref="openMenuBtn" class="px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 md:hidden">\n        <span class="sr-only">Open sidebar</span>\n        \x3c!-- Heroicon name: outline/menu-alt-2 --\x3e\n        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" />\n        </svg>\n    </button>\n</template>\n',_e=Ge,ze=[];let Qe;function Ke(e){Qe||(Qe=O.b_N.define({name:$e,template:Ge,dependencies:ze})),e.register(Qe)}var Ye=function(e,t){return function(n,i){t(n,i,e)}};let Ze=class{constructor(e,t,n){this.logger=e,this.ea=t,this.element=n,this.onClick=e=>{e.preventDefault(),this.ea.publish(D.channel,{type:L.OPEN})},this.logger=e.scopeTo("Burger")}attaching(){this.logger.trace("Attaching"),this.openMenuBtn.addEventListener("click",this.onClick)}attached(){this.logger.trace("Attached")}detaching(){this.logger.trace("Detaching"),this.openMenuBtn.removeEventListener("click",this.onClick)}};Ze=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([(0,O.MoW)(Object.assign(Object.assign({},r),{name:"blackcube-burger"})),(0,O.r7y)(),Ye(0,E.Xo),Ye(1,E.Rp),Ye(2,O.ND1),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,Object,HTMLElement])],Ze);const et="test",tt='<template>\n\n    Test component with button\n\n    <button click.trigger="onClick($event)">Click me</button>\n</template>',nt=tt,it=[];let st;function ot(e){st||(st=O.b_N.define({name:et,template:tt,dependencies:it})),e.register(st)}var at=function(e,t){return function(n,i){t(n,i,e)}};let lt=class{constructor(e,t){this.logger=e,this.ea=t,this.logger=e.scopeTo("Profile")}attaching(){this.logger.trace("Attaching")}attached(){this.logger.trace("Attached")}bound(){this.logger.trace("Bound")}detaching(){this.logger.trace("Detaching")}onClick(e){e.preventDefault(),this.logger.warn("Click"),this.ea.publish(Ne.channel,{type:xe.OPEN,alert:{type:je.QUESTION,title:"Titre Alerte",content:"Contenu Alerte",action:()=>{this.logger.warn("Closing with action")},cancel:()=>{this.logger.warn("Closing with cancel")}}})}};lt=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([(0,O.MoW)(Object.assign(Object.assign({},c),{name:"blackcube-test"})),at(0,E.Xo),at(1,E.Rp),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,Object])],lt);const rt="file",ct='\n    <div class="element-form-bloc-upload-wrapper">\n        <label class="element-form-bloc-label" if.bind="title">\n            ${title}\n        </label>\n        <div class="element-form-bloc-upload-input-wrapper">\n            <div class="element-form-bloc-upload-drop" class.bind="error?\'error\':\'\'" ref="drop">\n                <div class="element-form-bloc-upload-drop-wrapper">\n                    <svg class="element-form-bloc-upload-icon" ref="icon" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">\n                        <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n                    </svg>\n                    <div class="element-form-bloc-upload-drop-input-wrapper" ref="browse">\n                        <label class="element-form-bloc-upload-drop-input-label">\n                            <span>${uploadFileText}</span>\n                        </label>\n                        <p class="element-form-bloc-upload-drop-input-accessory">${uploadFileDnd}</p>\n                    </div>\n                    <p class="element-form-bloc-abstract">\n                        ${fileInfo}\n                    </p>\n                </div>\n            </div>\n        </div>\n        <p class="element-form-bloc-abstract">${uploadFileDescription}</p>\n        <ul class="w-full">\n            <li class="inline-block text-gray-600 text-center p-2 relative" repeat.for="handledFile of handledFiles">\n                <button click.trigger="onRemove(handledFile, $event)" class="absolute top-0 right-0 rounded-full p-1 text-center bg-white border-gray-600 border h-6 w-6 flex items-center justify-center text-xs hover:border-red-700 hover:text-red-700">\n                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">\n                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />\n                    </svg>\n                </button>\n                <a target="_blank" href.bind="handledFile.previewUrl + \'&original=1\'" class="cursor-pointer">\n                <img class="object-contain h-24" src.bind="handledFile.previewUrl" title.bind="handledFile.shortname">\n                </a>\n            </li>\n        </ul>\n    </div>\n',ht=ct,dt=[];let pt;function gt(e){pt||(pt=O.b_N.define({name:rt,template:ct,dependencies:dt})),e.register(pt)}var ut=n(904),mt=n.n(ut),ft=n(938),vt=n.n(ft),bt=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},yt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Et=function(e,t){return function(n,i){t(n,i,e)}};let Ot=class{constructor(e,t,n,i){this.logger=e,this.httpService=t,this.platform=n,this.element=i,this.uploadCount=0,this.fileType="",this.multiple=!1,this.value="",this.error=!1,this.onDragEnter=e=>{e.preventDefault();let t=e.currentTarget,n=e.dataTransfer;n&&n.types.indexOf("Files")>=0?(e.stopPropagation(),n.dropEffect="copy",n.effectAllowed="copy",t.classList.add("border-green-700")):n&&(n.dropEffect="none",n.effectAllowed="none")},this.onDragLeave=e=>{e.currentTarget.classList.remove("border-green-700")},this.onFileAdded=(e,t)=>{this.logger.debug("onFileAdded",e,t),this.error=!1,this.resumable.upload()},this.onFileSuccess=(e,t)=>{const n=JSON.parse(t);!1===this.multiple?this.setFile("@blackcubetmp/"+n.finalFilename,e):this.appendFile("@blackcubetmp/"+n.finalFilename,e),this.logger.debug("onFileSuccess",e,t)},this.onFileProgress=(e,t)=>{this.logger.debug("onFileProgress",e,t)},this.onFilesAdded=(e,t)=>{this.logger.debug("onFilesAdded",e,t)},this.onFileRetry=e=>{this.logger.debug("onFileRetry",e)},this.onFileError=(e,t)=>{this.logger.debug("onFileError",e,t)},this.onUploadStart=()=>{this.logger.debug("onUploadStart"),this.handleUploadIcon(1)},this.onComplete=()=>{this.logger.debug("onComplete"),this.handleUploadIcon(-1)},this.onProgress=()=>{this.logger.debug("onProgress")},this.onError=(e,t)=>{this.logger.debug("onError",t,e)},this.onPause=()=>{this.logger.debug("onPause")},this.onBeforeCancel=()=>{this.logger.debug("onBeforeCancel")},this.onCancel=()=>{this.logger.debug("onCancel"),this.handleUploadIcon(-1)},this.onChunkingStart=e=>{this.logger.debug("onChunkingStart",e)},this.onChunkingProgress=(e,t)=>{this.logger.debug("onChunkingProgressd",e,t)},this.onChunkingComplete=e=>{this.logger.debug("onChunkingComplete",e)},this.logger=e.scopeTo("File")}appendParametersUrl(e){let t=new(vt())(e);return this.imageWidth&&t.addSearch({width:this.imageWidth}),this.imageHeight&&t.addSearch({height:this.imageHeight}),t.toString()}generatePreviewUrl(e){let t=this.previewUrl.replace("__name__",e);return this.appendParametersUrl(t)}generateDeleteUrl(e){return this.deleteUrl.replace("__name__",e)}setFiles(e){let t=e.split(/\s*,\s*/);this.handledFiles=t.filter(((e,t)=>""!==e.trim())).map(((e,t)=>({name:e,shortname:e.split(/.*[\/|\\]/).pop(),previewUrl:this.generatePreviewUrl(e),deleteUrl:this.generateDeleteUrl(e)}))),this.hiddenField.value=this.getFilesValue()}setFile(e,t=null){this.handledFiles.forEach(((e,t)=>{e.file&&null!==e.file&&this.resumable.removeFile(e.file),this.httpService.deleteRequest(e.deleteUrl,this.csfr.value)})),this.handledFiles=[{name:e,shortname:e.split(/.*[\/|\\]/).pop(),previewUrl:this.generatePreviewUrl(e),deleteUrl:this.generateDeleteUrl(e),file:t}],this.hiddenField.value=this.getFilesValue()}appendFile(e,t=null){this.handledFiles.push({name:e,shortname:e.split(/.*[\/|\\]/).pop(),previewUrl:this.generatePreviewUrl(e),deleteUrl:this.generateDeleteUrl(e),file:t}),this.hiddenField.value=this.getFilesValue()}getFilesValue(){let e=this.handledFiles.map(((e,t)=>e.name)).join(", ");return"string"==typeof e?e:""}onRemove(e,t){t.stopPropagation(),t.preventDefault(),this.logger.debug("Should remove file",e);let n=null;this.handledFiles.forEach(((t,i)=>{e.name===t.name&&(n=i)})),null!==n&&n>=0&&(e.file&&null!==e.file&&this.resumable.removeFile(e.file),this.handledFiles.splice(n,1),this.httpService.deleteRequest(e.deleteUrl,this.csfr.value));let i=this.getFilesValue();this.hiddenField.value=i}attached(){this.setUp()}setUp(){this.parentForm=this.element.closest("form"),this.logger.debug("Multiple",this.multiple);let e={target:this.uploadUrl,chunkSize:524288},t=this.fileType.split(/\s*,\s*/).filter(((e,t)=>""!==e.trim()));if(this.fileInfo=t.map((e=>e.toLocaleUpperCase())).join(", "),e.fileType=t,this.parentForm){let t=this.parentForm.querySelector("input[name=_csrf]");this.csfr={name:t.name,value:t.value},e.query={},e.query[this.csfr.name]=this.csfr.value,this.logger.debug("CSRF : ",t.value)}this.hiddenField=document.createElement("input"),this.hiddenField.type="hidden",this.hiddenField.name=this.name,this.element.appendChild(this.hiddenField),this.setFiles(this.value),this.resumable=new(mt())(e),this.resumable.support&&(this.resumable.assignBrowse(this.browse,!1),this.resumable.assignDrop(this.drop),this.drop.addEventListener("dragover",this.onDragEnter),this.drop.addEventListener("dragenter",this.onDragEnter),this.drop.addEventListener("dragleave",this.onDragLeave),this.drop.addEventListener("drop",this.onDragLeave),this.resumable.on("fileAdded",this.onFileAdded),this.resumable.on("fileSuccess",this.onFileSuccess),this.resumable.on("fileProgress",this.onFileProgress),this.resumable.on("filesAdded",this.onFilesAdded),this.resumable.on("fileRetry",this.onFileRetry),this.resumable.on("fileError",this.onFileError),this.resumable.on("uploadStart",this.onUploadStart),this.resumable.on("complete",this.onComplete),this.resumable.on("progress",this.onProgress),this.resumable.on("error",this.onError),this.resumable.on("pause",this.onPause),this.resumable.on("beforeCancel",this.onBeforeCancel),this.resumable.on("cancel",this.onCancel),this.resumable.on("chunkingStart",this.onChunkingStart),this.resumable.on("chunkingProgress",this.onChunkingProgress),this.resumable.on("chunkingComplete",this.onChunkingComplete)),this.logger.debug("Attached")}handleUploadIcon(e){this.uploadCount=this.uploadCount+e,this.uploadCount>0?this.icon.classList.add("animate-ping"):this.icon.classList.remove("animate-ping")}get getFiles(){return this.resumable.support?this.resumable.files.map(((e,t)=>e.fileName)):[]}detaching(){this.resumable.support&&(this.drop.removeEventListener("dragover",this.onDragEnter),this.drop.removeEventListener("dragenter",this.onDragEnter),this.drop.removeEventListener("dragleave",this.onDragLeave),this.drop.removeEventListener("drop",this.onDragLeave))}};bt([(0,O.ExJ)(),yt("design:type",String)],Ot.prototype,"uploadUrl",void 0),bt([(0,O.ExJ)(),yt("design:type",String)],Ot.prototype,"previewUrl",void 0),bt([(0,O.ExJ)(),yt("design:type",String)],Ot.prototype,"deleteUrl",void 0),bt([(0,O.ExJ)(),yt("design:type",String)],Ot.prototype,"fileType",void 0),bt([(0,O.ExJ)(),yt("design:type",String)],Ot.prototype,"name",void 0),bt([(0,O.ExJ)(),yt("design:type",Object)],Ot.prototype,"multiple",void 0),bt([(0,O.ExJ)(),yt("design:type",String)],Ot.prototype,"value",void 0),bt([(0,O.ExJ)(),yt("design:type",String)],Ot.prototype,"imageWidth",void 0),bt([(0,O.ExJ)(),yt("design:type",String)],Ot.prototype,"imageHeight",void 0),bt([(0,O.ExJ)(),yt("design:type",String)],Ot.prototype,"title",void 0),bt([(0,O.ExJ)(),yt("design:type",String)],Ot.prototype,"uploadFileText",void 0),bt([(0,O.ExJ)(),yt("design:type",String)],Ot.prototype,"uploadFileDnd",void 0),bt([(0,O.ExJ)(),yt("design:type",String)],Ot.prototype,"uploadFileDescription",void 0),bt([(0,O.ExJ)(),yt("design:type",Boolean)],Ot.prototype,"error",void 0),Ot=bt([(0,O.MoW)(Object.assign(Object.assign({},h),{name:"blackcube-file-upload"})),Et(0,E.Xo),Et(2,O.TIm),Et(3,O.ND1),yt("design:paramtypes",[Object,N,Object,Element])],Ot);const Tt="blocs",wt='<template>\n    <div>\n        <au-compose template.bind="view"></au-compose>\n    </div>\n</template>\n',Ct=wt,Lt=[];let jt;function xt(e){jt||(jt=O.b_N.define({name:Tt,template:wt,dependencies:Lt})),e.register(jt)}var kt=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},St=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Dt=function(e,t){return function(n,i){t(n,i,e)}};let Rt=class{constructor(e,t,n,i){this.logger=e,this.platform=t,this.httpService=n,this.element=i,this.view="",this.onDelegateClick=e=>{if(e.target){e.stopPropagation();let t=e.target.closest("button[type=button]");if(t&&this.element.contains(t)&&(e.preventDefault(),this.logger.debug("delegateClick"),t.name)){const e=new FormData(this.form);if(e.delete("blocTypeId"),"blocAdd"===t.name){const n=t.previousElementSibling;"SELECT"===n.tagName&&e.append("blocTypeId",n.value)}const n="post";e.append(t.name,t.value),this.httpService.fetch(this.url,{body:e,method:n}).then((e=>e.text())).then((e=>{this.view=e}))}}},this.logger=e.scopeTo("Blocs")}attached(){this.logger.debug("Attached"),this.logger.debug(this.url),this.form=this.element.closest("form"),this.element.addEventListener("click",this.onDelegateClick)}detaching(){this.logger.debug("Detached"),this.element.removeEventListener("click",this.onDelegateClick)}};kt([(0,O.ExJ)(),St("design:type",String)],Rt.prototype,"url",void 0),kt([(0,O.ExJ)(),St("design:type",String)],Rt.prototype,"view",void 0),Rt=kt([(0,O.MoW)(Object.assign(Object.assign({},d),{name:"blackcube-blocs"})),Dt(0,E.Xo),Dt(1,O.TIm),Dt(3,O.ND1),St("design:paramtypes",[Object,Object,N,HTMLElement])],Rt);const Nt="composites",Pt='<template>\n    <div>\n        <au-compose template.bind="view"></au-compose>\n    </div>\n</template>\n',Mt=Pt,At=[];let Ft;function It(e){Ft||(Ft=O.b_N.define({name:Nt,template:Pt,dependencies:At})),e.register(Ft)}var Jt=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ut=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ht=function(e,t){return function(n,i){t(n,i,e)}};let Bt=class{constructor(e,t,n,i){this.logger=e,this.platform=t,this.httpService=n,this.element=i,this.view="",this.onDelegateClick=e=>{if(e.target){e.stopPropagation();let t=e.target.closest("button[type=button]");if(t&&this.element.contains(t)&&(e.preventDefault(),this.logger.debug("delegateClick"),t.name)){const e=new FormData(this.form),n="post";e.append(t.name,t.value),this.httpService.fetch(this.url,{body:e,method:n}).then((e=>e.text())).then((e=>{this.view=e}))}}},this.logger=e.scopeTo("Composites")}attached(){this.logger.debug("Attached"),this.logger.debug(this.url),this.form=this.element.closest("form"),this.element.addEventListener("click",this.onDelegateClick)}detaching(){this.logger.debug("Detached"),this.element.removeEventListener("click",this.onDelegateClick)}};Jt([(0,O.ExJ)(),Ut("design:type",String)],Bt.prototype,"url",void 0),Jt([(0,O.ExJ)(),Ut("design:type",String)],Bt.prototype,"view",void 0),Bt=Jt([(0,O.MoW)(Object.assign(Object.assign({},p),{name:"blackcube-composites"})),Ht(0,E.Xo),Ht(1,O.TIm),Ht(3,O.ND1),Ut("design:paramtypes",[Object,Object,N,HTMLElement])],Bt);const Vt="element-toolbar",Wt='<template>\n    <div class="page-header-buttons">\n        <button type="button" class="page-header-buttons-button" class.bind="slugActive ? \'active\':\'inactive\'" click.trigger="onClickSlug($event)">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>\n            <span class="ml-2">${slugTitle}</span>\n        </button>\n        <button if.bind="slugExists" type="button" class="page-header-buttons-button" class.bind="sitemapActive ? \'active\':\'inactive\'" click.trigger="onClickSitemap($event)">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg>\n            <span class="ml-2">${sitemapTitle}</span>\n        </button>\n        <span else type="button" class="page-header-buttons-button disabled">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg>\n            <span class="ml-2">${sitemapTitle}</span>\n        </span>\n        <button if.bind="slugExists" type="button" class="page-header-buttons-button" class.bind="seoActive ? \'active\':\'inactive\'" click.trigger="onClickSeo($event)">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>\n            <span class="ml-2">${seoTitle}</span>\n        </button>\n        <span else type="button" class="page-header-buttons-button disabled">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>\n            <span class="ml-2">${seoTitle}</span>\n        </span>\n        <button if.bind="showTags" type="button" class="page-header-buttons-button" click.trigger="onClickTags($event)">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg>\n            <span class="ml-2">${tagsTitle}</span>\n        </button>\n        <a if.bind="linkUrl.length>1" href.bind="realUrl" class="page-header-buttons-button link" target="_blank">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>\n            <span class="ml-2">${linkTitle}</span>\n        </a>\n    </div>\n</template>\n',qt=Wt,Xt=[];let $t;function Gt(e){$t||($t=O.b_N.define({name:Vt,template:Wt,dependencies:Xt})),e.register($t)}var _t;!function(e){e.CREATE="create",e.UPDATE="update",e.DELETE="delete",e.ACTIVATE="activate",e.DEACTIVATE="deactivate"}(_t||(_t={}));class zt{}zt.channel="general";var Qt=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Kt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Yt=function(e,t){return function(n,i){t(n,i,e)}};let Zt=class{constructor(e,t,n,i,s){this.logger=e,this.ea=t,this.platform=n,this.httpService=i,this.element=s,this.slugTitle="Slug",this.slugActive=!1,this.slugExists=!1,this.sitemapTitle="Sitemap",this.sitemapActive=!1,this.seoTitle="SEO",this.seoActive=!1,this.showTags=!0,this.tagsTitle="Tags",this.host="",this.linkUrl="",this.linkTitle="View",this.realUrl="",this.onEvent=e=>{var t,n,i;"slug"===(null===(t=e.data)||void 0===t?void 0:t.type)&&(e.type===_t.CREATE||e.type===_t.UPDATE?this.slugExists=!0:e.type===_t.DELETE&&(this.slugExists=!1,this.slugActive=!1,this.seoActive=!1,this.sitemapActive=!1),e.type===_t.ACTIVATE?this.slugActive=!0:e.type===_t.DEACTIVATE&&(this.slugActive=!1)),"seo"===(null===(n=e.data)||void 0===n?void 0:n.type)&&(e.type===_t.ACTIVATE?this.seoActive=!0:e.type===_t.DEACTIVATE&&(this.seoActive=!1)),"sitemap"===(null===(i=e.data)||void 0===i?void 0:i.type)&&(e.type===_t.ACTIVATE?this.sitemapActive=!0:e.type===_t.DEACTIVATE&&(this.sitemapActive=!1))},this.logger=e.scopeTo("ElementToolbar")}attaching(){this.eventListener=this.ea.subscribe(zt.channel,this.onEvent)}attached(){this.logger.debug("Attached"),this.host&&this.linkUrl?this.realUrl="//"+this.host+this.linkUrl:this.realUrl="//"+this.platform.document.location.host+this.linkUrl}detaching(){this.logger.debug("Detached")}dispose(){this.eventListener.dispose()}onClickSlug(e){e.preventDefault(),this.ea.publish(Xe.channel,{type:He.OPEN,overlay:{url:this.slugUrl}})}onClickSitemap(e){e.preventDefault(),this.slugExists&&this.ea.publish(Xe.channel,{type:He.OPEN,overlay:{url:this.sitemapUrl}})}onClickSeo(e){e.preventDefault(),this.slugExists&&this.ea.publish(Xe.channel,{type:He.OPEN,overlay:{url:this.seoUrl}})}onClickTags(e){e.preventDefault(),this.ea.publish(Xe.channel,{type:He.OPEN,overlay:{url:this.tagsUrl}})}};Qt([(0,O.ExJ)(),Kt("design:type",String)],Zt.prototype,"slugTitle",void 0),Qt([(0,O.ExJ)(),Kt("design:type",String)],Zt.prototype,"slugUrl",void 0),Qt([(0,O.ExJ)(),Kt("design:type",Boolean)],Zt.prototype,"slugActive",void 0),Qt([(0,O.ExJ)(),Kt("design:type",Boolean)],Zt.prototype,"slugExists",void 0),Qt([(0,O.ExJ)(),Kt("design:type",String)],Zt.prototype,"sitemapTitle",void 0),Qt([(0,O.ExJ)(),Kt("design:type",String)],Zt.prototype,"sitemapUrl",void 0),Qt([(0,O.ExJ)(),Kt("design:type",Boolean)],Zt.prototype,"sitemapActive",void 0),Qt([(0,O.ExJ)(),Kt("design:type",String)],Zt.prototype,"seoTitle",void 0),Qt([(0,O.ExJ)(),Kt("design:type",String)],Zt.prototype,"seoUrl",void 0),Qt([(0,O.ExJ)(),Kt("design:type",Boolean)],Zt.prototype,"seoActive",void 0),Qt([(0,O.ExJ)(),Kt("design:type",Boolean)],Zt.prototype,"showTags",void 0),Qt([(0,O.ExJ)(),Kt("design:type",String)],Zt.prototype,"tagsTitle",void 0),Qt([(0,O.ExJ)(),Kt("design:type",String)],Zt.prototype,"tagsUrl",void 0),Qt([(0,O.ExJ)(),Kt("design:type",String)],Zt.prototype,"host",void 0),Qt([(0,O.ExJ)(),Kt("design:type",String)],Zt.prototype,"linkUrl",void 0),Qt([(0,O.ExJ)(),Kt("design:type",String)],Zt.prototype,"linkTitle",void 0),Zt=Qt([(0,O.MoW)(Object.assign(Object.assign({},g),{name:"blackcube-element-toolbar"})),Yt(0,E.Xo),Yt(1,E.Rp),Yt(2,O.TIm),Yt(4,O.ND1),Kt("design:paramtypes",[Object,Object,Object,N,HTMLElement])],Zt);const en="permissions",tn='<template>\n    <div>\n        <au-compose template.bind="view"></au-compose>\n    </div>\n</template>\n',nn=tn,sn=[];let on;function an(e){on||(on=O.b_N.define({name:en,template:tn,dependencies:sn})),e.register(on)}var ln=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},rn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},cn=function(e,t){return function(n,i){t(n,i,e)}};let hn=class{constructor(e,t,n,i){this.logger=e,this.platform=t,this.httpService=n,this.element=i,this.view="",this.onDelegateChange=e=>{if(e.target){let t=e.target.closest("input[type=checkbox]");if(t&&this.element.contains(t)){e.stopPropagation(),e.preventDefault(),this.logger.debug("delegateClick");const n=new FormData;n.append(this.csrf.name,this.csrf.value),t.dataset.rbacType&&n.append("type",t.dataset.rbacType),t.dataset.rbacName&&n.append("name",t.dataset.rbacName),n.append("mode",t.checked?"add":"remove");const i="post";this.httpService.fetch(this.url,{body:n,method:i}).then((e=>e.text())).then((e=>{this.view=e}))}}},this.logger=e.scopeTo("Permissions")}attached(){this.logger.debug("Attached"),this.logger.debug(this.url),this.form=this.element.closest("form");let e=this.form.querySelector("input[name=_csrf]");this.csrf={name:e.name,value:e.value},this.logger.debug(this.form),this.element.addEventListener("change",this.onDelegateChange);const t=new FormData;t.append(this.csrf.name,this.csrf.value),this.httpService.fetch(this.url,{body:t,method:"post"}).then((e=>e.text())).then((e=>{this.view=e}))}detaching(){this.logger.debug("Detached"),this.element.removeEventListener("change",this.onDelegateChange)}};ln([(0,O.ExJ)(),rn("design:type",String)],hn.prototype,"url",void 0),ln([(0,O.ExJ)(),rn("design:type",String)],hn.prototype,"view",void 0),hn=ln([(0,O.MoW)(Object.assign(Object.assign({},u),{name:"blackcube-permissions"})),cn(0,E.Xo),cn(1,O.TIm),cn(3,O.ND1),rn("design:paramtypes",[Object,Object,N,HTMLElement])],hn);const dn="schema-editor",pn='<template>\n    <input type="hidden" ref="hiddenField"/>\n    <div ref="editorElement"></div>\n</template>\n',gn=pn,un=[];let mn;function fn(e){mn||(mn=O.b_N.define({name:dn,template:pn,dependencies:un})),e.register(mn)}var vn=n(83),bn=n.n(vn),yn=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},En=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},On=function(e,t){return function(n,i){t(n,i,e)}};let Tn=class{constructor(e,t,n){this.logger=e,this.platform=t,this.element=n,this.logger=e.scopeTo("SchemaEditor")}attached(){this.logger.debug("Attached"),this.fieldId&&(this.hiddenField.id=this.fieldId),this.fieldName&&(this.hiddenField.name=this.fieldName),this.schema&&(this.hiddenField.value=this.schema),this.buildEditor()}buildEditor(){let e={mode:"tree",modes:["tree","text"],search:!1,navigationBar:!1,statusBar:!0,mainMenuBar:!0,enableSort:!1,enableTransform:!1,language:"en",templates:[{text:"text",title:"Insert Text property",className:"jsoneditor-type-object",field:"text",value:{type:"string",title:"Field title",description:"Field description",minLength:1,maxLength:255}},{text:"Wysiwyg",title:"Insert Wysiwyg property",className:"jsoneditor-type-object",field:"wysiwyg",value:{type:"string",format:"wysiwyg",options:{theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{list:"bullet"}],["link"]]},formats:["bold","italic","link","underline","list"]},title:"Field title",description:"Field description"}},{text:"Checkbox",title:"Insert Checkbox property",className:"jsoneditor-type-object",field:"checkbox",value:{type:"string",format:"checkbox",title:"Field title",description:"Field description"}},{text:"Dropdown",title:"Insert Dropdown property",className:"jsoneditor-type-object",field:"dropdown",value:{type:"string",multiple:!1,format:"dropdownlist",items:[{title:"Item 1",value:"item1"},{title:"Item 2",value:"item2"}],title:"Field title",description:"Field description"}},{text:"Image",title:"Insert Image property",className:"jsoneditor-type-object",field:"image",value:{type:"string",format:"file",fileType:"png,jpg",imageWidth:600,imageHeight:200,title:"Field title",description:"Field description"}},{text:"File",title:"Insert File property",className:"jsoneditor-type-object",field:"file",value:{type:"string",format:"file",fileType:"pdf",title:"Field title",description:"Field description"}},{text:"Email",title:"Insert Email property",className:"jsoneditor-type-object",field:"email",value:{type:"string",format:"email",minLength:1,maxLength:255,title:"Field title",description:"Field description"}},{text:"Textarea",title:"Insert Textarea property",className:"jsoneditor-type-object",field:"textarea",value:{type:"string",format:"textarea",title:"Field title",description:"Field description"}},{text:"Radios",title:"Insert Radios property",className:"jsoneditor-type-object",field:"radiolist",value:{type:"string",format:"radiolist",items:[{title:"Item 1",value:"item1"},{title:"Item 2",value:"item2"}],title:"Field title",description:"Field description"}},{text:"Regexp",title:"Insert Regexp property",className:"jsoneditor-type-object",field:"regexp",value:{type:"string",pattern:"^[a-z0-9]+$",minLength:1,maxLength:255,title:"Field title",description:"Field description"}},{text:"Images",title:"Insert Images property",className:"jsoneditor-type-object",field:"image",value:{type:"string",format:"files",fileType:"png,jpg",imageWidth:600,imageHeight:200,title:"Field title",description:"Field description"}},{text:"Files",title:"Insert Files property",className:"jsoneditor-type-object",field:"files",value:{type:"string",format:"files",fileType:"pdf",title:"Field title",description:"Field description"}}]};this.language&&(e.language=this.language),e.onChangeJSON=e=>{this.hiddenField.value=JSON.stringify(e,null,4)},e.onChangeText=e=>{this.hiddenField.value=e},this.jsonSchema=new(bn())(this.editorElement,e),this.jsonSchema.setText(this.schema),this.jsonSchema.expandAll()}};yn([(0,O.ExJ)(),En("design:type",String)],Tn.prototype,"fieldId",void 0),yn([(0,O.ExJ)(),En("design:type",String)],Tn.prototype,"fieldName",void 0),yn([(0,O.ExJ)(),En("design:type",String)],Tn.prototype,"schema",void 0),yn([(0,O.ExJ)(),En("design:type",String)],Tn.prototype,"language",void 0),Tn=yn([(0,O.MoW)(Object.assign(Object.assign({},m),{name:"blackcube-schema-editor"})),On(0,E.Xo),On(1,O.TIm),On(2,O.ND1),En("design:paramtypes",[Object,Object,HTMLElement])],Tn);const wn="quill-editor",Cn='<template>\n    <input type="hidden" ref="hiddenField">\n    <div ref="editorElement"></div>\n\n</template>\n',Ln=Cn,jn=[];let xn;function kn(e){xn||(xn=O.b_N.define({name:wn,template:Cn,dependencies:jn})),e.register(xn)}var Sn=n(831),Dn=n.n(Sn),Rn=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Nn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Pn=function(e,t){return function(n,i){t(n,i,e)}};const Mn=Dn().import("formats/link");Dn().register(class extends Mn{static create(e){let t=super.create(e);return e=this.sanitize(e),t.setAttribute("href",e),e.startsWith("https://")||e.startsWith("http://")||e.startsWith("://")||t.removeAttribute("target"),t}},!0);let An=class{constructor(e,t,n,i){this.logger=e,this.ea=t,this.httpService=n,this.element=i,this.content="",this.options={theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{list:"bullet"}],["link"]]},formats:["bold","italic","link","underline","list"]},this.onTextChange=()=>{var e,t;this.hiddenField.value=null===(e=this.editorElement.querySelector(".ql-editor"))||void 0===e?void 0:e.innerHTML,this.logger.trace(null===(t=this.editorElement.querySelector(".ql-editor"))||void 0===t?void 0:t.innerHTML)},this.logger=e.scopeTo("QuillEditor")}attaching(){this.logger.trace("Attaching")}attached(){this.fieldId&&(this.hiddenField.id=this.fieldId),this.fieldName&&(this.hiddenField.name=this.fieldName),this.hiddenField.value=this.content,this.editorElement.innerHTML=this.content,this.options.theme="snow",this.quill=new(Dn())(this.editorElement,this.options),this.quill.on("text-change",this.onTextChange),this.logger.trace("Attached")}detaching(){this.quill.off("text-change",this.onTextChange),this.logger.trace("Detaching")}};Rn([(0,O.ExJ)(),Nn("design:type",String)],An.prototype,"fieldId",void 0),Rn([(0,O.ExJ)(),Nn("design:type",String)],An.prototype,"fieldName",void 0),Rn([(0,O.ExJ)(),Nn("design:type",String)],An.prototype,"content",void 0),Rn([(0,O.ExJ)(),Nn("design:type",Object)],An.prototype,"options",void 0),An=Rn([(0,O.MoW)(Object.assign(Object.assign({},f),{name:"blackcube-quill-editor"})),Pn(0,E.Xo),Pn(1,E.Rp),Pn(3,O.ND1),Nn("design:paramtypes",[Object,Object,N,HTMLElement])],An);var Fn=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},In=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Jn=function(e,t){return function(n,i){t(n,i,e)}};let Un=class{constructor(e,t,n,i){this.logger=e,this.ea=t,this.httpService=n,this.element=i,this.action="Delete",this.cancel="Cancel",this.onDelegateEvent=e=>{if(e.target){const t=e.target.closest("[data-alert-delete]");if(t instanceof HTMLAnchorElement){const n=t.dataset.alertDelete,i=t.dataset.alertDeleteMethod||"post",s=t.href;n&&n.length>1&&(e.preventDefault(),this.ea.publish(Ne.channel,{type:xe.OPEN,alert:{type:je.EXCLAMATION,contentUrl:n,actionTitle:this.action,cancelTitle:this.cancel,cancel:()=>{this.logger.trace("Should Close")},action:()=>{var e;const n=null===(e=t.closest("form"))||void 0===e?void 0:e.querySelector("input[name=_csrf]"),o=new FormData;n&&o.append(n.name,n.value),this.httpService.fetch(s,{method:i,body:o}).then((e=>{const t=e.headers.get("X-Redirect");t&&(window.location.href=t),this.logger.trace("daya",e.headers)}))}}}))}}},this.logger=e.scopeTo("ModalAlert")}attaching(){this.logger.trace("Attaching")}attached(){this.logger.trace("Attached"),this.element.addEventListener("click",this.onDelegateEvent)}detaching(){this.logger.trace("Detaching"),this.element.removeEventListener("click",this.onDelegateEvent)}};Fn([(0,O.ExJ)(),In("design:type",String)],Un.prototype,"action",void 0),Fn([(0,O.ExJ)(),In("design:type",String)],Un.prototype,"cancel",void 0),Un=Fn([(0,O.OVJ)("blackcube-alert-delete"),Jn(0,E.Xo),Jn(1,E.Rp),Jn(3,O.ND1),In("design:paramtypes",[Object,Object,N,HTMLElement])],Un);var Hn=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Bn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Vn=function(e,t){return function(n,i){t(n,i,e)}};let Wn=class{constructor(e,t,n){this.logger=e,this.ea=t,this.element=n,this.onClick=e=>{this.logger.debug("onClickOverlay"),e.preventDefault(),this.ea.publish(Xe.channel,{type:He.OPEN,overlay:{title:this.title,abstract:this.abstract,url:this.url,cancelTitle:this.cancelTitle,actionTitle:this.actionTitle}})},this.logger=e.scopeTo("OverlayTrigger")}attaching(){this.logger.trace("Attaching")}attached(){this.logger.trace("Attached"),this.element.addEventListener("click",this.onClick)}detaching(){this.logger.trace("Detaching"),this.element.removeEventListener("click",this.onClick)}};Hn([(0,O.ExJ)(),Bn("design:type",String)],Wn.prototype,"title",void 0),Hn([(0,O.ExJ)(),Bn("design:type",String)],Wn.prototype,"abstract",void 0),Hn([(0,O.ExJ)(),Bn("design:type",String)],Wn.prototype,"url",void 0),Hn([(0,O.ExJ)(),Bn("design:type",String)],Wn.prototype,"actionTitle",void 0),Hn([(0,O.ExJ)(),Bn("design:type",String)],Wn.prototype,"cancelTitle",void 0),Wn=Hn([(0,O.OVJ)("blackcube-overlay-trigger"),Vn(0,E.Xo),Vn(1,E.Rp),Vn(2,O.ND1),Bn("design:paramtypes",[Object,Object,HTMLElement])],Wn);var qn=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Xn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},$n=function(e,t){return function(n,i){t(n,i,e)}};let Gn=class{constructor(e,t,n,i){this.logger=e,this.ea=t,this.platform=n,this.element=i,this.title="",this.type=re.CHECK,this.content="",this.duration=5e3,this.closeOverlay=!1,this.logger=e.scopeTo("NotificationTrigger"),this.logger.trace("constructor")}attaching(){this.logger.trace("Attaching")}attached(){this.logger.trace("Send Notification"),this.platform.taskQueue.queueTask((()=>{this.ea.publish(be.channel,{type:ce.CREATE,notification:{title:this.title,type:this.type,content:this.content,duration:this.duration}}),this.closeOverlay&&this.ea.publish(Xe.channel,{type:He.CLOSE})}))}};qn([(0,O.ExJ)(),Xn("design:type",String)],Gn.prototype,"title",void 0),qn([(0,O.ExJ)(),Xn("design:type",String)],Gn.prototype,"type",void 0),qn([(0,O.ExJ)(),Xn("design:type",String)],Gn.prototype,"content",void 0),qn([(0,O.ExJ)(),Xn("design:type",Number)],Gn.prototype,"duration",void 0),qn([(0,O.ExJ)(),Xn("design:type",Boolean)],Gn.prototype,"closeOverlay",void 0),Gn=qn([(0,O.OVJ)("blackcube-notification-trigger"),$n(0,E.Xo),$n(1,E.Rp),$n(2,O.TIm),$n(3,O.ND1),Xn("design:paramtypes",[Object,Object,Object,HTMLElement])],Gn);var _n=function(e,t){return function(n,i){t(n,i,e)}};let zn=class{constructor(e,t,n){this.logger=e,this.ea=t,this.element=n,this.logger=e.scopeTo("OverlayClose")}attached(){this.logger.trace("Attaching"),this.ea.publish(Xe.channel,{type:He.CLOSE})}};zn=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([(0,O.OVJ)("blackcube-overlay-close"),_n(0,E.Xo),_n(1,E.Rp),_n(2,O.ND1),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,Object,HTMLElement])],zn);var Qn=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Kn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Yn=function(e,t){return function(n,i){t(n,i,e)}};let Zn=class{constructor(e,t,n){this.logger=e,this.ea=t,this.element=n,this.logger=e.scopeTo("BroadcastElement")}attached(){this.logger.trace("Attaching"),this.event?this.ea.publish(zt.channel,{type:this.event,data:{type:this.type,id:this.id}}):this.events&&this.events.forEach((e=>{this.ea.publish(zt.channel,{type:e,data:{type:this.type,id:this.id}})}))}};Qn([(0,O.ExJ)(),Kn("design:type",String)],Zn.prototype,"event",void 0),Qn([(0,O.ExJ)(),Kn("design:type",Array)],Zn.prototype,"events",void 0),Qn([(0,O.ExJ)(),Kn("design:type",String)],Zn.prototype,"type",void 0),Qn([(0,O.ExJ)(),Kn("design:type",Object)],Zn.prototype,"id",void 0),Zn=Qn([(0,O.OVJ)("blackcube-broadcast-element"),Yn(0,E.Xo),Yn(1,E.Rp),Yn(2,O.ND1),Kn("design:paramtypes",[Object,Object,HTMLElement])],Zn);var ei=function(e,t){return function(n,i){t(n,i,e)}};let ti=class{constructor(e,t,n){this.logger=e,this.ea=t,this.element=n,this.target="data-dependency",this.source="data-dependency-source",this.onChange=e=>{e.currentTarget.checked?this.activateFields():this.deactivateFields()},this.logger=e.scopeTo("ToggleDependencies")}attached(){this.toggleElement=this.element.querySelector("["+this.source+"]"),this.toggleElement&&(this.toggleTargets=this.element.querySelectorAll("["+this.target+"]"),this.toggleElement.checked?this.activateFields():this.deactivateFields(),this.toggleElement.addEventListener("change",this.onChange))}detaching(){this.toggleElement&&this.toggleElement.removeEventListener("change",this.onChange)}activateFields(){this.toggleTargets.forEach((e=>{e.classList.remove("opacity-50"),e.querySelectorAll("input, select").forEach((e=>{e.disabled=!1}))}))}deactivateFields(){this.toggleTargets.forEach((e=>{e.classList.add("opacity-50"),e.querySelectorAll("input, select").forEach((e=>{e.disabled=!0}))}))}};ti=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([(0,O.OVJ)("blackcube-toggle-dependencies"),ei(0,E.Xo),ei(1,E.Rp),ei(2,O.ND1),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,Object,HTMLElement])],ti);var ni=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ii=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},si=function(e,t){return function(n,i){t(n,i,e)}};let oi=class{constructor(e,t,n,i,s){this.logger=e,this.platform=t,this.httpService=n,this.storageService=i,this.element=s,this.onDelegateEvent=e=>{if(e.target){const t=e.target.closest("[data-fold]");t&&(t.dataset.fold,e.preventDefault(),e.stopPropagation(),this.toggle())}},this.logger=e.scopeTo("Fold")}attaching(){this.logger.trace("Attaching")}attached(){var e,t,n,i,s,o;this.targetElement=this.element.querySelector("[data-target-fold]"),this.openElement=this.element.querySelector("[data-fold=down]"),this.closeElement=this.element.querySelector("[data-fold=up]"),this.element.addEventListener("click",this.onDelegateEvent),this.logger.trace("Attached"),this.storageService.getElementOpened(this.elementType,this.elementSubData,this.elementId)?(null===(e=this.openElement)||void 0===e||e.classList.remove("hidden"),null===(t=this.closeElement)||void 0===t||t.classList.add("hidden"),null===(n=this.targetElement)||void 0===n||n.classList.remove("hidden")):(null===(i=this.openElement)||void 0===i||i.classList.add("hidden"),null===(s=this.closeElement)||void 0===s||s.classList.remove("hidden"),null===(o=this.targetElement)||void 0===o||o.classList.add("hidden"))}detaching(){this.logger.trace("Detaching"),this.element.removeEventListener("click",this.onDelegateEvent)}toggle(){var e,t,n,i,s,o,a;(null===(e=this.targetElement)||void 0===e?void 0:e.classList.contains("hidden"))?(null===(t=this.openElement)||void 0===t||t.classList.remove("hidden"),null===(n=this.closeElement)||void 0===n||n.classList.add("hidden"),null===(i=this.targetElement)||void 0===i||i.classList.remove("hidden"),this.storageService.setElementOpened(this.elementType,this.elementSubData,this.elementId)):(null===(s=this.openElement)||void 0===s||s.classList.add("hidden"),null===(o=this.closeElement)||void 0===o||o.classList.remove("hidden"),null===(a=this.targetElement)||void 0===a||a.classList.add("hidden"),this.storageService.setElementClosed(this.elementType,this.elementSubData,this.elementId))}};ni([(0,O.ExJ)(),ii("design:type",String)],oi.prototype,"elementId",void 0),ni([(0,O.ExJ)(),ii("design:type",String)],oi.prototype,"elementType",void 0),ni([(0,O.ExJ)(),ii("design:type",String)],oi.prototype,"elementSubData",void 0),oi=ni([(0,O.OVJ)("blackcube-fold"),si(0,E.Xo),si(1,O.TIm),si(4,O.ND1),ii("design:paramtypes",[Object,Object,N,x,HTMLElement])],oi);var ai=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},li=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ri=function(e,t){return function(n,i){t(n,i,e)}};let ci=class{constructor(e,t,n,i){this.logger=e,this.platform=t,this.httpService=n,this.element=i,this.button=null,this.target=null,this.url=null,this.onDelegateEvent=e=>{e.preventDefault(),this.logger.trace("onDelegateEvent",this.url),this.httpService.fetch(this.url).then((e=>e.ok&&200===e.status?e.json():Promise.reject(e))).then((e=>{this.logger.trace("onDelegateEvent",e),this.target.value=e.url})).catch((e=>{this.logger.warn("onDelegateEvent: error",e)}))},this.logger=e.scopeTo("UrlGenerator")}attaching(){this.logger.trace("Attaching")}attached(){this.button=this.element.querySelector("[data-url-generator=button]"),this.target=this.element.querySelector("[data-url-generator=target]"),this.button&&this.target&&this.button.addEventListener("click",this.onDelegateEvent),this.logger.trace("Attached")}detaching(){this.logger.trace("Detaching"),this.button&&this.target&&this.button.removeEventListener("click",this.onDelegateEvent)}};ai([(0,O.ExJ)({primary:!0}),li("design:type",String)],ci.prototype,"url",void 0),ci=ai([(0,O.OVJ)("blackcube-url-generator"),ri(0,E.Xo),ri(1,O.TIm),ri(3,O.ND1),li("design:paramtypes",[Object,Object,N,HTMLElement])],ci);var hi=function(e,t){return function(n,i){t(n,i,e)}};let di=class{constructor(e,t,n){this.logger=e,this.platform=t,this.element=n,this.onToggleEvent=e=>{this.elements.forEach((e=>{e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden")}))},this.logger=e.scopeTo("ViewEdit")}attaching(){this.logger.trace("Attaching")}attached(){var e;this.elements=this.element.querySelectorAll("[data-view-edit]"),this.toggleButton=this.element.querySelector("[data-view-edit=toggle] button"),null===(e=this.toggleButton)||void 0===e||e.addEventListener("click",this.onToggleEvent)}detaching(){var e;this.logger.trace("Detaching"),null===(e=this.toggleButton)||void 0===e||e.removeEventListener("click",this.onToggleEvent)}};di=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([(0,O.OVJ)("blackcube-view-edit"),hi(0,E.Xo),hi(1,O.TIm),hi(2,O.ND1),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,Object,HTMLElement])],di);var pi=function(e,t){return function(n,i){t(n,i,e)}};let gi=class{constructor(e,t,n){this.logger=e,this.ea=t,this.element=n,this.logger=e.scopeTo("Enhance")}attaching(){this.logger.trace("Attaching")}};gi=function(e,t,n,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,n,a):s(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([pi(0,E.Xo),pi(1,E.Rp),pi(2,O.ND1),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,Object,HTMLElement])],gi),window.webpackBaseUrl&&(n.p=webpackBaseUrl);const ui=document.querySelector("body");y.ZP.register(b).register(v).enhance({host:ui,component:gi})}},e=>{e.O(0,[216],(()=>(741,e(e.s=741)))),e.O()}]);