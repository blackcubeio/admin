"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[524],{607:(e,t,i)=>{var n={};i.r(n),i.d(n,{bindables:()=>I,default:()=>M,dependencies:()=>N,name:()=>F,register:()=>_,template:()=>A});var a={};i.r(a),i.d(a,{bindables:()=>K,default:()=>G,dependencies:()=>$,name:()=>V,register:()=>Q,template:()=>W});var s={};i.r(s),i.d(s,{bindables:()=>te,default:()=>Y,dependencies:()=>ee,name:()=>J,register:()=>ne,template:()=>Z});var l={};i.r(l),i.d(l,{bindables:()=>fe,default:()=>ge,dependencies:()=>me,name:()=>ue,register:()=>be,template:()=>pe});var o={};i.r(o),i.d(o,{bindables:()=>Le,default:()=>Se,dependencies:()=>xe,name:()=>Ce,register:()=>Pe,template:()=>je});var r={};i.r(r),i.d(r,{bindables:()=>qe,default:()=>ze,dependencies:()=>Be,name:()=>Ue,register:()=>Re,template:()=>_e});var c={};i.r(c),i.d(c,{bindables:()=>Xe,default:()=>$e,dependencies:()=>Ke,name:()=>We,register:()=>Je,template:()=>Ge});var d={};i.r(d),i.d(d,{bindables:()=>nt,default:()=>tt,dependencies:()=>it,name:()=>Ye,register:()=>st,template:()=>et});var h={};i.r(h),i.d(h,{bindables:()=>vt,default:()=>mt,dependencies:()=>ft,name:()=>pt,register:()=>yt,template:()=>gt});var u={};i.r(u),i.d(u,{bindables:()=>St,default:()=>Ct,dependencies:()=>jt,name:()=>kt,register:()=>Lt,template:()=>Tt});var p={};i.r(p),i.d(p,{bindables:()=>Ut,default:()=>Nt,dependencies:()=>It,name:()=>At,register:()=>zt,template:()=>Mt});var g={};i.r(g),i.d(g,{bindables:()=>Xt,default:()=>$t,dependencies:()=>Kt,name:()=>Wt,register:()=>Jt,template:()=>Gt});var m={};i.r(m),i.d(m,{bindables:()=>si,default:()=>ni,dependencies:()=>ai,name:()=>ti,register:()=>oi,template:()=>ii});var f={};i.r(f),i.d(f,{bindables:()=>vi,default:()=>mi,dependencies:()=>fi,name:()=>pi,register:()=>yi,template:()=>gi});var v={};i.r(v),i.d(v,{Alert:()=>Te,Blocs:()=>Ot,Burger:()=>Ve,Composites:()=>Ft,ElementToolbar:()=>Vt,File:()=>ut,Notification:()=>de,NotificationCenter:()=>he,Overlay:()=>Ie,Permissions:()=>ei,Profile:()=>R,QuillEditor:()=>Ci,SchemaEditor:()=>ui,Test:()=>Ze});var b={};i.r(b),i.d(b,{Ajaxify:()=>P,AlertDelete:()=>xi,AttachDevice:()=>Ki,BcTestCustomAttribute:()=>O,BroadcastElement:()=>_i,Fold:()=>Hi,LoginDevice:()=>Ji,Menu:()=>S,NotificationTrigger:()=>Mi,OverlayClose:()=>Ni,OverlayTrigger:()=>Pi,ToggleDependencies:()=>zi,UrlGenerator:()=>Wi,ViewEdit:()=>Gi});var y=i(484),w=i(38),E=i(919);let O=(()=>{let e,t,i=[(0,E.U4)("bc-test")],n=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("BcTestCustomAttribute"),t=(0,w.hd)(w.xe),i=(0,w.hd)(E.w3)){this.logger=e,this.ea=t,this.element=i,this.logger=e.scopeTo("BcTestCustomAttribute")}attaching(){this.logger.trace("Attaching")}},a=t,"symbol"==typeof(s="BcTestCustomAttribute")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n)})(),t;var a,s,l})();var k,T;!function(e){e[e.OPEN=0]="OPEN",e[e.CLOSE=1]="CLOSE"}(k||(k={})),function(e){e[e.OPENING=0]="OPENING",e[e.OPENED=1]="OPENED",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(T||(T={}));const C=w.DI.createInterface("IStorageService",(e=>e.singleton(j)));class j{getElementOpened(e,t,i){return""!==i&&""!==t&&""!==e&&"1"===localStorage.getItem("admin:element:"+e+"-"+i+":"+t+":opened")}setElementOpened(e,t,i){""!==i&&""!==t&&""!==e&&localStorage.setItem("admin:element:"+e+"-"+i+":"+t+":opened","1")}setElementClosed(e,t,i){""!==i&&""!==t&&""!==e&&localStorage.removeItem("admin:element:"+e+"-"+i+":"+t+":opened")}getSectionOpened(e,t){return""!==t&&""!==e&&"1"===localStorage.getItem("admin:section:"+e+"-"+t+":opened")}setSectionOpened(e,t){""!==t&&""!==e&&localStorage.setItem("admin:section:"+e+"-"+t+":opened","1")}setSectionClosed(e,t){""!==t&&""!==e&&localStorage.removeItem("admin:section:"+e+"-"+t+":opened")}getElementSlugOpened(e){return""!==e&&"1"===localStorage.getItem("admin:element:"+e+":slug:opened")}setElementSlugOpened(e){""!==e&&localStorage.setItem("admin:element:"+e+":slug:opened","1")}setElementSlugClosed(e){""!==e&&localStorage.removeItem("admin:element:"+e+":slug:opened")}}let S=(()=>{let e,t,i=[(0,E.U4)("blackcube-menu")],n=[];var a,s,l,o=t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("Menu"),t=(0,w.hd)(w.xe),i=(0,w.hd)(E.r_),n=(0,w.hd)(C),a=(0,w.hd)(E.w3)){this.logger=e,this.ea=t,this.platform=i,this.storageService=n,this.element=a,this.onClickExpander=e=>{const t=e.currentTarget.closest(".navbar-item"),i=t.dataset.blackcubeSection;t.classList.contains("expanded")?(t.classList.remove("expanded"),i&&this.storageService.setSectionClosed("menu",i)):(t.classList.add("expanded"),i&&this.storageService.setSectionOpened("menu",i))},this.onMenuEvent=e=>{this.isMobile&&(e.type===k.OPEN?this.openWithTransition():e.type===k.CLOSE&&this.closeWithTransition())},this.onCloseMobileMenu=e=>{e.preventDefault(),this.ea.publish(o.channel,{type:k.CLOSE}),this.logger.trace("Close mobile menu")}}attaching(){this.logger.trace("Attaching"),this.element.classList.contains("menu-mobile")?(this.isMobile=!0,this.element.style.display="none",this.menuMobileCloseBtn=this.element.querySelector("[data-ref=close]"),this.menuMobileClosePanel=this.element.querySelector("[data-ref=closepanel]"),this.menuMobileOffcanvas=this.element.querySelector("[data-ref=offcanvas]"),this.menuMobileOverlay=this.element.querySelector("[data-ref=overlay]"),this.menuMobileSubscriber=this.ea.subscribe(o.channel,this.onMenuEvent)):this.element.classList.contains("menu-desktop")&&(this.isMobile=!1,this.menuDesktop=this.element.querySelector(".menu-desktop")),this.expanders=this.element.querySelectorAll(".navbar-item-btn")}attached(){this.logger.trace("Attached"),this.isMobile&&this.menuMobileCloseBtn&&this.menuMobileCloseBtn.addEventListener("click",this.onCloseMobileMenu),this.element.querySelectorAll("[data-blackcube-section]").forEach((e=>{const t=e.dataset.blackcubeSection;t&&(this.storageService.getSectionOpened("menu",t)?e.classList.add("expanded"):e.classList.remove("expanded"))})),this.expanders.forEach(((e,t)=>{e.addEventListener("click",this.onClickExpander)}))}detaching(){this.logger.trace("Detached"),this.expanders.forEach(((e,t)=>{e.removeEventListener("click",this.onClickExpander)})),this.isMobile&&this.menuMobileCloseBtn.removeEventListener("click",this.onCloseMobileMenu)}openWithTransition(){return this.element.style.display="inherit",this.ea.publish(o.channel,{status:T.OPENING}),new Promise((e=>{setTimeout((()=>{e(!0)}))})).then((e=>{const t=[],i=new Promise((e=>{const t=i=>{this.menuMobileOverlay.classList.contains("opening")&&(this.menuMobileOverlay.classList.remove("opening","closed"),this.menuMobileOverlay.removeEventListener("transitionend",t),e(!0))};this.menuMobileOverlay.addEventListener("transitionend",t),this.menuMobileOverlay.classList.remove("closed"),this.menuMobileOverlay.classList.add("opening","opened")}));t.push(i);const n=new Promise((e=>{const t=i=>{this.menuMobileOffcanvas.classList.contains("opening")&&(this.menuMobileOffcanvas.classList.remove("opening","closed"),this.menuMobileOffcanvas.removeEventListener("transitionend",t),e(!0))};this.menuMobileOffcanvas.addEventListener("transitionend",t),this.menuMobileOffcanvas.classList.remove("closed"),this.menuMobileOffcanvas.classList.add("opening","opened")}));t.push(n);const a=new Promise((e=>{const t=i=>{this.menuMobileClosePanel.classList.contains("opening")&&(this.menuMobileClosePanel.classList.remove("opening","closed"),this.menuMobileClosePanel.removeEventListener("transitionend",t),e(!0))};this.menuMobileClosePanel.addEventListener("transitionend",t),this.menuMobileClosePanel.classList.remove("closed"),this.menuMobileClosePanel.classList.add("opening","opened")}));return t.push(a),Promise.all(t)})).then((e=>(this.ea.publish(o.channel,{status:T.OPENED}),e.reduce(((e,t)=>t&&e),!0))))}closeWithTransition(){return this.ea.publish(o.channel,{status:T.CLOSING}),new Promise((e=>{setTimeout((()=>{e(!0)}))})).then((e=>{const t=[],i=new Promise((e=>{const t=i=>{this.menuMobileOverlay.classList.contains("closing")&&(this.menuMobileOverlay.classList.remove("closing","opened"),this.menuMobileOverlay.removeEventListener("transitionend",t),e(!0))};this.menuMobileOverlay.addEventListener("transitionend",t),this.menuMobileOverlay.classList.remove("opened"),this.menuMobileOverlay.classList.add("closing","closed")}));t.push(i);const n=new Promise((e=>{const t=i=>{this.menuMobileOffcanvas.classList.contains("closing")&&(this.menuMobileOffcanvas.classList.remove("closing","opened"),this.menuMobileOffcanvas.removeEventListener("transitionend",t),e(!0))};this.menuMobileOffcanvas.addEventListener("transitionend",t),this.menuMobileOffcanvas.classList.remove("opened"),this.menuMobileOffcanvas.classList.add("closing","closed")}));t.push(n);const a=new Promise((e=>{const t=i=>{this.menuMobileClosePanel.classList.contains("closing")&&(this.menuMobileClosePanel.classList.remove("closing","opened"),this.menuMobileClosePanel.removeEventListener("transitionend",t),e(!0))};this.menuMobileClosePanel.addEventListener("transitionend",t),this.menuMobileClosePanel.classList.remove("opened"),this.menuMobileClosePanel.classList.add("closing","closed")}));return t.push(a),Promise.all(t)})).then((e=>(this.ea.publish(o.channel,{status:T.CLOSED}),this.element.style.display="none",e.reduce(((e,t)=>t&&e),!0))))}};return a=t,"symbol"==typeof(s="Menu")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),o=t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),t.channel="Menu",function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n),o=t})();var x=i(99);const L=w.DI.createInterface("IHttpService",(e=>e.singleton(D)));class D{constructor(e=(0,w.hd)(x.xl)){this.httpClient=e,this.httpClient.configure((e=>(e.withDefaults({headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"include"}),e)))}getHtmlContent(e){return this.httpClient.get(e,{headers:{Accept:"text/html"}}).then((e=>e.text()))}runFormRequest(e,t=null,i="post"){return this.httpClient.fetch(e,{method:i.toLocaleLowerCase(),body:t}).then((e=>e.text()))}fetch(e,t){return this.httpClient.fetch(e,t)}deleteRequest(e,t=""){return this.httpClient.fetch(e,{method:"delete",headers:{"X-CSRF-Token":t}})}}let P=(()=>{let e,t,i=[(0,E.U4)("blackcube-ajaxify")],n=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("Ajaxify"),t=(0,w.hd)(E.r_),i=(0,w.hd)(L),n=(0,w.hd)(E.w3)){this.logger=e,this.platform=t,this.httpService=i,this.element=n,this.onDelegateEvent=e=>{if(e.target){const t=e.target.closest("[data-ajaxify-source]");if(t){const i=t.dataset.ajaxifySource;let n=t.dataset.ajaxifyUrl;!n&&(t instanceof HTMLLinkElement||t instanceof HTMLAnchorElement)&&(n=t.href);const a=this.element.querySelector('[data-ajaxify-target="'+i+'"]');i&&n&&a&&(e.preventDefault(),this.httpService.getHtmlContent(n).then((e=>{a.innerHTML=e,this.platform.taskQueue.queueTask((()=>{a.scrollIntoView({behavior:"smooth"})}))})))}}},this.logger.debug("Construct")}attaching(){this.logger.trace("Attaching")}attached(){this.element.addEventListener("click",this.onDelegateEvent),this.logger.trace("Attached")}detaching(){this.logger.trace("Detaching"),this.element.removeEventListener("click",this.onDelegateEvent)}},a=t,"symbol"==typeof(s="Ajaxify")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n)})(),t;var a,s,l})();const F="profile",A='<template>\n    <div>\n        <button type="button" class="profile-btn" click.trigger="onToggle($event)" id="user-menu-button" aria-expanded="false" aria-haspopup="true">\n            <span class="sr-only">Open user menu</span>\n            <img if.bind="avatar" class="profile-img" src.bind="avatar" alt="">\n            <span else class="profile-initials">\n                <span class="profile-initials-letters">${initials}</span>\n            </span>\n        </button>\n    </div>\n    <div if.bind="items.length > 0" ref="menu" class="profile-menu closed"  role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" tabindex="-1">\n        <a repeat.for="item of items" click.trigger="onClickItem($event, $index)" href.bind="item.url" class="profile-menu-item" class.bind="item.active ? \'active\': \'\'" role="menuitem" tabindex="-1" innerHTML.bind="item.label"></a>\n    </div>\n</template>\n',M=A,N=[],I={};let U;function _(e){U||(U=E.K9.define({name:F,template:A,dependencies:N,bindables:I})),e.register(U)}var z,B=i(721);!function(e){e[e.OPENED=0]="OPENED",e[e.OPENING=1]="OPENING",e[e.CLOSED=2]="CLOSED",e[e.CLOSING=3]="CLOSING"}(z||(z={})),i(66);var q=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0},H=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0};let R=(()=>{let e,t,i,a,s,l,o=[(0,E.EM)(Object.assign(Object.assign({},n),{name:"blackcube-profile"}))],r=[],c=[],d=[],h=[],u=[],p=[],g=[],m=[];var f,v,b,y=t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("Profile"),t=(0,w.hd)(w.xe),i=(0,w.hd)(E.r_),n=(0,w.hd)(E.w3)){this.logger=(q(this,c),e),this.ea=t,this.platform=i,this.element=n,this.avatar=q(this,d,void 0),this.initials=(q(this,h),q(this,u,void 0)),this.items=(q(this,p),q(this,g,[])),this.menu=q(this,m),this.hasListener=!1,this.onTransitionMenuEnded=e=>{this.menu.classList.contains("closing")?(this.menu.classList.remove("closing","opened"),this.menu.style.display="none",this.ea.publish(y.channel,{status:z.CLOSED})):this.menu.classList.contains("opening")&&(this.menu.classList.remove("opening","closed"),this.ea.publish(y.channel,{status:z.OPENED}))}}attaching(){this.logger.trace("Attaching")}attached(){this.logger.trace("Attached"),this.items.length>0&&(this.hasListener=!0,this.menu.style.display="none",this.menu.addEventListener("transitionend",this.onTransitionMenuEnded))}detaching(){this.logger.trace("Detaching"),!0===this.hasListener&&this.menu.removeEventListener("transitionend",this.onTransitionMenuEnded)}onToggle(e){this.items.length>0&&(this.menu.classList.contains("opened")?this.closeMenu(e):this.menu.classList.contains("closed")&&this.openMenu(e))}onClickItem(e,t){return this.closeMenu(e),!0}openMenu(e){this.ea.publish(y.channel,{status:z.OPENING}),this.menu.style.display="inherit",this.platform.setTimeout((()=>{this.menu.classList.remove("closed"),this.menu.classList.add("opening","opened")}),0)}closeMenu(e){this.ea.publish(y.channel,{status:z.CLOSING}),this.menu.classList.remove("opened"),this.menu.classList.add("closing","closed")}handleTransitionMenu(e,t){this.logger.debug("onChangeItems",e,t),e>0&&0===t?(this.platform.setTimeout((()=>{this.menu.addEventListener("transitionend",this.onTransitionMenuEnded)})),this.hasListener=!0):0===e&&t>0&&(this.menu.removeEventListener("transitionend",this.onTransitionMenuEnded),this.hasListener=!1)}};return f=t,"symbol"==typeof(v="Profile")&&(v=v.description?"[".concat(v.description,"]"):""),Object.defineProperty(f,"name",{configurable:!0,value:b?"".concat(b," ",v):v}),(()=>{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)({mode:B.Zm.toView})],a=[(0,E._t)({mode:B.Zm.toView})],s=[(0,E._t)({mode:B.Zm.toView})],l=[(0,E.wB)((e=>e.items.length))],H(t,null,l,{kind:"method",name:"handleTransitionMenu",static:!1,private:!1,access:{has:e=>"handleTransitionMenu"in e,get:e=>e.handleTransitionMenu},metadata:n},null,c),H(null,null,i,{kind:"field",name:"avatar",static:!1,private:!1,access:{has:e=>"avatar"in e,get:e=>e.avatar,set:(e,t)=>{e.avatar=t}},metadata:n},d,h),H(null,null,a,{kind:"field",name:"initials",static:!1,private:!1,access:{has:e=>"initials"in e,get:e=>e.initials,set:(e,t)=>{e.initials=t}},metadata:n},u,p),H(null,null,s,{kind:"field",name:"items",static:!1,private:!1,access:{has:e=>"items"in e,get:e=>e.items,set:(e,t)=>{e.items=t}},metadata:n},g,m),H(null,e={value:t},o,{kind:"class",name:t.name,metadata:n},null,r),y=t=e.value,n&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n})})(),t.channel="Profile",q(t,r),y=t})();const V="notification-center",W='<template>\n    <div aria-live="assertive" class="notification-center">\n        <blackcube-notification repeat.for="notification of notifications"\n                                class="notification"\n            type.bind="notification.type"\n        title.bind="notification.title"\n        content.bind="notification.content"\n        index.bind="$index"\n        duration.bind="notification.duration">\n        </blackcube-notification>\n    </div>\n</template>\n',G=W,$=[],K={};let X;function Q(e){X||(X=E.K9.define({name:V,template:W,dependencies:$,bindables:K})),e.register(X)}const J="notification",Z='<template>\n        \x3c!--\n          NotificationData panel, dynamically insert this into the live region when it needs to be displayed\n\n          Entering: "transform ease-out duration-300 transition"\n            From: "translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2"\n            To: "translate-y-0 opacity-100 sm:translate-x-0"\n          Leaving: "transition ease-in duration-100"\n            From: "opacity-100"\n            To: "opacity-0"\n        --\x3e\n        <div ref="wrapper" class="notification-wrapper closed">\n            <div class="notification-icon">\n                \x3c!-- Heroicon name: outline/check-circle --\x3e\n                <svg if.bind="type === notificationTypes.CHECK" class="notification-icon-img check" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />\n                </svg>\n                \x3c!-- Heroicon name: outline/exclamation --\x3e\n                <svg if.bind="type === notificationTypes.EXCLAMATION" class="notification-icon-img exclamation" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />\n                </svg>\n                \x3c!-- Heroicon name: outline/information --\x3e\n                <svg if.bind="type === notificationTypes.INFORMATION" class="notification-icon-img" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />\n                </svg>\n            </div>\n            <div class="notification-panel">\n                <p class="notification-title">\n                    ${title}\n                </p>\n                <p class="notification-content">\n                    ${content}\n                </p>\n            </div>\n            <div class="notification-btn-wrapper">\n                <button  click.trigger="onClose($event)" class="notification-btn">\n                    <span class="sr-only">Close</span>\n                    \x3c!-- Heroicon name: solid/x --\x3e\n                    <svg class="notification-close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">\n                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />\n                    </svg>\n                </button>\n            </div>\n        </div>\n</template>\n',Y=Z,ee=[],te={};let ie;function ne(e){ie||(ie=E.K9.define({name:J,template:Z,dependencies:ee,bindables:te})),e.register(ie)}var ae,se,le;function oe(e,t){return new Promise((t=>{e.startingCallback&&e.startingCallback(),e.beforeDisplayStyle&&(e.element.style.display=e.beforeDisplayStyle),setTimeout((()=>{t(!0)}),10)})).then((e=>{const i=[Promise.resolve(!0)];return t.forEach((e=>{const t=new Promise((t=>{const i=n=>{e.element.removeEventListener("transitionend",i),e.transition.forEach((t=>{e.element.classList.remove(t)})),t(!0)};e.element.addEventListener("transitionend",i),e.from.forEach((t=>{e.element.classList.remove(t)})),e.to.forEach((t=>{e.element.classList.add(t)})),e.transition.forEach((t=>{e.element.classList.add(t)}))}));i.push(t)})),Promise.all(i)})).then((e=>{const t=e.reduce(((e,t)=>e&&t),!0);return new Promise((e=>{setTimeout((()=>{e(t)}))}))})).then((e=>{const i=[];return i.push(Promise.resolve(e)),t.forEach((e=>{e.transition.forEach((t=>{i.push(new Promise((i=>{e.element.classList.remove(t),i(!0)})))}))})),Promise.all(i)})).then((t=>(e.afterDisplayStyle&&(e.element.style.display=e.afterDisplayStyle),e.endingCallback&&e.endingCallback(),new Promise((e=>{setTimeout((()=>{e(!0)}),10)})))))}!function(e){e[e.OPENING=0]="OPENING",e[e.OPENED=1]="OPENED",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED",e[e.REMOVED=4]="REMOVED"}(ae||(ae={})),function(e){e.CHECK="check",e.EXCLAMATION="exclamation",e.INFORMATION="information"}(se||(se={})),function(e){e[e.CREATE=0]="CREATE",e[e.REMOVE_ALL=1]="REMOVE_ALL"}(le||(le={}));var re=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},ce=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let de=(()=>{let e,t,i,n,a,l,o,r=[(0,E.EM)(Object.assign(Object.assign({},s),{name:"blackcube-notification"}))],c=[],d=[],h=[],u=[],p=[],g=[],m=[],f=[],v=[],b=[],y=[];var O,k,T,C=t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("Notification"),t=(0,w.hd)(w.xe),i=(0,w.hd)(E.r_),n=(0,w.hd)(E.w3)){this.logger=e,this.ea=t,this.platform=i,this.element=n,this.notificationTypes=se,this.type=ce(this,d,se.INFORMATION),this.title=(ce(this,h),ce(this,u,"")),this.content=(ce(this,p),ce(this,g,"")),this.index=(ce(this,m),ce(this,f,void 0)),this.duration=(ce(this,v),ce(this,b,void 0)),this.closeTimer=ce(this,y)}attaching(){this.logger.trace("Attaching",this.duration),this.duration||(this.duration=5e3)}attached(){this.logger.trace("Attached"),this.openWithTransition(),this.closeTimer=this.platform.setTimeout((()=>{this.logger.trace("Auto close"),this.closeWithTransition()}),this.duration)}detaching(){return this.logger.trace("Detaching"),this.wrapper.classList.contains("opened")?this.closeWithTransition().then((e=>Promise.resolve())):Promise.resolve()}onClose(e){e.preventDefault(),this.closeWithTransition()}closeWithTransition(){return this.closeTimer&&this.platform.clearTimeout(this.closeTimer),oe({element:this.wrapper,afterDisplayStyle:"none",startingCallback:()=>{this.ea.publish(C.channel,{status:ae.CLOSING,index:this.index})},endingCallback:()=>{this.ea.publish(C.channel,{status:ae.CLOSED,index:this.index})}},[{element:this.wrapper,from:["opened"],to:["closed"],transition:["closing"]}])}openWithTransition(){return oe({element:this.wrapper,beforeDisplayStyle:"inherit",startingCallback:()=>{this.ea.publish(C.channel,{status:ae.OPENING,index:this.index})},endingCallback:()=>{this.ea.publish(C.channel,{status:ae.OPENED,index:this.index})}},[{element:this.wrapper,from:["closed"],to:["opened"],transition:["opening"]}])}};return O=t,"symbol"==typeof(k="Notification")&&(k=k.description?"[".concat(k.description,"]"):""),Object.defineProperty(O,"name",{configurable:!0,value:T?"".concat(T," ",k):k}),(()=>{const s="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],n=[(0,E._t)()],a=[(0,E._t)()],l=[(0,E._t)()],o=[(0,E._t)()],re(null,null,i,{kind:"field",name:"type",static:!1,private:!1,access:{has:e=>"type"in e,get:e=>e.type,set:(e,t)=>{e.type=t}},metadata:s},d,h),re(null,null,n,{kind:"field",name:"title",static:!1,private:!1,access:{has:e=>"title"in e,get:e=>e.title,set:(e,t)=>{e.title=t}},metadata:s},u,p),re(null,null,a,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}},metadata:s},g,m),re(null,null,l,{kind:"field",name:"index",static:!1,private:!1,access:{has:e=>"index"in e,get:e=>e.index,set:(e,t)=>{e.index=t}},metadata:s},f,v),re(null,null,o,{kind:"field",name:"duration",static:!1,private:!1,access:{has:e=>"duration"in e,get:e=>e.duration,set:(e,t)=>{e.duration=t}},metadata:s},b,y),re(null,e={value:t},r,{kind:"class",name:t.name,metadata:s},null,c),C=t=e.value,s&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})})(),t.channel="Notification",ce(t,c),C=t})();let he=(()=>{let e,t,i=[(0,E.EM)(Object.assign(Object.assign({},a),{name:"blackcube-notification-center"}))],n=[];var s,l,o,r=t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("NotificationCenter"),t=(0,w.hd)(w.xe),i=(0,w.hd)(E.w3)){this.logger=e,this.ea=t,this.element=i,this.notifications=[],this.onNotificationEvent=e=>{e.status===ae.CLOSED&&(this.logger.debug("Notification event",e),this.removeNotification(e.index))},this.onNotificationCenterEvent=e=>{e.type===le.CREATE&&e.notification?(this.logger.debug("Notification event",e),this.addNotification(e.notification)):e.type===le.REMOVE_ALL&&(this.logger.debug("Should close children"),this.notifications.splice(0,this.notifications.length))}}attaching(){this.logger.trace("Attaching"),this.subscriberNotification=this.ea.subscribe(de.channel,this.onNotificationEvent),this.subscriber=this.ea.subscribe(r.channel,this.onNotificationCenterEvent)}attached(){this.logger.trace("Attached")}dispose(){this.subscriberNotification.dispose(),this.subscriber.dispose()}addNotification(e){this.notifications.push(e)}removeNotification(e){this.notifications.splice(e,1)}detaching(){this.logger.trace("Detaching")}};return s=t,"symbol"==typeof(l="NotificationCenter")&&(l=l.description?"[".concat(l.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:o?"".concat(o," ",l):l}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),r=t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),t.channel="NotificationCenter",function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n),r=t})();const ue="alert",pe='<template>\n    <div class="alert" aria-labelledby="modal-title" role="dialog" aria-modal="true">\n        <div class="alert-wrapper">\n            \x3c!--\n              Background overlay, show/hide based on modal state.\n\n              Entering: "ease-out duration-300"\n                From: "opacity-0"\n                To: "opacity-100"\n              Leaving: "ease-in duration-200"\n                From: "opacity-100"\n                To: "opacity-0"\n            --\x3e\n            <div ref="wrapper" click.trigger="onClickCancel($event)" class="alert-overlay closed" aria-hidden="true"></div>\n\n            \x3c!-- This element is to trick the browser into centering the modal contents. --\x3e\n            <span class="alert-fix" aria-hidden="true">&#8203;</span>\n\n            \x3c!--\n              Modal panel, show/hide based on modal state.\n\n              Entering: "ease-out duration-300"\n                From: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"\n                To: "opacity-100 translate-y-0 sm:scale-100"\n              Leaving: "ease-in duration-200"\n                From: "opacity-100 translate-y-0 sm:scale-100"\n                To: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"\n            --\x3e\n            <div ref="panel" class="alert-panel closed">\n                <div class="alert-panel-content">\n                    <div class="alert-icon" class.bind="type === alertTypes.CHECK ? \'check\' : (type === alertTypes.EXCLAMATION ? \'exclamation\': \'question\')">\n                        \x3c!-- Heroicon name: outline/check --\x3e\n                        <svg if.bind="type === alertTypes.CHECK" class="alert-icon-img" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />\n                        </svg>\n                        \x3c!-- Heroicon name: outline/exclamation --\x3e\n                        <svg if.bind="type === alertTypes.EXCLAMATION" class="alert-icon-img" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />\n                        </svg>\n                        \x3c!-- Heroicon name: outline/information --\x3e\n                        <svg if.bind="type === alertTypes.QUESTION" class="alert-icon-img" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />\n                        </svg>\n                    </div>\n                    <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">\n                        <au-compose template.bind="htmlData"></au-compose>\n                    </div>\n                </div>\n                <div class="alert-panel-actions">\n                    <button click.trigger="onClickAction($event)" type="button" class="alert-btn" class.bind="type === alertTypes.CHECK ? \'check\' : (type === alertTypes.EXCLAMATION ? \'exclamation\': \'question\')">\n                        ${actionTitle}\n                    </button>\n                    <button click.trigger="onClickCancel($event)" type="button" class="alert-btn">\n                        ${cancelTitle}\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n',ge=pe,me=[],fe={};let ve;function be(e){ve||(ve=E.K9.define({name:ue,template:pe,dependencies:me,bindables:fe})),e.register(ve)}var ye,we,Ee;!function(e){e[e.OPENING=0]="OPENING",e[e.OPENED=1]="OPENED",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED",e[e.REMOVED=4]="REMOVED"}(ye||(ye={})),function(e){e.CHECK="check",e.EXCLAMATION="exclamation",e.QUESTION="question"}(we||(we={})),function(e){e[e.OPEN=0]="OPEN",e[e.CLOSE=1]="CLOSE"}(Ee||(Ee={}));var Oe=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},ke=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Te=(()=>{let e,t,i,n=[(0,E.EM)(Object.assign(Object.assign({},l),{name:"blackcube-alert"}))],a=[],s=[],o=[];var r,c,d,h=t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("Alert"),t=(0,w.hd)(w.xe),i=(0,w.hd)(L),n=(0,w.hd)(E.w3)){this.logger=e,this.ea=t,this.httpService=i,this.element=n,this.alertTypes=we,this.type=ke(this,s,we.QUESTION),this.cancelTitle=(ke(this,o),"Cancel"),this.actionTitle="Action",this.stackedAlerts=[],this.alertShown=!1,this.onAlertEvent=e=>{e.type===Ee.OPEN&&e.alert?(this.type=e.alert.type,e.alert.actionTitle&&(this.actionTitle=e.alert.actionTitle),e.alert.cancelTitle&&(this.cancelTitle=e.alert.cancelTitle),this.contentUrl=e.alert.contentUrl,this.action=e.alert.action,this.cancel=e.alert.cancel,this.httpService.getHtmlContent(this.contentUrl).then((e=>(this.htmlData=e,!0))).then((e=>{this.logger.warn("Opening alert"),this.openWithTransition()}))):e.type===Ee.CLOSE&&this.closeWithTransition()}}attaching(){this.logger.trace("Attaching"),this.element.style.display="none",this.subscription=this.ea.subscribe(h.channel,this.onAlertEvent)}attached(){this.logger.trace("Attached")}detaching(){this.logger.trace("Detaching")}openWithTransition(){return oe({element:this.element,beforeDisplayStyle:"inherit",startingCallback:()=>{this.logger.warn("opening"),this.ea.publish(h.channel,{status:ye.OPENING})},endingCallback:()=>{this.logger.warn("opened"),this.ea.publish(h.channel,{status:ye.OPENED}),this.alertShown=!0}},[{element:this.wrapper,from:["closed"],to:["opened"],transition:["opening"]},{element:this.panel,from:["closed"],to:["opened"],transition:["opening"]}])}closeWithTransition(){return oe({element:this.element,afterDisplayStyle:"none",startingCallback:()=>{this.ea.publish(h.channel,{status:ye.CLOSING})},endingCallback:()=>{this.ea.publish(h.channel,{status:ye.CLOSED}),this.alertShown=!0}},[{element:this.wrapper,from:["opened"],to:["closed"],transition:["closing"]},{element:this.panel,from:["opened"],to:["closed"],transition:["closing"]}])}onClickAction(e){e.preventDefault(),this.logger.debug("Click action"),this.action&&this.action(),this.closeWithTransition()}onClickCancel(e){e.preventDefault(),this.logger.debug("Click cancel"),this.cancel&&this.cancel(),this.closeWithTransition()}};return r=t,"symbol"==typeof(c="Alert")&&(c=c.description?"[".concat(c.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:d?"".concat(d," ",c):c}),(()=>{const l="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],Oe(null,null,i,{kind:"field",name:"type",static:!1,private:!1,access:{has:e=>"type"in e,get:e=>e.type,set:(e,t)=>{e.type=t}},metadata:l},s,o),Oe(null,e={value:t},n,{kind:"class",name:t.name,metadata:l},null,a),h=t=e.value,l&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),t.channel="Alert",ke(t,a),h=t})();const Ce="overlay",je='<template>\n    <div class="overlay-wrapper">\n        \x3c!--\n          Background overlay, show/hide based on slide-over state.\n\n          Entering: "ease-in-out duration-500"\n            From: "opacity-0"\n            To: "opacity-100"\n          Leaving: "ease-in-out duration-500"\n            From: "opacity-100"\n            To: "opacity-0"\n        --\x3e\n        <div ref="overlay" click.trigger="onClickClose($event)" class="overlay-overlay closed" aria-hidden="true"></div>\n\n        <div class="overlay-content">\n            \x3c!--\n              Slide-over panel, show/hide based on slide-over state.\n\n              Entering: "transform transition ease-in-out duration-500 sm:duration-700"\n                From: "translate-x-full"\n                To: "translate-x-0"\n              Leaving: "transform transition ease-in-out duration-500 sm:duration-700"\n                From: "translate-x-0"\n                To: "translate-x-full"\n            --\x3e\n            <div ref="panel" class="overlay-panel closed">\n                <div class="overlay-panel-wrapper">\x3c!-- innerHTML.bind="htmlData" --\x3e\n                    \x3c!-- Replace with your content --\x3e\n                    <au-compose template.bind="htmlData"></au-compose>\n\n                    \x3c!-- /End replace --\x3e\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n',Se=je,xe=[],Le={};let De;function Pe(e){De||(De=E.K9.define({name:Ce,template:je,dependencies:xe,bindables:Le})),e.register(De)}var Fe,Ae;!function(e){e[e.OPENING=0]="OPENING",e[e.OPENED=1]="OPENED",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED",e[e.REMOVED=4]="REMOVED"}(Fe||(Fe={})),function(e){e[e.OPEN=0]="OPEN",e[e.CLOSE=1]="CLOSE"}(Ae||(Ae={}));var Me=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Ne=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Ie=(()=>{let e,t,i,n,a,s,l=[(0,E.EM)(Object.assign(Object.assign({},o),{name:"blackcube-overlay"}))],r=[],c=[],d=[],h=[],u=[],p=[],g=[],m=[],f=[];var v,b,y,O=t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("Overlay"),t=(0,w.hd)(w.xe),i=(0,w.hd)(E.r_),n=(0,w.hd)(L),a=(0,w.hd)(E.w3)){this.logger=e,this.ea=t,this.platform=i,this.httpService=n,this.element=a,this.title=Ne(this,c,""),this.abstract=(Ne(this,d),Ne(this,h,"")),this.cancelTitle=(Ne(this,u),Ne(this,p,"")),this.actionTitle=(Ne(this,g),Ne(this,m,"")),this.htmlData=Ne(this,f),this.isOpen=!1,this.onOverlayEvent=e=>{e.type===Ae.OPEN?this.closeWithTransition().then((t=>{var i,n,a,s;return this.title=e.overlay.title,this.abstract=e.overlay.abstract,this.cancel=null===(i=e.overlay)||void 0===i?void 0:i.cancel,this.action=null===(n=e.overlay)||void 0===n?void 0:n.action,this.cancelTitle=(null===(a=e.overlay)||void 0===a?void 0:a.cancelTitle)||"Cancel",this.actionTitle=(null===(s=e.overlay)||void 0===s?void 0:s.actionTitle)||"Action",this.httpService.getHtmlContent(e.overlay.url)})).then((e=>(this.htmlData=e,new Promise((e=>{this.platform.setTimeout((()=>{e(!0)}),40)}))))).then((e=>this.openWithTransition())):e.type===Ae.CLOSE&&this.closeWithTransition()},this.onDelegatedEvent=e=>{var t,i,n;const a=null===(t=e.target)||void 0===t?void 0:t.closest("[data-overlay-action]"),s=e;if("click"===e.type&&a&&this.panel.contains(a)){if(a.dataset.overlayAction&&"close"===a.dataset.overlayAction&&(e.stopPropagation(),e.preventDefault(),this.onClickClose(e),this.logger.warn("delegated "+e.type+" done",e.target,e.type)),a.dataset.overlayAction&&"submit"===a.dataset.overlayAction){e.stopPropagation(),e.preventDefault();const t=null===(i=e.target)||void 0===i?void 0:i.closest("form");if(t){const e=new FormData(t);a instanceof HTMLButtonElement&&a.hasAttribute("name")&&a.hasAttribute("value")&&e.append(a.name,a.value),this.httpService.fetch(t.action,{method:t.method,body:e}).then((e=>{const t=e.headers.get("X-Redirect");if(t)throw window.location.href=t,new Error("Should redirect");return e.text()})).then((e=>{this.htmlData=e}))}}}else if("submit"===e.type){const t=null===(n=e.target)||void 0===n?void 0:n.closest("form");if(s.preventDefault(),t){const e=new FormData(t),i=s.submitter;i.hasAttribute("name")&&i.hasAttribute("value")&&e.append(i.name,i.value),this.httpService.runFormRequest(t.action,e,t.method).then((e=>{this.htmlData=e})),this.logger.warn("delegated "+s.type+" done")}}},this.onClickClose=e=>{this.cancel&&this.cancel(),this.closeWithTransition()}}attaching(){this.logger.trace("Attaching"),this.subscriber=this.ea.subscribe(O.channel,this.onOverlayEvent)}attached(){this.element.style.display="none",this.logger.trace("Attached"),this.panel.addEventListener("submit",this.onDelegatedEvent),this.panel.addEventListener("click",this.onDelegatedEvent)}detaching(){this.logger.trace("Detaching"),this.panel.removeEventListener("click",this.onDelegatedEvent),this.panel.removeEventListener("submit",this.onDelegatedEvent)}dispose(){this.subscriber.dispose()}openWithTransition(){return!1===this.isOpen?(this.isOpen=!0,oe({element:this.element,beforeDisplayStyle:"inherit",startingCallback:()=>{this.ea.publish(O.channel,{status:Fe.OPENING})},endingCallback:()=>{this.ea.publish(O.channel,{status:Fe.OPENED})}},[{element:this.overlay,from:["closed"],to:["opened"],transition:["opening"]},{element:this.panel,from:["closed"],to:["opened"],transition:["opening"]}])):Promise.resolve(!0)}closeWithTransition(){return!0===this.isOpen?(this.isOpen=!1,oe({element:this.element,afterDisplayStyle:"none",startingCallback:()=>{this.ea.publish(O.channel,{status:Fe.CLOSING})},endingCallback:()=>{this.htmlData="",this.ea.publish(O.channel,{status:Fe.CLOSED})}},[{element:this.overlay,from:["opened"],to:["closed"],transition:["closing"]},{element:this.panel,from:["opened"],to:["closed"],transition:["closing"]}])):Promise.resolve(!0)}};return v=t,"symbol"==typeof(b="Overlay")&&(b=b.description?"[".concat(b.description,"]"):""),Object.defineProperty(v,"name",{configurable:!0,value:y?"".concat(y," ",b):b}),(()=>{const o="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],n=[(0,E._t)()],a=[(0,E._t)()],s=[(0,E._t)()],Me(null,null,i,{kind:"field",name:"title",static:!1,private:!1,access:{has:e=>"title"in e,get:e=>e.title,set:(e,t)=>{e.title=t}},metadata:o},c,d),Me(null,null,n,{kind:"field",name:"abstract",static:!1,private:!1,access:{has:e=>"abstract"in e,get:e=>e.abstract,set:(e,t)=>{e.abstract=t}},metadata:o},h,u),Me(null,null,a,{kind:"field",name:"cancelTitle",static:!1,private:!1,access:{has:e=>"cancelTitle"in e,get:e=>e.cancelTitle,set:(e,t)=>{e.cancelTitle=t}},metadata:o},p,g),Me(null,null,s,{kind:"field",name:"actionTitle",static:!1,private:!1,access:{has:e=>"actionTitle"in e,get:e=>e.actionTitle,set:(e,t)=>{e.actionTitle=t}},metadata:o},m,f),Me(null,e={value:t},l,{kind:"class",name:t.name,metadata:o},null,r),O=t=e.value,o&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o})})(),t.channel="Overlay",Ne(t,r),O=t})();const Ue="burger",_e='<template>\n    <button ref="openMenuBtn" class="px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 md:hidden">\n        <span class="sr-only">Open sidebar</span>\n        \x3c!-- Heroicon name: outline/menu-alt-2 --\x3e\n        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" />\n        </svg>\n    </button>\n</template>\n',ze=_e,Be=[],qe={};let He;function Re(e){He||(He=E.K9.define({name:Ue,template:_e,dependencies:Be,bindables:qe})),e.register(He)}let Ve=(()=>{let e,t,i=[(0,E.EM)(Object.assign(Object.assign({},r),{name:"blackcube-burger"})),(0,E.NY)()],n=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("Burger"),t=(0,w.hd)(w.xe),i=(0,w.hd)(E.w3)){this.logger=e,this.ea=t,this.element=i,this.onClick=e=>{e.preventDefault(),this.ea.publish(S.channel,{type:k.OPEN})}}attaching(){this.logger.trace("Attaching"),this.openMenuBtn.addEventListener("click",this.onClick)}attached(){this.logger.trace("Attached")}detaching(){this.logger.trace("Detaching"),this.openMenuBtn.removeEventListener("click",this.onClick)}},a=t,"symbol"==typeof(s="Burger")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n)})(),t;var a,s,l})();const We="test",Ge='<template>\n\n    Test component with button\n\n    <button click.trigger="onClick($event)">Click me</button>\n</template>',$e=Ge,Ke=[],Xe={};let Qe;function Je(e){Qe||(Qe=E.K9.define({name:We,template:Ge,dependencies:Ke,bindables:Xe})),e.register(Qe)}let Ze=(()=>{let e,t,i=[(0,E.EM)(Object.assign(Object.assign({},c),{name:"blackcube-test"}))],n=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("Test"),t=(0,w.hd)(w.xe)){this.logger=e,this.ea=t}attaching(){this.logger.trace("Attaching")}attached(){this.logger.trace("Attached")}bound(){this.logger.trace("Bound")}detaching(){this.logger.trace("Detaching")}onClick(e){e.preventDefault(),this.logger.warn("Click"),this.ea.publish(Te.channel,{type:Ee.OPEN,alert:{type:we.QUESTION,title:"Titre Alerte",content:"Contenu Alerte",action:()=>{this.logger.warn("Closing with action")},cancel:()=>{this.logger.warn("Closing with cancel")}}})}},a=t,"symbol"==typeof(s="Test")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n)})(),t;var a,s,l})();const Ye="file",et='\n    <div class="element-form-bloc-upload-wrapper">\n        <label class="element-form-bloc-label" if.bind="title">\n            ${title}\n        </label>\n        <div class="element-form-bloc-upload-input-wrapper">\n            <div class="element-form-bloc-upload-drop" class.bind="error?\'error\':\'\'" ref="drop">\n                <div class="element-form-bloc-upload-drop-wrapper">\n                    <svg class="element-form-bloc-upload-icon" ref="icon" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">\n                        <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n                    </svg>\n                    <div class="element-form-bloc-upload-drop-input-wrapper" ref="browse">\n                        <label class="element-form-bloc-upload-drop-input-label">\n                            <span>${uploadFileText}</span>\n                        </label>\n                        <p class="element-form-bloc-upload-drop-input-accessory">${uploadFileDnd}</p>\n                    </div>\n                    <p class="element-form-bloc-abstract">\n                        ${fileInfo}\n                    </p>\n                </div>\n            </div>\n        </div>\n        <p class="element-form-bloc-abstract">${uploadFileDescription}</p>\n        <ul class="w-full">\n            <li class="inline-block text-gray-600 text-center p-2 relative" repeat.for="handledFile of handledFiles">\n                <button click.trigger="onRemove(handledFile, $event)" class="absolute top-0 right-0 rounded-full p-1 text-center bg-white border-gray-600 border h-6 w-6 flex items-center justify-center text-xs hover:border-red-700 hover:text-red-700">\n                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">\n                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />\n                    </svg>\n                </button>\n                <a target="_blank" href.bind="handledFile.previewUrl + \'&original=1\'" class="cursor-pointer">\n                <img class="object-contain h-24" src.bind="handledFile.previewUrl" title.bind="handledFile.shortname">\n                </a>\n            </li>\n        </ul>\n    </div>\n',tt=et,it=[],nt={};let at;function st(e){at||(at=E.K9.define({name:Ye,template:et,dependencies:it,bindables:nt})),e.register(at)}var lt=i(832),ot=i.n(lt),rt=i(449),ct=i.n(rt),dt=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},ht=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let ut=(()=>{let e,t,i,n,a,s,l,o,r,c,h,u,p,g,m,f,v=[(0,E.EM)(Object.assign(Object.assign({},d),{name:"blackcube-file-upload"}))],b=[],y=[],O=[],k=[],T=[],C=[],j=[],S=[],x=[],D=[],P=[],F=[],A=[],M=[],N=[],I=[],U=[],_=[],z=[],B=[],q=[],H=[],R=[],V=[],W=[],G=[],$=[],K=[],X=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("File"),t=(0,w.hd)(L),i=(0,w.hd)(E.r_),n=(0,w.hd)(E.w3)){this.logger=e,this.httpService=t,this.platform=i,this.element=n,this.uploadCount=0,this.uploadUrl=ht(this,y,void 0),this.previewUrl=(ht(this,O),ht(this,k,void 0)),this.deleteUrl=(ht(this,T),ht(this,C,void 0)),this.fileType=(ht(this,j),ht(this,S,"")),this.name=(ht(this,x),ht(this,D,void 0)),this.multiple=(ht(this,P),ht(this,F,!1)),this.value=(ht(this,A),ht(this,M,"")),this.imageWidth=(ht(this,N),ht(this,I,void 0)),this.imageHeight=(ht(this,U),ht(this,_,void 0)),this.title=(ht(this,z),ht(this,B,void 0)),this.uploadFileText=(ht(this,q),ht(this,H,void 0)),this.uploadFileDnd=(ht(this,R),ht(this,V,void 0)),this.uploadFileDescription=(ht(this,W),ht(this,G,void 0)),this.error=(ht(this,$),ht(this,K,!1)),this.onDragEnter=(ht(this,X),e=>{e.preventDefault();let t=e.currentTarget,i=e.dataTransfer;i&&i.types.indexOf("Files")>=0?(e.stopPropagation(),i.dropEffect="copy",i.effectAllowed="copy",t.classList.add("border-green-700")):i&&(i.dropEffect="none",i.effectAllowed="none")}),this.onDragLeave=e=>{e.currentTarget.classList.remove("border-green-700")},this.onFileAdded=(e,t)=>{this.logger.debug("onFileAdded",e,t),this.error=!1,this.resumable.upload()},this.onFileSuccess=(e,t)=>{const i=JSON.parse(t);!1===this.multiple?this.setFile("@blackcubetmp/"+i.finalFilename,e):this.appendFile("@blackcubetmp/"+i.finalFilename,e),this.logger.debug("onFileSuccess",e,t)},this.onFileProgress=(e,t)=>{this.logger.debug("onFileProgress",e,t)},this.onFilesAdded=(e,t)=>{this.logger.debug("onFilesAdded",e,t)},this.onFileRetry=e=>{this.logger.debug("onFileRetry",e)},this.onFileError=(e,t)=>{this.logger.debug("onFileError",e,t)},this.onUploadStart=()=>{this.logger.debug("onUploadStart"),this.handleUploadIcon(1)},this.onComplete=()=>{this.logger.debug("onComplete"),this.handleUploadIcon(-1)},this.onProgress=()=>{this.logger.debug("onProgress")},this.onError=(e,t)=>{this.logger.debug("onError",t,e)},this.onPause=()=>{this.logger.debug("onPause")},this.onBeforeCancel=()=>{this.logger.debug("onBeforeCancel")},this.onCancel=()=>{this.logger.debug("onCancel"),this.handleUploadIcon(-1)},this.onChunkingStart=e=>{this.logger.debug("onChunkingStart",e)},this.onChunkingProgress=(e,t)=>{this.logger.debug("onChunkingProgressd",e,t)},this.onChunkingComplete=e=>{this.logger.debug("onChunkingComplete",e)},this.logger=e.scopeTo("File")}appendParametersUrl(e){let t=new(ct())(e);return this.imageWidth&&t.addSearch({width:this.imageWidth}),this.imageHeight&&t.addSearch({height:this.imageHeight}),t.toString()}generatePreviewUrl(e){let t=this.previewUrl.replace("__name__",e);return this.appendParametersUrl(t)}generateDeleteUrl(e){return this.deleteUrl.replace("__name__",e)}setFiles(e){let t=e.split(/\s*,\s*/);this.handledFiles=t.filter(((e,t)=>""!==e.trim())).map(((e,t)=>({name:e,shortname:e.split(/.*[\/|\\]/).pop(),previewUrl:this.generatePreviewUrl(e),deleteUrl:this.generateDeleteUrl(e)}))),this.hiddenField.value=this.getFilesValue()}setFile(e,t=null){this.handledFiles.forEach(((e,t)=>{e.file&&null!==e.file&&this.resumable.removeFile(e.file),this.httpService.deleteRequest(e.deleteUrl,this.csfr.value)})),this.handledFiles=[{name:e,shortname:e.split(/.*[\/|\\]/).pop(),previewUrl:this.generatePreviewUrl(e),deleteUrl:this.generateDeleteUrl(e),file:t}],this.hiddenField.value=this.getFilesValue()}appendFile(e,t=null){this.handledFiles.push({name:e,shortname:e.split(/.*[\/|\\]/).pop(),previewUrl:this.generatePreviewUrl(e),deleteUrl:this.generateDeleteUrl(e),file:t}),this.hiddenField.value=this.getFilesValue()}getFilesValue(){let e=this.handledFiles.map(((e,t)=>e.name)).join(", ");return"string"==typeof e?e:""}onRemove(e,t){t.stopPropagation(),t.preventDefault(),this.logger.debug("Should remove file",e);let i=null;this.handledFiles.forEach(((t,n)=>{e.name===t.name&&(i=n)})),null!==i&&i>=0&&(e.file&&null!==e.file&&this.resumable.removeFile(e.file),this.handledFiles.splice(i,1),this.httpService.deleteRequest(e.deleteUrl,this.csfr.value));let n=this.getFilesValue();this.hiddenField.value=n}attached(){this.setUp()}setUp(){this.parentForm=this.element.closest("form"),this.logger.debug("Multiple",this.multiple);let e={target:this.uploadUrl,chunkSize:524288},t=this.fileType.split(/\s*,\s*/).filter(((e,t)=>""!==e.trim()));if(this.fileInfo=t.map((e=>e.toLocaleUpperCase())).join(", "),e.fileType=t,this.parentForm){let t=this.parentForm.querySelector("input[name=_csrf]");this.csfr={name:t.name,value:t.value},e.query={},e.query[this.csfr.name]=this.csfr.value,this.logger.debug("CSRF : ",t.value)}this.hiddenField=document.createElement("input"),this.hiddenField.type="hidden",this.hiddenField.name=this.name,this.element.appendChild(this.hiddenField),this.setFiles(this.value),this.resumable=new(ot())(e),this.resumable.support&&(this.resumable.assignBrowse(this.browse,!1),this.resumable.assignDrop(this.drop),this.drop.addEventListener("dragover",this.onDragEnter),this.drop.addEventListener("dragenter",this.onDragEnter),this.drop.addEventListener("dragleave",this.onDragLeave),this.drop.addEventListener("drop",this.onDragLeave),this.resumable.on("fileAdded",this.onFileAdded),this.resumable.on("fileSuccess",this.onFileSuccess),this.resumable.on("fileProgress",this.onFileProgress),this.resumable.on("filesAdded",this.onFilesAdded),this.resumable.on("fileRetry",this.onFileRetry),this.resumable.on("fileError",this.onFileError),this.resumable.on("uploadStart",this.onUploadStart),this.resumable.on("complete",this.onComplete),this.resumable.on("progress",this.onProgress),this.resumable.on("error",this.onError),this.resumable.on("pause",this.onPause),this.resumable.on("beforeCancel",this.onBeforeCancel),this.resumable.on("cancel",this.onCancel),this.resumable.on("chunkingStart",this.onChunkingStart),this.resumable.on("chunkingProgress",this.onChunkingProgress),this.resumable.on("chunkingComplete",this.onChunkingComplete)),this.logger.debug("Attached")}handleUploadIcon(e){this.uploadCount=this.uploadCount+e,this.uploadCount>0?this.icon.classList.add("animate-ping"):this.icon.classList.remove("animate-ping")}get getFiles(){return this.resumable.support?this.resumable.files.map(((e,t)=>e.fileName)):[]}detaching(){this.resumable.support&&(this.drop.removeEventListener("dragover",this.onDragEnter),this.drop.removeEventListener("dragenter",this.onDragEnter),this.drop.removeEventListener("dragleave",this.onDragLeave),this.drop.removeEventListener("drop",this.onDragLeave))}},Q=t,"symbol"==typeof(J="File")&&(J=J.description?"[".concat(J.description,"]"):""),Object.defineProperty(Q,"name",{configurable:!0,value:Z?"".concat(Z," ",J):J}),(()=>{const d="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],n=[(0,E._t)()],a=[(0,E._t)()],s=[(0,E._t)()],l=[(0,E._t)()],o=[(0,E._t)()],r=[(0,E._t)()],c=[(0,E._t)()],h=[(0,E._t)()],u=[(0,E._t)()],p=[(0,E._t)()],g=[(0,E._t)()],m=[(0,E._t)()],f=[(0,E._t)()],dt(null,null,i,{kind:"field",name:"uploadUrl",static:!1,private:!1,access:{has:e=>"uploadUrl"in e,get:e=>e.uploadUrl,set:(e,t)=>{e.uploadUrl=t}},metadata:d},y,O),dt(null,null,n,{kind:"field",name:"previewUrl",static:!1,private:!1,access:{has:e=>"previewUrl"in e,get:e=>e.previewUrl,set:(e,t)=>{e.previewUrl=t}},metadata:d},k,T),dt(null,null,a,{kind:"field",name:"deleteUrl",static:!1,private:!1,access:{has:e=>"deleteUrl"in e,get:e=>e.deleteUrl,set:(e,t)=>{e.deleteUrl=t}},metadata:d},C,j),dt(null,null,s,{kind:"field",name:"fileType",static:!1,private:!1,access:{has:e=>"fileType"in e,get:e=>e.fileType,set:(e,t)=>{e.fileType=t}},metadata:d},S,x),dt(null,null,l,{kind:"field",name:"name",static:!1,private:!1,access:{has:e=>"name"in e,get:e=>e.name,set:(e,t)=>{e.name=t}},metadata:d},D,P),dt(null,null,o,{kind:"field",name:"multiple",static:!1,private:!1,access:{has:e=>"multiple"in e,get:e=>e.multiple,set:(e,t)=>{e.multiple=t}},metadata:d},F,A),dt(null,null,r,{kind:"field",name:"value",static:!1,private:!1,access:{has:e=>"value"in e,get:e=>e.value,set:(e,t)=>{e.value=t}},metadata:d},M,N),dt(null,null,c,{kind:"field",name:"imageWidth",static:!1,private:!1,access:{has:e=>"imageWidth"in e,get:e=>e.imageWidth,set:(e,t)=>{e.imageWidth=t}},metadata:d},I,U),dt(null,null,h,{kind:"field",name:"imageHeight",static:!1,private:!1,access:{has:e=>"imageHeight"in e,get:e=>e.imageHeight,set:(e,t)=>{e.imageHeight=t}},metadata:d},_,z),dt(null,null,u,{kind:"field",name:"title",static:!1,private:!1,access:{has:e=>"title"in e,get:e=>e.title,set:(e,t)=>{e.title=t}},metadata:d},B,q),dt(null,null,p,{kind:"field",name:"uploadFileText",static:!1,private:!1,access:{has:e=>"uploadFileText"in e,get:e=>e.uploadFileText,set:(e,t)=>{e.uploadFileText=t}},metadata:d},H,R),dt(null,null,g,{kind:"field",name:"uploadFileDnd",static:!1,private:!1,access:{has:e=>"uploadFileDnd"in e,get:e=>e.uploadFileDnd,set:(e,t)=>{e.uploadFileDnd=t}},metadata:d},V,W),dt(null,null,m,{kind:"field",name:"uploadFileDescription",static:!1,private:!1,access:{has:e=>"uploadFileDescription"in e,get:e=>e.uploadFileDescription,set:(e,t)=>{e.uploadFileDescription=t}},metadata:d},G,$),dt(null,null,f,{kind:"field",name:"error",static:!1,private:!1,access:{has:e=>"error"in e,get:e=>e.error,set:(e,t)=>{e.error=t}},metadata:d},K,X),dt(null,e={value:t},v,{kind:"class",name:t.name,metadata:d},null,b),t=e.value,d&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d}),ht(t,b)})(),t;var Q,J,Z})();const pt="blocs",gt='<template>\n    <div>\n        <au-compose template.bind="view"></au-compose>\n    </div>\n</template>\n',mt=gt,ft=[],vt={};let bt;function yt(e){bt||(bt=E.K9.define({name:pt,template:gt,dependencies:ft,bindables:vt})),e.register(bt)}var wt=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Et=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Ot=(()=>{let e,t,i,n,a=[(0,E.EM)(Object.assign(Object.assign({},h),{name:"blackcube-blocs"}))],s=[],l=[],o=[],r=[],c=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("Blocs"),t=(0,w.hd)(E.r_),i=(0,w.hd)(L),n=(0,w.hd)(E.w3)){this.logger=e,this.platform=t,this.httpService=i,this.element=n,this.url=Et(this,l,void 0),this.form=Et(this,o),this.view=Et(this,r,""),this.onDelegateClick=(Et(this,c),e=>{if(e.target){e.stopPropagation();let t=e.target.closest("button[type=button]");if(t&&this.element.contains(t)&&(e.preventDefault(),this.logger.debug("delegateClick"),t.name)){const e=new FormData(this.form);if(e.delete("blocTypeId"),"blocAdd"===t.name){const i=t.previousElementSibling;"SELECT"===i.tagName&&e.append("blocTypeId",i.value)}const i="post";e.append(t.name,t.value),this.httpService.fetch(this.url,{body:e,method:i}).then((e=>e.text())).then((e=>{this.view=e}))}}})}attached(){this.logger.debug("Attached"),this.logger.debug(this.url),this.form=this.element.closest("form"),this.element.addEventListener("click",this.onDelegateClick)}detaching(){this.logger.debug("Detached"),this.element.removeEventListener("click",this.onDelegateClick)}},d=t,"symbol"==typeof(u="Blocs")&&(u=u.description?"[".concat(u.description,"]"):""),Object.defineProperty(d,"name",{configurable:!0,value:p?"".concat(p," ",u):u}),(()=>{const d="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],n=[(0,E._t)()],wt(null,null,i,{kind:"field",name:"url",static:!1,private:!1,access:{has:e=>"url"in e,get:e=>e.url,set:(e,t)=>{e.url=t}},metadata:d},l,o),wt(null,null,n,{kind:"field",name:"view",static:!1,private:!1,access:{has:e=>"view"in e,get:e=>e.view,set:(e,t)=>{e.view=t}},metadata:d},r,c),wt(null,e={value:t},a,{kind:"class",name:t.name,metadata:d},null,s),t=e.value,d&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d}),Et(t,s)})(),t;var d,u,p})();const kt="composites",Tt='<template>\n    <div>\n        <au-compose template.bind="view"></au-compose>\n    </div>\n</template>\n',Ct=Tt,jt=[],St={};let xt;function Lt(e){xt||(xt=E.K9.define({name:kt,template:Tt,dependencies:jt,bindables:St})),e.register(xt)}var Dt=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Pt=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Ft=(()=>{let e,t,i,n,a=[(0,E.EM)(Object.assign(Object.assign({},u),{name:"blackcube-composites"}))],s=[],l=[],o=[],r=[],c=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("Composites"),t=(0,w.hd)(E.r_),i=(0,w.hd)(L),n=(0,w.hd)(E.w3)){this.logger=e,this.platform=t,this.httpService=i,this.element=n,this.url=Pt(this,l,void 0),this.form=Pt(this,o),this.view=Pt(this,r,""),this.onDelegateClick=(Pt(this,c),e=>{if(e.target){e.stopPropagation();let t=e.target.closest("button[type=button]");if(t&&this.element.contains(t)&&(e.preventDefault(),this.logger.debug("delegateClick"),t.name)){const e=new FormData(this.form),i="post";e.append(t.name,t.value),this.httpService.fetch(this.url,{body:e,method:i}).then((e=>e.text())).then((e=>{this.view=e}))}}})}attached(){this.logger.debug("Attached"),this.logger.debug(this.url),this.form=this.element.closest("form"),this.element.addEventListener("click",this.onDelegateClick)}detaching(){this.logger.debug("Detached"),this.element.removeEventListener("click",this.onDelegateClick)}},d=t,"symbol"==typeof(h="Composites")&&(h=h.description?"[".concat(h.description,"]"):""),Object.defineProperty(d,"name",{configurable:!0,value:p?"".concat(p," ",h):h}),(()=>{const d="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],n=[(0,E._t)()],Dt(null,null,i,{kind:"field",name:"url",static:!1,private:!1,access:{has:e=>"url"in e,get:e=>e.url,set:(e,t)=>{e.url=t}},metadata:d},l,o),Dt(null,null,n,{kind:"field",name:"view",static:!1,private:!1,access:{has:e=>"view"in e,get:e=>e.view,set:(e,t)=>{e.view=t}},metadata:d},r,c),Dt(null,e={value:t},a,{kind:"class",name:t.name,metadata:d},null,s),t=e.value,d&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d}),Pt(t,s)})(),t;var d,h,p})();const At="element-toolbar",Mt='<template>\n    <div class="page-header-buttons">\n        <button type="button" class="page-header-buttons-button" class.bind="slugActive ? \'active\':\'inactive\'" click.trigger="onClickSlug($event)">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>\n            <span class="ml-2">${slugTitle}</span>\n        </button>\n        <button if.bind="slugExists" type="button" class="page-header-buttons-button" class.bind="sitemapActive ? \'active\':\'inactive\'" click.trigger="onClickSitemap($event)">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg>\n            <span class="ml-2">${sitemapTitle}</span>\n        </button>\n        <span else type="button" class="page-header-buttons-button disabled">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg>\n            <span class="ml-2">${sitemapTitle}</span>\n        </span>\n        <button if.bind="slugExists" type="button" class="page-header-buttons-button" class.bind="seoActive ? \'active\':\'inactive\'" click.trigger="onClickSeo($event)">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>\n            <span class="ml-2">${seoTitle}</span>\n        </button>\n        <span else type="button" class="page-header-buttons-button disabled">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>\n            <span class="ml-2">${seoTitle}</span>\n        </span>\n        <button if.bind="showTags" type="button" class="page-header-buttons-button" click.trigger="onClickTags($event)">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg>\n            <span class="ml-2">${tagsTitle}</span>\n        </button>\n        <a if.bind="linkUrl.length>1" href.bind="linkUrl" class="page-header-buttons-button link" target="_blank">\n            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>\n            <span class="ml-2">${linkTitle}</span>\n        </a>\n    </div>\n</template>\n',Nt=Mt,It=[],Ut={};let _t;function zt(e){_t||(_t=E.K9.define({name:At,template:Mt,dependencies:It,bindables:Ut})),e.register(_t)}var Bt;!function(e){e.CREATE="create",e.UPDATE="update",e.DELETE="delete",e.ACTIVATE="activate",e.DEACTIVATE="deactivate"}(Bt||(Bt={}));class qt{}qt.channel="general";var Ht=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Rt=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Vt=(()=>{let e,t,i,n,a,s,l,o,r,c,d,h,u,g,m,f,v,b=[(0,E.EM)(Object.assign(Object.assign({},p),{name:"blackcube-element-toolbar"}))],y=[],O=[],k=[],T=[],C=[],j=[],S=[],x=[],D=[],P=[],F=[],A=[],M=[],N=[],I=[],U=[],_=[],z=[],B=[],q=[],H=[],R=[],V=[],W=[],G=[],$=[],K=[],X=[],Q=[],J=[],Z=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("ElementToolbar"),t=(0,w.hd)(w.xe),i=(0,w.hd)(E.r_),n=(0,w.hd)(L),a=(0,w.hd)(E.w3)){this.logger=e,this.ea=t,this.platform=i,this.httpService=n,this.element=a,this.slugTitle=Rt(this,O,"Slug"),this.slugUrl=(Rt(this,k),Rt(this,T,void 0)),this.slugActive=(Rt(this,C),Rt(this,j,!1)),this.slugExists=(Rt(this,S),Rt(this,x,!1)),this.sitemapTitle=(Rt(this,D),Rt(this,P,"Sitemap")),this.sitemapUrl=(Rt(this,F),Rt(this,A,void 0)),this.sitemapActive=(Rt(this,M),Rt(this,N,!1)),this.seoTitle=(Rt(this,I),Rt(this,U,"SEO")),this.seoUrl=(Rt(this,_),Rt(this,z,void 0)),this.seoActive=(Rt(this,B),Rt(this,q,!1)),this.showTags=(Rt(this,H),Rt(this,R,!0)),this.tagsTitle=(Rt(this,V),Rt(this,W,"Tags")),this.tagsUrl=(Rt(this,G),Rt(this,$,void 0)),this.linkUrl=(Rt(this,K),Rt(this,X,"")),this.linkTitle=(Rt(this,Q),Rt(this,J,"View")),this.eventListener=Rt(this,Z),this.onEvent=e=>{var t,i,n;"slug"===(null===(t=e.data)||void 0===t?void 0:t.type)&&(e.type===Bt.CREATE||e.type===Bt.UPDATE?this.slugExists=!0:e.type===Bt.DELETE&&(this.slugExists=!1,this.slugActive=!1,this.seoActive=!1,this.sitemapActive=!1),e.type===Bt.ACTIVATE?this.slugActive=!0:e.type===Bt.DEACTIVATE&&(this.slugActive=!1)),"seo"===(null===(i=e.data)||void 0===i?void 0:i.type)&&(e.type===Bt.ACTIVATE?this.seoActive=!0:e.type===Bt.DEACTIVATE&&(this.seoActive=!1)),"sitemap"===(null===(n=e.data)||void 0===n?void 0:n.type)&&(e.type===Bt.ACTIVATE?this.sitemapActive=!0:e.type===Bt.DEACTIVATE&&(this.sitemapActive=!1))}}attaching(){this.eventListener=this.ea.subscribe(qt.channel,this.onEvent)}attached(){this.logger.debug("Attached")}detaching(){this.logger.debug("Detached")}dispose(){this.eventListener.dispose()}onClickSlug(e){e.preventDefault(),this.ea.publish(Ie.channel,{type:Ae.OPEN,overlay:{url:this.slugUrl}})}onClickSitemap(e){e.preventDefault(),this.slugExists&&this.ea.publish(Ie.channel,{type:Ae.OPEN,overlay:{url:this.sitemapUrl}})}onClickSeo(e){e.preventDefault(),this.slugExists&&this.ea.publish(Ie.channel,{type:Ae.OPEN,overlay:{url:this.seoUrl}})}onClickTags(e){e.preventDefault(),this.ea.publish(Ie.channel,{type:Ae.OPEN,overlay:{url:this.tagsUrl}})}},Y=t,"symbol"==typeof(ee="ElementToolbar")&&(ee=ee.description?"[".concat(ee.description,"]"):""),Object.defineProperty(Y,"name",{configurable:!0,value:te?"".concat(te," ",ee):ee}),(()=>{const p="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],n=[(0,E._t)()],a=[(0,E._t)()],s=[(0,E._t)()],l=[(0,E._t)()],o=[(0,E._t)()],r=[(0,E._t)()],c=[(0,E._t)()],d=[(0,E._t)()],h=[(0,E._t)()],u=[(0,E._t)()],g=[(0,E._t)()],m=[(0,E._t)()],f=[(0,E._t)()],v=[(0,E._t)()],Ht(null,null,i,{kind:"field",name:"slugTitle",static:!1,private:!1,access:{has:e=>"slugTitle"in e,get:e=>e.slugTitle,set:(e,t)=>{e.slugTitle=t}},metadata:p},O,k),Ht(null,null,n,{kind:"field",name:"slugUrl",static:!1,private:!1,access:{has:e=>"slugUrl"in e,get:e=>e.slugUrl,set:(e,t)=>{e.slugUrl=t}},metadata:p},T,C),Ht(null,null,a,{kind:"field",name:"slugActive",static:!1,private:!1,access:{has:e=>"slugActive"in e,get:e=>e.slugActive,set:(e,t)=>{e.slugActive=t}},metadata:p},j,S),Ht(null,null,s,{kind:"field",name:"slugExists",static:!1,private:!1,access:{has:e=>"slugExists"in e,get:e=>e.slugExists,set:(e,t)=>{e.slugExists=t}},metadata:p},x,D),Ht(null,null,l,{kind:"field",name:"sitemapTitle",static:!1,private:!1,access:{has:e=>"sitemapTitle"in e,get:e=>e.sitemapTitle,set:(e,t)=>{e.sitemapTitle=t}},metadata:p},P,F),Ht(null,null,o,{kind:"field",name:"sitemapUrl",static:!1,private:!1,access:{has:e=>"sitemapUrl"in e,get:e=>e.sitemapUrl,set:(e,t)=>{e.sitemapUrl=t}},metadata:p},A,M),Ht(null,null,r,{kind:"field",name:"sitemapActive",static:!1,private:!1,access:{has:e=>"sitemapActive"in e,get:e=>e.sitemapActive,set:(e,t)=>{e.sitemapActive=t}},metadata:p},N,I),Ht(null,null,c,{kind:"field",name:"seoTitle",static:!1,private:!1,access:{has:e=>"seoTitle"in e,get:e=>e.seoTitle,set:(e,t)=>{e.seoTitle=t}},metadata:p},U,_),Ht(null,null,d,{kind:"field",name:"seoUrl",static:!1,private:!1,access:{has:e=>"seoUrl"in e,get:e=>e.seoUrl,set:(e,t)=>{e.seoUrl=t}},metadata:p},z,B),Ht(null,null,h,{kind:"field",name:"seoActive",static:!1,private:!1,access:{has:e=>"seoActive"in e,get:e=>e.seoActive,set:(e,t)=>{e.seoActive=t}},metadata:p},q,H),Ht(null,null,u,{kind:"field",name:"showTags",static:!1,private:!1,access:{has:e=>"showTags"in e,get:e=>e.showTags,set:(e,t)=>{e.showTags=t}},metadata:p},R,V),Ht(null,null,g,{kind:"field",name:"tagsTitle",static:!1,private:!1,access:{has:e=>"tagsTitle"in e,get:e=>e.tagsTitle,set:(e,t)=>{e.tagsTitle=t}},metadata:p},W,G),Ht(null,null,m,{kind:"field",name:"tagsUrl",static:!1,private:!1,access:{has:e=>"tagsUrl"in e,get:e=>e.tagsUrl,set:(e,t)=>{e.tagsUrl=t}},metadata:p},$,K),Ht(null,null,f,{kind:"field",name:"linkUrl",static:!1,private:!1,access:{has:e=>"linkUrl"in e,get:e=>e.linkUrl,set:(e,t)=>{e.linkUrl=t}},metadata:p},X,Q),Ht(null,null,v,{kind:"field",name:"linkTitle",static:!1,private:!1,access:{has:e=>"linkTitle"in e,get:e=>e.linkTitle,set:(e,t)=>{e.linkTitle=t}},metadata:p},J,Z),Ht(null,e={value:t},b,{kind:"class",name:t.name,metadata:p},null,y),t=e.value,p&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:p}),Rt(t,y)})(),t;var Y,ee,te})();const Wt="permissions",Gt='<template>\n    <div>\n        <au-compose template.bind="view"></au-compose>\n    </div>\n</template>\n',$t=Gt,Kt=[],Xt={};let Qt;function Jt(e){Qt||(Qt=E.K9.define({name:Wt,template:Gt,dependencies:Kt,bindables:Xt})),e.register(Qt)}var Zt=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Yt=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let ei=(()=>{let e,t,i,n,a=[(0,E.EM)(Object.assign(Object.assign({},g),{name:"blackcube-permissions"}))],s=[],l=[],o=[],r=[],c=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("Permissions"),t=(0,w.hd)(E.r_),i=(0,w.hd)(L),n=(0,w.hd)(E.w3)){this.logger=e,this.platform=t,this.httpService=i,this.element=n,this.url=Yt(this,l,void 0),this.form=Yt(this,o),this.view=Yt(this,r,""),this.csrf=Yt(this,c),this.onDelegateChange=e=>{if(e.target){let t=e.target.closest("input[type=checkbox]");if(t&&this.element.contains(t)){e.stopPropagation(),e.preventDefault(),this.logger.debug("delegateClick");const i=new FormData;i.append(this.csrf.name,this.csrf.value),t.dataset.rbacType&&i.append("type",t.dataset.rbacType),t.dataset.rbacName&&i.append("name",t.dataset.rbacName),i.append("mode",t.checked?"add":"remove");const n="post";this.httpService.fetch(this.url,{body:i,method:n}).then((e=>e.text())).then((e=>{this.view=e}))}}}}attached(){this.logger.debug("Attached"),this.logger.debug(this.url),this.form=this.element.closest("form");let e=this.form.querySelector("input[name=_csrf]");this.csrf={name:e.name,value:e.value},this.logger.debug(this.form),this.element.addEventListener("change",this.onDelegateChange);const t=new FormData;t.append(this.csrf.name,this.csrf.value),this.httpService.fetch(this.url,{body:t,method:"post"}).then((e=>e.text())).then((e=>{this.view=e}))}detaching(){this.logger.debug("Detached"),this.element.removeEventListener("change",this.onDelegateChange)}},d=t,"symbol"==typeof(h="Permissions")&&(h=h.description?"[".concat(h.description,"]"):""),Object.defineProperty(d,"name",{configurable:!0,value:u?"".concat(u," ",h):h}),(()=>{const d="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],n=[(0,E._t)()],Zt(null,null,i,{kind:"field",name:"url",static:!1,private:!1,access:{has:e=>"url"in e,get:e=>e.url,set:(e,t)=>{e.url=t}},metadata:d},l,o),Zt(null,null,n,{kind:"field",name:"view",static:!1,private:!1,access:{has:e=>"view"in e,get:e=>e.view,set:(e,t)=>{e.view=t}},metadata:d},r,c),Zt(null,e={value:t},a,{kind:"class",name:t.name,metadata:d},null,s),t=e.value,d&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d}),Yt(t,s)})(),t;var d,h,u})();const ti="schema-editor",ii='<template>\n    <input type="hidden" ref="hiddenField"/>\n    <div ref="editorElement"></div>\n</template>\n',ni=ii,ai=[],si={};let li;function oi(e){li||(li=E.K9.define({name:ti,template:ii,dependencies:ai,bindables:si})),e.register(li)}var ri=i(782),ci=i.n(ri),di=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},hi=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let ui=(()=>{let e,t,i,n,a,s,l=[(0,E.EM)(Object.assign(Object.assign({},m),{name:"blackcube-schema-editor"}))],o=[],r=[],c=[],d=[],h=[],u=[],p=[],g=[],f=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("SchemaEditor"),t=(0,w.hd)(E.r_),i=(0,w.hd)(E.w3)){this.logger=e,this.platform=t,this.element=i,this.fieldId=hi(this,r,void 0),this.fieldName=(hi(this,c),hi(this,d,void 0)),this.schema=(hi(this,h),hi(this,u,void 0)),this.language=(hi(this,p),hi(this,g,void 0)),hi(this,f),this.logger=e,this.platform=t,this.element=i}attached(){this.logger.debug("Attached"),this.fieldId&&(this.hiddenField.id=this.fieldId),this.fieldName&&(this.hiddenField.name=this.fieldName),this.schema&&(this.hiddenField.value=this.schema),this.buildEditor()}buildEditor(){let e={mode:"tree",modes:["tree","text"],search:!1,navigationBar:!1,statusBar:!0,mainMenuBar:!0,enableSort:!1,enableTransform:!1,language:"en",templates:[{text:"text",title:"Insert Text property",className:"jsoneditor-type-object",field:"text",value:{type:"string",title:"Field title",description:"Field description",minLength:1,maxLength:255}},{text:"Wysiwyg",title:"Insert Wysiwyg property",className:"jsoneditor-type-object",field:"wysiwyg",value:{type:"string",format:"wysiwyg",options:{theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{list:"bullet"}],["link"]]},formats:["bold","italic","link","underline","list"]},title:"Field title",description:"Field description"}},{text:"Checkbox",title:"Insert Checkbox property",className:"jsoneditor-type-object",field:"checkbox",value:{type:"string",format:"checkbox",title:"Field title",description:"Field description"}},{text:"Dropdown",title:"Insert Dropdown property",className:"jsoneditor-type-object",field:"dropdown",value:{type:"string",multiple:!1,format:"dropdownlist",items:[{title:"Item 1",value:"item1"},{title:"Item 2",value:"item2"}],title:"Field title",description:"Field description"}},{text:"Image",title:"Insert Image property",className:"jsoneditor-type-object",field:"image",value:{type:"string",format:"file",fileType:"png,jpg",imageWidth:600,imageHeight:200,title:"Field title",description:"Field description"}},{text:"File",title:"Insert File property",className:"jsoneditor-type-object",field:"file",value:{type:"string",format:"file",fileType:"pdf",title:"Field title",description:"Field description"}},{text:"Email",title:"Insert Email property",className:"jsoneditor-type-object",field:"email",value:{type:"string",format:"email",minLength:1,maxLength:255,title:"Field title",description:"Field description"}},{text:"Textarea",title:"Insert Textarea property",className:"jsoneditor-type-object",field:"textarea",value:{type:"string",format:"textarea",title:"Field title",description:"Field description"}},{text:"Radios",title:"Insert Radios property",className:"jsoneditor-type-object",field:"radiolist",value:{type:"string",format:"radiolist",items:[{title:"Item 1",value:"item1"},{title:"Item 2",value:"item2"}],title:"Field title",description:"Field description"}},{text:"Regexp",title:"Insert Regexp property",className:"jsoneditor-type-object",field:"regexp",value:{type:"string",pattern:"^[a-z0-9]+$",minLength:1,maxLength:255,title:"Field title",description:"Field description"}},{text:"Images",title:"Insert Images property",className:"jsoneditor-type-object",field:"image",value:{type:"string",format:"files",fileType:"png,jpg",imageWidth:600,imageHeight:200,title:"Field title",description:"Field description"}},{text:"Files",title:"Insert Files property",className:"jsoneditor-type-object",field:"files",value:{type:"string",format:"files",fileType:"pdf",title:"Field title",description:"Field description"}}]};this.language&&(e.language=this.language),e.onChangeJSON=e=>{this.hiddenField.value=JSON.stringify(e,null,4)},e.onChangeText=e=>{this.hiddenField.value=e},this.jsonSchema=new(ci())(this.editorElement,e),this.jsonSchema.setText(this.schema),this.jsonSchema.expandAll()}},v=t,"symbol"==typeof(b="SchemaEditor")&&(b=b.description?"[".concat(b.description,"]"):""),Object.defineProperty(v,"name",{configurable:!0,value:y?"".concat(y," ",b):b}),(()=>{const m="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],n=[(0,E._t)()],a=[(0,E._t)()],s=[(0,E._t)()],di(null,null,i,{kind:"field",name:"fieldId",static:!1,private:!1,access:{has:e=>"fieldId"in e,get:e=>e.fieldId,set:(e,t)=>{e.fieldId=t}},metadata:m},r,c),di(null,null,n,{kind:"field",name:"fieldName",static:!1,private:!1,access:{has:e=>"fieldName"in e,get:e=>e.fieldName,set:(e,t)=>{e.fieldName=t}},metadata:m},d,h),di(null,null,a,{kind:"field",name:"schema",static:!1,private:!1,access:{has:e=>"schema"in e,get:e=>e.schema,set:(e,t)=>{e.schema=t}},metadata:m},u,p),di(null,null,s,{kind:"field",name:"language",static:!1,private:!1,access:{has:e=>"language"in e,get:e=>e.language,set:(e,t)=>{e.language=t}},metadata:m},g,f),di(null,e={value:t},l,{kind:"class",name:t.name,metadata:m},null,o),t=e.value,m&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m}),hi(t,o)})(),t;var v,b,y})();const pi="quill-editor",gi='<template>\n    <input type="hidden" ref="hiddenField">\n    <div ref="editorElement"></div>\n\n</template>\n',mi=gi,fi=[],vi={};let bi;function yi(e){bi||(bi=E.K9.define({name:pi,template:gi,dependencies:fi,bindables:vi})),e.register(bi)}var wi=i(246),Ei=i.n(wi),Oi=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},ki=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};const Ti=Ei().import("formats/link");Ei().register(class extends Ti{static create(e){let t=super.create(e);return e=this.sanitize(e),t.setAttribute("href",e),e.startsWith("https://")||e.startsWith("http://")||e.startsWith("://")||t.removeAttribute("target"),t}},!0);let Ci=(()=>{let e,t,i,n,a,s,l=[(0,E.EM)(Object.assign(Object.assign({},f),{name:"blackcube-quill-editor"}))],o=[],r=[],c=[],d=[],h=[],u=[],p=[],g=[],m=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("QuillEditor"),t=(0,w.hd)(w.xe),i=(0,w.hd)(L),n=(0,w.hd)(E.w3)){this.logger=e,this.ea=t,this.httpService=i,this.element=n,this.fieldId=ki(this,r,void 0),this.fieldName=(ki(this,c),ki(this,d,void 0)),this.content=(ki(this,h),ki(this,u,"")),this.options=(ki(this,p),ki(this,g,{theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{list:"bullet"}],["link"]]},formats:["bold","italic","link","underline","list"]})),this.editorElement=ki(this,m),this.onTextChange=()=>{var e,t;this.hiddenField.value=null===(e=this.editorElement.querySelector(".ql-editor"))||void 0===e?void 0:e.innerHTML,this.logger.trace(null===(t=this.editorElement.querySelector(".ql-editor"))||void 0===t?void 0:t.innerHTML)},this.logger=e.scopeTo("QuillEditor")}attaching(){this.logger.trace("Attaching")}attached(){this.fieldId&&(this.hiddenField.id=this.fieldId),this.fieldName&&(this.hiddenField.name=this.fieldName),this.hiddenField.value=this.content,this.editorElement.innerHTML=this.content,this.options.theme="snow",this.quill=new(Ei())(this.editorElement,this.options),this.quill.on("text-change",this.onTextChange),this.logger.trace("Attached")}detaching(){this.quill.off("text-change",this.onTextChange),this.logger.trace("Detaching")}},v=t,"symbol"==typeof(b="QuillEditor")&&(b=b.description?"[".concat(b.description,"]"):""),Object.defineProperty(v,"name",{configurable:!0,value:y?"".concat(y," ",b):b}),(()=>{const f="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],n=[(0,E._t)()],a=[(0,E._t)()],s=[(0,E._t)()],Oi(null,null,i,{kind:"field",name:"fieldId",static:!1,private:!1,access:{has:e=>"fieldId"in e,get:e=>e.fieldId,set:(e,t)=>{e.fieldId=t}},metadata:f},r,c),Oi(null,null,n,{kind:"field",name:"fieldName",static:!1,private:!1,access:{has:e=>"fieldName"in e,get:e=>e.fieldName,set:(e,t)=>{e.fieldName=t}},metadata:f},d,h),Oi(null,null,a,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}},metadata:f},u,p),Oi(null,null,s,{kind:"field",name:"options",static:!1,private:!1,access:{has:e=>"options"in e,get:e=>e.options,set:(e,t)=>{e.options=t}},metadata:f},g,m),Oi(null,e={value:t},l,{kind:"class",name:t.name,metadata:f},null,o),t=e.value,f&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f}),ki(t,o)})(),t;var v,b,y})();var ji=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Si=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let xi=(()=>{let e,t,i,n,a=[(0,E.U4)("blackcube-alert-delete")],s=[],l=[],o=[],r=[],c=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("AlertDelete"),t=(0,w.hd)(w.xe),i=(0,w.hd)(L),n=(0,w.hd)(E.w3)){this.logger=e,this.ea=t,this.httpService=i,this.element=n,this.action=Si(this,l,"Delete"),this.cancel=(Si(this,o),Si(this,r,"Cancel")),this.onDelegateEvent=(Si(this,c),e=>{if(e.target){const t=e.target.closest("[data-alert-delete]");if(t instanceof HTMLAnchorElement){const i=t.dataset.alertDelete,n=t.dataset.alertDeleteMethod||"post",a=t.href;i&&i.length>1&&(e.preventDefault(),this.ea.publish(Te.channel,{type:Ee.OPEN,alert:{type:we.EXCLAMATION,contentUrl:i,actionTitle:this.action,cancelTitle:this.cancel,cancel:()=>{this.logger.trace("Should Close")},action:()=>{var e;const i=null===(e=t.closest("form"))||void 0===e?void 0:e.querySelector("input[name=_csrf]"),s=new FormData;i&&s.append(i.name,i.value),this.httpService.fetch(a,{method:n,body:s}).then((e=>{const t=e.headers.get("X-Redirect");t&&(window.location.href=t),this.logger.trace("daya",e.headers)}))}}}))}}})}attaching(){this.logger.trace("Attaching")}attached(){this.logger.trace("Attached"),this.element.addEventListener("click",this.onDelegateEvent)}detaching(){this.logger.trace("Detaching"),this.element.removeEventListener("click",this.onDelegateEvent)}},d=t,"symbol"==typeof(h="AlertDelete")&&(h=h.description?"[".concat(h.description,"]"):""),Object.defineProperty(d,"name",{configurable:!0,value:u?"".concat(u," ",h):h}),(()=>{const d="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],n=[(0,E._t)()],ji(null,null,i,{kind:"field",name:"action",static:!1,private:!1,access:{has:e=>"action"in e,get:e=>e.action,set:(e,t)=>{e.action=t}},metadata:d},l,o),ji(null,null,n,{kind:"field",name:"cancel",static:!1,private:!1,access:{has:e=>"cancel"in e,get:e=>e.cancel,set:(e,t)=>{e.cancel=t}},metadata:d},r,c),ji(null,e={value:t},a,{kind:"class",name:t.name,metadata:d},null,s),t=e.value,d&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d}),Si(t,s)})(),t;var d,h,u})();var Li=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Di=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Pi=(()=>{let e,t,i,n,a,s,l,o=[(0,E.U4)("blackcube-overlay-trigger")],r=[],c=[],d=[],h=[],u=[],p=[],g=[],m=[],f=[],v=[],b=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("OverlayTrigger"),t=(0,w.hd)(w.xe),i=(0,w.hd)(E.w3)){this.logger=e,this.ea=t,this.element=i,this.title=Di(this,c,void 0),this.abstract=(Di(this,d),Di(this,h,void 0)),this.url=(Di(this,u),Di(this,p,void 0)),this.actionTitle=(Di(this,g),Di(this,m,void 0)),this.cancelTitle=(Di(this,f),Di(this,v,void 0)),this.onClick=(Di(this,b),e=>{this.logger.debug("onClickOverlay"),e.preventDefault(),this.ea.publish(Ie.channel,{type:Ae.OPEN,overlay:{title:this.title,abstract:this.abstract,url:this.url,cancelTitle:this.cancelTitle,actionTitle:this.actionTitle}})})}attaching(){this.logger.trace("Attaching")}attached(){this.logger.trace("Attached"),this.element.addEventListener("click",this.onClick)}detaching(){this.logger.trace("Detaching"),this.element.removeEventListener("click",this.onClick)}},y=t,"symbol"==typeof(O="OverlayTrigger")&&(O=O.description?"[".concat(O.description,"]"):""),Object.defineProperty(y,"name",{configurable:!0,value:k?"".concat(k," ",O):O}),(()=>{const y="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],n=[(0,E._t)()],a=[(0,E._t)()],s=[(0,E._t)()],l=[(0,E._t)()],Li(null,null,i,{kind:"field",name:"title",static:!1,private:!1,access:{has:e=>"title"in e,get:e=>e.title,set:(e,t)=>{e.title=t}},metadata:y},c,d),Li(null,null,n,{kind:"field",name:"abstract",static:!1,private:!1,access:{has:e=>"abstract"in e,get:e=>e.abstract,set:(e,t)=>{e.abstract=t}},metadata:y},h,u),Li(null,null,a,{kind:"field",name:"url",static:!1,private:!1,access:{has:e=>"url"in e,get:e=>e.url,set:(e,t)=>{e.url=t}},metadata:y},p,g),Li(null,null,s,{kind:"field",name:"actionTitle",static:!1,private:!1,access:{has:e=>"actionTitle"in e,get:e=>e.actionTitle,set:(e,t)=>{e.actionTitle=t}},metadata:y},m,f),Li(null,null,l,{kind:"field",name:"cancelTitle",static:!1,private:!1,access:{has:e=>"cancelTitle"in e,get:e=>e.cancelTitle,set:(e,t)=>{e.cancelTitle=t}},metadata:y},v,b),Li(null,e={value:t},o,{kind:"class",name:t.name,metadata:y},null,r),t=e.value,y&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:y}),Di(t,r)})(),t;var y,O,k})();var Fi=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Ai=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Mi=(()=>{let e,t,i,n,a,s,l,o=[(0,E.U4)("blackcube-notification-trigger")],r=[],c=[],d=[],h=[],u=[],p=[],g=[],m=[],f=[],v=[],b=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("NotificationTrigger"),t=(0,w.hd)(w.xe),i=(0,w.hd)(E.r_),n=(0,w.hd)(E.w3)){this.logger=e,this.ea=t,this.platform=i,this.element=n,this.title=Ai(this,c,""),this.type=(Ai(this,d),Ai(this,h,se.CHECK)),this.content=(Ai(this,u),Ai(this,p,"")),this.duration=(Ai(this,g),Ai(this,m,5e3)),this.closeOverlay=(Ai(this,f),Ai(this,v,!1)),Ai(this,b),this.logger=e,this.ea=t,this.platform=i,this.element=n,this.logger.trace("constructor")}attaching(){this.logger.trace("Attaching")}attached(){this.logger.trace("Send Notification"),this.platform.taskQueue.queueTask((()=>{this.ea.publish(he.channel,{type:le.CREATE,notification:{title:this.title,type:this.type,content:this.content,duration:this.duration}}),this.closeOverlay&&this.ea.publish(Ie.channel,{type:Ae.CLOSE})}))}},y=t,"symbol"==typeof(O="NotificationTrigger")&&(O=O.description?"[".concat(O.description,"]"):""),Object.defineProperty(y,"name",{configurable:!0,value:k?"".concat(k," ",O):O}),(()=>{const y="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],n=[(0,E._t)()],a=[(0,E._t)()],s=[(0,E._t)()],l=[(0,E._t)()],Fi(null,null,i,{kind:"field",name:"title",static:!1,private:!1,access:{has:e=>"title"in e,get:e=>e.title,set:(e,t)=>{e.title=t}},metadata:y},c,d),Fi(null,null,n,{kind:"field",name:"type",static:!1,private:!1,access:{has:e=>"type"in e,get:e=>e.type,set:(e,t)=>{e.type=t}},metadata:y},h,u),Fi(null,null,a,{kind:"field",name:"content",static:!1,private:!1,access:{has:e=>"content"in e,get:e=>e.content,set:(e,t)=>{e.content=t}},metadata:y},p,g),Fi(null,null,s,{kind:"field",name:"duration",static:!1,private:!1,access:{has:e=>"duration"in e,get:e=>e.duration,set:(e,t)=>{e.duration=t}},metadata:y},m,f),Fi(null,null,l,{kind:"field",name:"closeOverlay",static:!1,private:!1,access:{has:e=>"closeOverlay"in e,get:e=>e.closeOverlay,set:(e,t)=>{e.closeOverlay=t}},metadata:y},v,b),Fi(null,e={value:t},o,{kind:"class",name:t.name,metadata:y},null,r),t=e.value,y&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:y}),Ai(t,r)})(),t;var y,O,k})();let Ni=(()=>{let e,t,i=[(0,E.U4)("blackcube-overlay-close")],n=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("OverlayClose"),t=(0,w.hd)(w.xe),i=(0,w.hd)(E.w3)){this.logger=e,this.ea=t,this.element=i,this.logger=e.scopeTo("OverlayClose")}attached(){this.logger.trace("Attaching"),this.ea.publish(Ie.channel,{type:Ae.CLOSE})}},a=t,"symbol"==typeof(s="OverlayClose")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n)})(),t;var a,s,l})();var Ii=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Ui=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let _i=(()=>{let e,t,i,n,a,s,l=[(0,E.U4)("blackcube-broadcast-element")],o=[],r=[],c=[],d=[],h=[],u=[],p=[],g=[],m=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("BroadcastElement"),t=(0,w.hd)(w.xe),i=(0,w.hd)(E.w3)){this.logger=e,this.ea=t,this.element=i,this.event=Ui(this,r,void 0),this.events=(Ui(this,c),Ui(this,d,void 0)),this.type=(Ui(this,h),Ui(this,u,void 0)),this.id=(Ui(this,p),Ui(this,g,void 0)),Ui(this,m),this.logger=e,this.ea=t,this.element=i}attached(){this.logger.trace("Attaching"),this.event?this.ea.publish(qt.channel,{type:this.event,data:{type:this.type,id:this.id}}):this.events&&this.events.forEach((e=>{this.ea.publish(qt.channel,{type:e,data:{type:this.type,id:this.id}})}))}},f=t,"symbol"==typeof(v="BroadcastElement")&&(v=v.description?"[".concat(v.description,"]"):""),Object.defineProperty(f,"name",{configurable:!0,value:b?"".concat(b," ",v):v}),(()=>{const f="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],n=[(0,E._t)()],a=[(0,E._t)()],s=[(0,E._t)()],Ii(null,null,i,{kind:"field",name:"event",static:!1,private:!1,access:{has:e=>"event"in e,get:e=>e.event,set:(e,t)=>{e.event=t}},metadata:f},r,c),Ii(null,null,n,{kind:"field",name:"events",static:!1,private:!1,access:{has:e=>"events"in e,get:e=>e.events,set:(e,t)=>{e.events=t}},metadata:f},d,h),Ii(null,null,a,{kind:"field",name:"type",static:!1,private:!1,access:{has:e=>"type"in e,get:e=>e.type,set:(e,t)=>{e.type=t}},metadata:f},u,p),Ii(null,null,s,{kind:"field",name:"id",static:!1,private:!1,access:{has:e=>"id"in e,get:e=>e.id,set:(e,t)=>{e.id=t}},metadata:f},g,m),Ii(null,e={value:t},l,{kind:"class",name:t.name,metadata:f},null,o),t=e.value,f&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f}),Ui(t,o)})(),t;var f,v,b})();let zi=(()=>{let e,t,i=[(0,E.U4)("blackcube-toggle-dependencies")],n=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("ToggleDependencies"),t=(0,w.hd)(w.xe),i=(0,w.hd)(E.w3)){this.logger=e,this.ea=t,this.element=i,this.target="data-dependency",this.source="data-dependency-source",this.onChange=e=>{e.currentTarget.checked?this.activateFields():this.deactivateFields()}}attached(){this.toggleElement=this.element.querySelector("["+this.source+"]"),this.toggleElement&&(this.toggleTargets=this.element.querySelectorAll("["+this.target+"]"),this.toggleElement.checked?this.activateFields():this.deactivateFields(),this.toggleElement.addEventListener("change",this.onChange))}detaching(){this.toggleElement&&this.toggleElement.removeEventListener("change",this.onChange)}activateFields(){this.toggleTargets.forEach((e=>{e.classList.remove("opacity-50"),e.querySelectorAll("input, select").forEach((e=>{e.disabled=!1}))}))}deactivateFields(){this.toggleTargets.forEach((e=>{e.classList.add("opacity-50"),e.querySelectorAll("input, select").forEach((e=>{e.disabled=!0}))}))}},a=t,"symbol"==typeof(s="ToggleDependencies")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n)})(),t;var a,s,l})();var Bi=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},qi=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Hi=(()=>{let e,t,i,n,a,s=[(0,E.U4)("blackcube-fold")],l=[],o=[],r=[],c=[],d=[],h=[],u=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("Fold"),t=(0,w.hd)(E.r_),i=(0,w.hd)(L),n=(0,w.hd)(C),a=(0,w.hd)(E.w3)){this.logger=e,this.platform=t,this.httpService=i,this.storageService=n,this.element=a,this.elementId=qi(this,o,void 0),this.elementType=(qi(this,r),qi(this,c,void 0)),this.elementSubData=(qi(this,d),qi(this,h,void 0)),this.onDelegateEvent=(qi(this,u),e=>{if(e.target){const t=e.target.closest("[data-fold]");t&&(t.dataset.fold,e.preventDefault(),e.stopPropagation(),this.toggle())}})}attaching(){this.logger.trace("Attaching")}attached(){var e,t,i,n,a,s;this.targetElement=this.element.querySelector("[data-target-fold]"),this.openElement=this.element.querySelector("[data-fold=down]"),this.closeElement=this.element.querySelector("[data-fold=up]"),this.element.addEventListener("click",this.onDelegateEvent),this.logger.trace("Attached"),this.storageService.getElementOpened(this.elementType,this.elementSubData,this.elementId)?(null===(e=this.openElement)||void 0===e||e.classList.remove("hidden"),null===(t=this.closeElement)||void 0===t||t.classList.add("hidden"),null===(i=this.targetElement)||void 0===i||i.classList.remove("hidden")):(null===(n=this.openElement)||void 0===n||n.classList.add("hidden"),null===(a=this.closeElement)||void 0===a||a.classList.remove("hidden"),null===(s=this.targetElement)||void 0===s||s.classList.add("hidden"))}detaching(){this.logger.trace("Detaching"),this.element.removeEventListener("click",this.onDelegateEvent)}toggle(){var e,t,i,n,a,s,l;(null===(e=this.targetElement)||void 0===e?void 0:e.classList.contains("hidden"))?(null===(t=this.openElement)||void 0===t||t.classList.remove("hidden"),null===(i=this.closeElement)||void 0===i||i.classList.add("hidden"),null===(n=this.targetElement)||void 0===n||n.classList.remove("hidden"),this.storageService.setElementOpened(this.elementType,this.elementSubData,this.elementId)):(null===(a=this.openElement)||void 0===a||a.classList.add("hidden"),null===(s=this.closeElement)||void 0===s||s.classList.remove("hidden"),null===(l=this.targetElement)||void 0===l||l.classList.add("hidden"),this.storageService.setElementClosed(this.elementType,this.elementSubData,this.elementId))}},p=t,"symbol"==typeof(g="Fold")&&(g=g.description?"[".concat(g.description,"]"):""),Object.defineProperty(p,"name",{configurable:!0,value:m?"".concat(m," ",g):g}),(()=>{const p="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],n=[(0,E._t)()],a=[(0,E._t)()],Bi(null,null,i,{kind:"field",name:"elementId",static:!1,private:!1,access:{has:e=>"elementId"in e,get:e=>e.elementId,set:(e,t)=>{e.elementId=t}},metadata:p},o,r),Bi(null,null,n,{kind:"field",name:"elementType",static:!1,private:!1,access:{has:e=>"elementType"in e,get:e=>e.elementType,set:(e,t)=>{e.elementType=t}},metadata:p},c,d),Bi(null,null,a,{kind:"field",name:"elementSubData",static:!1,private:!1,access:{has:e=>"elementSubData"in e,get:e=>e.elementSubData,set:(e,t)=>{e.elementSubData=t}},metadata:p},h,u),Bi(null,e={value:t},s,{kind:"class",name:t.name,metadata:p},null,l),t=e.value,p&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:p}),qi(t,l)})(),t;var p,g,m})();var Ri=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Vi=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Wi=(()=>{let e,t,i,n=[(0,E.U4)("blackcube-url-generator")],a=[],s=[],l=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("UrlGenerator"),t=(0,w.hd)(E.r_),i=(0,w.hd)(L),n=(0,w.hd)(E.w3)){this.logger=e,this.platform=t,this.httpService=i,this.element=n,this.button=null,this.target=null,this.url=Vi(this,s,null),this.onDelegateEvent=(Vi(this,l),e=>{e.preventDefault(),this.logger.trace("onDelegateEvent",this.url),this.httpService.fetch(this.url).then((e=>e.ok&&200===e.status?e.json():Promise.reject(e))).then((e=>{this.logger.trace("onDelegateEvent",e),this.target.value=e.url})).catch((e=>{this.logger.warn("onDelegateEvent: error",e)}))})}attaching(){this.logger.trace("Attaching")}attached(){this.button=this.element.querySelector("[data-url-generator=button]"),this.target=this.element.querySelector("[data-url-generator=target]"),this.button&&this.target&&this.button.addEventListener("click",this.onDelegateEvent),this.logger.trace("Attached")}detaching(){this.logger.trace("Detaching"),this.button&&this.target&&this.button.removeEventListener("click",this.onDelegateEvent)}},o=t,"symbol"==typeof(r="UrlGenerator")&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(o,"name",{configurable:!0,value:c?"".concat(c," ",r):r}),(()=>{const o="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)({primary:!0})],Ri(null,null,i,{kind:"field",name:"url",static:!1,private:!1,access:{has:e=>"url"in e,get:e=>e.url,set:(e,t)=>{e.url=t}},metadata:o},s,l),Ri(null,e={value:t},n,{kind:"class",name:t.name,metadata:o},null,a),t=e.value,o&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o}),Vi(t,a)})(),t;var o,r,c})();let Gi=(()=>{let e,t,i=[(0,E.U4)("blackcube-view-edit")],n=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("ViewEdit"),t=(0,w.hd)(E.r_),i=(0,w.hd)(E.w3)){this.logger=e,this.platform=t,this.element=i,this.onToggleEvent=e=>{this.elements.forEach((e=>{e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden")}))}}attaching(){this.logger.trace("Attaching")}attached(){var e;this.elements=this.element.querySelectorAll("[data-view-edit]"),this.toggleButton=this.element.querySelector("[data-view-edit=toggle] button"),null===(e=this.toggleButton)||void 0===e||e.addEventListener("click",this.onToggleEvent)}detaching(){var e;this.logger.trace("Detaching"),null===(e=this.toggleButton)||void 0===e||e.removeEventListener("click",this.onToggleEvent)}},a=t,"symbol"==typeof(s="ViewEdit")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n)})(),t;var a,s,l})();var $i=i(853);let Ki=(()=>{let e,t,i=[(0,E.U4)("blackcube-attach-device")],n=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("AttachDevice"),t=(0,w.hd)($i.j7),i=(0,w.hd)(E.r_),n=(0,w.hd)(E.w3)){this.logger=e,this.webauthnService=t,this.platform=i,this.element=n,this.onDelegateEvent=e=>{e.preventDefault(),this.logger.trace("onDelegateEvent"),this.webauthnService.attachDevice().then((e=>{e?(this.logger.debug("Attach success"),this.platform.window.location.reload()):this.logger.error("Attach failed")}))}}attaching(){this.logger.trace("Attaching"),this.webauthnService.isAvailable().then((e=>{e?this.logger.debug("WebAuthn is available"):(this.logger.debug("WebAuthn is not available"),this.element.remove())}))}attached(){this.element.addEventListener("click",this.onDelegateEvent),this.logger.trace("Attached")}detaching(){this.logger.trace("Detaching"),this.element.removeEventListener("click",this.onDelegateEvent)}},a=t,"symbol"==typeof(s="AttachDevice")&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:l?"".concat(l," ",s):s}),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0})(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,n),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e)}(t,n)})(),t;var a,s,l})();var Xi=function(e,t,i,n,a,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,r=n.kind,c="getter"===r?"get":"setter"===r?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u=!1,p=i.length-1;p>=0;p--){var g={};for(var m in n)g[m]="access"===m?{}:n[m];for(var m in n.access)g.access[m]=n.access[m];g.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var f=(0,i[p])("accessor"===r?{get:h.get,set:h.set}:h[c],g);if("accessor"===r){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=l(f.get))&&(h.get=o),(o=l(f.set))&&(h.set=o),(o=l(f.init))&&a.unshift(o)}else(o=l(f))&&("field"===r?a.unshift(o):h[c]=o)}d&&Object.defineProperty(d,n.name,h),u=!0},Qi=function(e,t,i){for(var n=arguments.length>2,a=0;a<t.length;a++)i=n?t[a].call(e,i):t[a].call(e);return n?i:void 0};let Ji=(()=>{let e,t,i,n=[(0,E.U4)("blackcube-login-device")],a=[],s=[],l=[];return t=class{constructor(e=(0,w.hd)(w.gF).scopeTo("LoginDevice"),t=(0,w.hd)(E.r_),i=(0,w.hd)($i.j7),n=(0,w.hd)(E.w3)){this.logger=e,this.platform=t,this.webauthnService=i,this.element=n,this.targetUrl=Qi(this,s,""),this.onDelegateEvent=(Qi(this,l),e=>{e.preventDefault(),this.logger.trace("onDelegateEvent"),this.webauthnService.loginDevice().then((e=>{e?(this.logger.debug("Attach success"),this.platform.window.location.href=this.targetUrl):this.logger.error("Attach failed")}))})}attaching(){this.logger.trace("Attaching"),this.webauthnService.isAvailable().then((e=>{e?(this.element.classList.remove("hidden"),this.logger.debug("WebAuthn is available")):(this.logger.debug("WebAuthn is not available"),this.element.remove())}))}attached(){this.element.addEventListener("click",this.onDelegateEvent),this.logger.trace("Attached")}detaching(){this.logger.trace("Detaching"),this.element.removeEventListener("click",this.onDelegateEvent)}},o=t,"symbol"==typeof(r="LoginDevice")&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(o,"name",{configurable:!0,value:c?"".concat(c," ",r):r}),(()=>{const o="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,E._t)()],Xi(null,null,i,{kind:"field",name:"targetUrl",static:!1,private:!1,access:{has:e=>"targetUrl"in e,get:e=>e.targetUrl,set:(e,t)=>{e.targetUrl=t}},metadata:o},s,l),Xi(null,e={value:t},n,{kind:"class",name:t.name,metadata:o},null,a),t=e.value,o&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o}),Qi(t,a)})(),t;var o,r,c})();window.webpackBaseUrl&&(i.p=webpackBaseUrl);const Zi=document.querySelector("body");y.Ay.register(b).register(v).register($i.jg.configure({prepareAttachDeviceUrl:ajaxBaseUrl+"/prepare-attach-device",prepareRegisterDeviceUrl:ajaxBaseUrl+"/prepare-register-device",validateRegisterUrl:ajaxBaseUrl+"/validate-register",prepareLoginUrl:ajaxBaseUrl+"/prepare-login",prepareLoginDeviceUrl:ajaxBaseUrl+"/prepare-login-device",validateLoginUrl:ajaxBaseUrl+"/validate-login"})).enhance({host:Zi,component:class{constructor(e=(0,w.hd)(w.gF).scopeTo("Enhance")){this.logger=e}attaching(){this.logger.trace("Attaching")}}})}},e=>{e.O(0,[96],(()=>e(e.s=607))),e.O()}]);