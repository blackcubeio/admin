(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{11:function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.AjaxService=void 0;var i=o("aurelia-framework"),r=o(36),a=function(){function e(e){this.logger=i.LogManager.getLogger("services.AjaxService"),this.modal=null,this.httpClient=e,this.httpClient.configure((function(e){e.withDefaults({headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"include"})})),this.logger.debug("Constructor")}return e.prototype.getBlocs=function(e,t){return this.logger.debug("getBlocs",e),this.httpClient.fetch(e,{method:"post",body:t})},e.prototype.getModal=function(){return this.logger.debug("getModal"),null===this.modal&&(this.modal=this.httpClient.fetch("/admin/ajax/modal",{method:"get"}).then((function(e){return e.text()}))),this.modal},e.prototype.getDetailModal=function(e,t){return this.logger.debug("getDetailModal"),this.modal=this.httpClient.fetch("/admin/ajax/modal?id="+t+"&type="+e,{method:"get"}).then((function(e){return e.text()})),this.modal},e.prototype.getRequest=function(e){return this.logger.debug("getRequest"),this.httpClient.fetch(e,{method:"get"}).then((function(e){return e.text()}))},e.prototype.getRequestJson=function(e){return this.logger.debug("getRequestJson",e),this.httpClient.fetch(e,{method:"get",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()}))},e.prototype.postRequest=function(e,t){return this.logger.debug("postRequest",e),this.httpClient.fetch(e,{method:"post",body:t}).then((function(e){return e.text()}))},e.prototype.postRequestJson=function(e,t){return this.logger.debug("postRequest",e),this.httpClient.fetch(e,{method:"post",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)}).then((function(e){if(200===e.status)return e.json();throw new Error("Nothing found")}))},e.prototype.deleteRequest=function(e,t){return void 0===t&&(t=""),this.logger.debug("deleteRequest"),this.httpClient.fetch(e,{method:"delete",headers:{"X-CSRF-Token":t}})},e.prototype.updateRbac=function(e,t){return this.logger.debug("updateRbac"),this.httpClient.fetch(e,{method:"post",body:t})},e=n([i.inject(r.HttpClient)],e)}();t.AjaxService=a},14:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorageService=void 0;var n=function(){function e(){}return e.prototype.getElementOpened=function(e,t,o){return""!==o&&""!==t&&""!==e&&"1"===localStorage.getItem("admin:element:"+e+"-"+o+":"+t+":opened")},e.prototype.setElementOpened=function(e,t,o){""!==o&&""!==t&&""!==e&&localStorage.setItem("admin:element:"+e+"-"+o+":"+t+":opened","1")},e.prototype.setElementClosed=function(e,t,o){""!==o&&""!==t&&""!==e&&localStorage.removeItem("admin:element:"+e+"-"+o+":"+t+":opened")},e.prototype.getSectionOpened=function(e,t){return""!==t&&""!==e&&"1"===localStorage.getItem("admin:section:"+e+"-"+t+":opened")},e.prototype.setSectionOpened=function(e,t){""!==t&&""!==e&&localStorage.setItem("admin:section:"+e+"-"+t+":opened","1")},e.prototype.setSectionClosed=function(e,t){""!==t&&""!==e&&localStorage.removeItem("admin:section:"+e+"-"+t+":opened")},e.prototype.getElementSlugOpened=function(e){return""!==e&&"1"===localStorage.getItem("admin:element:"+e+":slug:opened")},e.prototype.setElementSlugOpened=function(e){""!==e&&localStorage.setItem("admin:element:"+e+":slug:opened","1")},e.prototype.setElementSlugClosed=function(e){""!==e&&localStorage.removeItem("admin:element:"+e+":slug:opened")},e}();t.StorageService=n},24:function(e,t,o){o(25),o(30),e.exports=o(31)},28:function(e,t){},30:function(e,t,o){void 0!==webpackBaseUrl&&(o.p=webpackBaseUrl)},31:function(e,t,o){"use strict";var n=this;Object.defineProperty(t,"__esModule",{value:!0});var i=o(32);o("aurelia-framework");i.bootstrap((function(e){e.use.standardConfiguration().plugin("aurelia-validation").plugin("components/index"),e.start().then((function(){return e.enhance(document)})),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;var t=n;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1==t.nodeType);return null})}))},"components/BlackcubeAjaxifyCustomAttribute":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeAjaxifyCustomAttribute=void 0;var i,r=o("aurelia-framework"),a=o(11);!function(e){e.CLICK="click",e.DBLCLICK="dblclick",e.INPUT="input",e.CHANGE="change",e.SUBMIT="submit",e.BLUR="blur",e.FOCUS="focus"}(i||(i={}));var l=function(){function e(e,t,o){var n=this;this.logger=r.LogManager.getLogger("components.BlackcubeAjaxify"),this.onDelegateEvent=function(e){if(e.target){var t=e.target.closest("[data-ajaxify-source]");if(t&&n.element.contains(t)){var o=t.dataset.ajaxifySource,r=null,a=null,l=null;if(o&&(r="[data-ajaxify-target="+o+"]"),null!==r&&((l=n.element.querySelector(r))||n.element.dataset.ajaxifyTarget!==o||(l=n.element)),n.event===i.SUBMIT){var s=t.closest("form");if(s)if("post"===s.method.toLowerCase()){var c=new FormData(s);t.hasAttribute("name")&&t.hasAttribute("value")&&c.append(t.name,t.value),e.preventDefault(),n.ajaxService.postRequest(s.action,c).then((function(e){l.innerHTML=e,!1===n.element.isSameNode(l)&&n.templatingEngine.enhance({element:l,bindingContext:n})})).catch((function(e){n.logger.warn("Error while submitting URL",e)}))}else n.logger.warn("Unhandled form method : ",s.method)}else t&&t.dataset.ajaxifyUrl?a=t.dataset.ajaxifyUrl:t&&t.href&&(a=t.href),null!==a&&(e.preventDefault(),n.ajaxService.getRequest(a).then((function(e){l.innerHTML=e,!1===n.element.isSameNode(l)&&n.templatingEngine.enhance({element:l,bindingContext:n})})).catch((function(e){n.logger.warn("Error while requesting URL",e)})))}}},this.element=e,this.templatingEngine=t,this.ajaxService=o,this.logger.debug("Constructor")}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){this.logger.debug("Attached"),this.element.addEventListener(this.event,this.onDelegateEvent)},e.prototype.detached=function(){this.logger.debug("Detached"),this.element.removeEventListener(this.event,this.onDelegateEvent)},e.prototype.unbind=function(){this.logger.debug("Unbind")},n([r.bindable({primaryProperty:!0})],e.prototype,"event",void 0),e=n([r.inject(r.DOM.Element,r.TemplatingEngine,a.AjaxService)],e)}();t.BlackcubeAjaxifyCustomAttribute=l},"components/BlackcubeAttachModalCustomAttribute":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeAttachModalCustomAttribute=void 0;var i=o("aurelia-framework"),r=o(11),a=function(){function e(e,t){var o=this;this.logger=i.LogManager.getLogger("components.AttachModal"),this.ready=!1,this.readyCount=0,this.onDelegateSubmit=function(e){if(e.target&&(o.currentForm=e.target.closest("form[data-ajax-modal]"),o.currentForm&&o.element.contains(o.currentForm))){e.preventDefault();var t=o.currentForm.dataset.ajaxModal;t&&o.ajaxService.getRequest(t).then((function(e){o.modalView=e,o.attachModal()}))}},this.onSubmitOk=function(e){o.detachModal(),o.currentForm.submit()},this.onClose=function(e){o.detachModal()},this.element=e,this.logger.debug("Constructor"),this.ajaxService=t}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){this.logger.debug("Attached"),this.element.addEventListener("submit",this.onDelegateSubmit)},e.prototype.detached=function(){this.element.removeEventListener("submit",this.onDelegateSubmit),this.logger.debug("Detached")},e.prototype.attachModal=function(){document.body.insertAdjacentHTML("afterbegin",this.modalView),this.modal=document.querySelector("#modal-delete"),this.backdrop=document.querySelector("#modal-delete-backdrop"),this.modalCross=this.modal.querySelector("#modal-delete-cross"),this.modalClose=this.modal.querySelector("#modal-delete-close"),this.modalOk=this.modal.querySelector("#modal-delete-ok"),this.modalClose.addEventListener("click",this.onClose),this.modalCross.addEventListener("click",this.onClose),this.modal.addEventListener("click",this.onClose),this.modalOk.addEventListener("click",this.onSubmitOk)},e.prototype.detachModal=function(){this.modalClose&&this.modalClose.removeEventListener("click",this.onClose),this.modalCross&&this.modalCross.removeEventListener("click",this.onClose),this.modalOk&&this.modalOk.removeEventListener("click",this.onSubmitOk),this.modal&&(this.modal.removeEventListener("click",this.onClose),this.modal.remove()),this.backdrop&&this.backdrop.remove()},e.prototype.unbind=function(){this.logger.debug("Unbind")},n([i.bindable({primaryProperty:!0})],e.prototype,"url",void 0),e=n([i.inject(i.DOM.Element,r.AjaxService)],e)}();t.BlackcubeAttachModalCustomAttribute=a},"components/BlackcubeBlocsCustomAttribute":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeBlocsCustomAttribute=void 0;var i=o("aurelia-framework"),r=o(11),a=function(){function e(e,t,o){var n=this;this.logger=i.LogManager.getLogger("components.ManageBlocs"),this.onDelegateClick=function(e){if(e.target){var t=e.target.closest("button[type=button]");if(t&&n.element.contains(t)&&(n.logger.debug("delegateClick"),t.name)){var o=new FormData(n.form);o.append(t.name,t.value),n.ajaxService.getBlocs(n.url,o).then((function(e){200==e.status&&e.text().then((function(e){n.ajaxTarget.innerHTML=e,n.templatingEngine.enhance({element:n.ajaxTarget,bindingContext:n});var t=new Event("blackcube-bloc-ready",{bubbles:!0});n.element.dispatchEvent(t),n.logger.debug("Event Sent")}))}))}}},this.element=e,this.templatingEngine=t,this.ajaxService=o,this.logger.debug("Constructor")}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){this.logger.debug("Attached"),this.logger.debug(this.url),this.form=this.element.closest("form"),this.ajaxTarget=this.element.querySelector("[data-ajax-target]"),null===this.ajaxTarget&&(this.ajaxTarget=this.element),this.element.addEventListener("click",this.onDelegateClick)},e.prototype.detached=function(){this.logger.debug("Detached"),this.element.removeEventListener("click",this.onDelegateClick)},e.prototype.unbind=function(){this.logger.debug("Unbind")},n([i.bindable({primaryProperty:!0})],e.prototype,"url",void 0),e=n([i.inject(i.DOM.Element,i.TemplatingEngine,r.AjaxService)],e)}();t.BlackcubeBlocsCustomAttribute=a},"components/BlackcubeChoicesCustomAttribute":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeChoicesCustomAttribute=void 0;var r=o("aurelia-framework"),a=o(11),l=i(o(40)),s=function(){function e(e,t){this.logger=r.LogManager.getLogger("components.ChoicesManager"),this.element=e,this.logger.debug("Constructor"),this.ajaxService=t}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){this.logger.debug("Attached"),this.choices=new l.default(this.element,{removeItemButton:!0,searchFields:["label"]})},e.prototype.detached=function(){this.logger.debug("Detached")},e.prototype.unbind=function(){this.logger.debug("Unbind")},e=n([r.inject(r.DOM.Element,a.AjaxService)],e)}();t.BlackcubeChoicesCustomAttribute=s},"components/BlackcubeCompositesCustomAttribute":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeCompositesCustomAttribute=void 0;var i=o("aurelia-framework"),r=o(11),a=function(){function e(e,t,o){var n=this;this.logger=i.LogManager.getLogger("components.ManageComposites"),this.onDelegateClick=function(e){if(e.target){var t=e.target.closest("button[type=button]");if(t&&n.element.contains(t)&&(n.logger.debug("delegateClick"),t.name)){var o=new FormData(n.form);o.append(t.name,t.value),n.ajaxService.getBlocs(n.url,o).then((function(e){200==e.status&&e.text().then((function(e){n.ajaxTarget.innerHTML=e,n.templatingEngine.enhance({element:n.ajaxTarget,bindingContext:n})}))}))}}},this.element=e,this.templatingEngine=t,this.ajaxService=o,this.logger.debug("Constructor")}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){this.logger.debug("Attached"),this.logger.debug(this.url),this.form=this.element.closest("form"),this.ajaxTarget=this.element.querySelector("[data-ajax-target]"),null===this.ajaxTarget&&(this.ajaxTarget=this.element),this.element.addEventListener("click",this.onDelegateClick)},e.prototype.detached=function(){this.logger.debug("Detached"),this.element.removeEventListener("click",this.onDelegateClick)},e.prototype.unbind=function(){this.logger.debug("Unbind")},n([i.bindable({primaryProperty:!0})],e.prototype,"url",void 0),e=n([i.inject(i.DOM.Element,i.TemplatingEngine,r.AjaxService)],e)}();t.BlackcubeCompositesCustomAttribute=a},"components/BlackcubeControllerActionCustomAttribute":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeControllerActionCustomAttribute=void 0;var i=o("aurelia-framework"),r=o(11),a=function(){function e(e,t){var o=this;this.logger=i.LogManager.getLogger("components.BlackcubeControllerAction"),this.onChange=function(e){var t=e.currentTarget,n=o.url.replace("__controller__",t.value);o.ajaxService.getRequestJson(n).then((function(e){o.logger.debug("body");for(var n=o.targetElement.options.length-1;n>=0;n--)o.targetElement.options[n].remove();e.forEach((function(e){var n=document.createElement("option");n.value=e.id,n.label=e.name,t.value===o.originalSourceValue&&n.value===o.originalTargetValue&&(n.selected=!0),o.targetElement.options.add(n)}))})),o.logger.debug("onChange",t.value)},this.element=e,this.ajaxService=t,this.logger.debug("Constructor")}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){this.sourceElement=this.element.querySelector("[data-controller-action=source]"),this.originalSourceValue=this.sourceElement.value,this.targetElement=this.element.querySelector("[data-controller-action=target]"),this.originalTargetValue=this.targetElement.value,this.sourceElement.addEventListener("change",this.onChange),this.logger.debug("Attached")},e.prototype.detached=function(){this.sourceElement.removeEventListener("change",this.onChange),this.logger.debug("Detached")},e.prototype.unbind=function(){this.logger.debug("Unbind")},n([i.bindable({primaryProperty:!0})],e.prototype,"url",void 0),e=n([i.inject(i.DOM.Element,r.AjaxService)],e)}();t.BlackcubeControllerActionCustomAttribute=a},"components/BlackcubeEditorJsCustomElement":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeEditorJsCustomElement=void 0;var r=o("aurelia-framework"),a=i(o(42)),l=i(o(43)),s=i(o(44)),c=i(o(45)),d=i(o(46)),u=i(o(47)),g=i(o(48)),h=i(o(49)),p=i(o(50)),f=function(){function e(e){var t=this;this.logger=r.LogManager.getLogger("components.EditorJs"),this.onEditorJsChange=function(e){t.logger.debug("Data changed"),t.editorJs.save().then((function(e){var o=JSON.stringify(e);t.hiddenField.value=o})).catch((function(e){t.logger.error("save failed")}))},this.element=e,this.logger.debug("Constructor")}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){this.hiddenField.name=this.fieldName,this.hiddenField.id=this.fieldId,this.hiddenField.value=this.fieldValue,this.initEditorJs(),this.logger.debug("Attached")},e.prototype.detached=function(){this.logger.debug("Detached")},e.prototype.unbind=function(){this.logger.debug("Unbind")},e.prototype.initEditorJs=function(){var e={blocks:[]};try{e=JSON.parse(this.hiddenField.value)}catch(e){this.logger.debug("Data read failed")}this.editorJs=new a.default({holder:this.editorContent,placeholder:"Start writing",onChange:this.onEditorJsChange,minHeight:50,tools:{header:{class:l.default,config:{placeholder:"Start to write a header",levels:[1,2,3,4,5,6],defaultLevel:2}},raw:{class:s.default,config:{placeholder:"Start to write HTML code"}},list:{class:c.default,inlineToolbar:!0,config:{placeholder:"Start to write your list"}},quote:{class:d.default,inlineToolbar:!0,shortcut:"CMD+SHIFT+O",config:{quotePlaceholder:"Start to write a quote",captionPlaceholder:"Caption"}},embed:{class:u.default,inlineToolbar:!0,config:{services:{youtube:!0,vimeo:!0}}},marker:{class:g.default,shortcut:"CMD+SHIFT+M"},paragraph:{class:h.default,inlineToolbar:!0,config:{placeholder:"Start to write something"}},delimiter:{class:p.default}},data:e})},n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"fieldId",void 0),n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"fieldName",void 0),n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"fieldValue",void 0),e=n([r.inject(r.DOM.Element)],e)}();t.BlackcubeEditorJsCustomElement=f},"components/BlackcubeEditorJsCustomElement.html":function(e,t){e.exports='<template> <input type="hidden" ref="hiddenField"> <div ref="editorContent"> </div> </template> '},"components/BlackcubeFileCustomElement":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeFileCustomElement=void 0;var r=o("aurelia-framework"),a=o(11),l=i(o(37)),s=i(o(38)),c=function(){function e(e,t){var o=this;this.logger=r.LogManager.getLogger("components.BlackcubeFile"),this.uploadCount=0,this.fileType="",this.multiple=!1,this.value="",this.onRemove=function(e){o.logger.debug("Should remove file",e);var t=null;o.handledFiles.forEach((function(o,n){e.name===o.name&&(t=n)})),null!==t&&t>=0&&(e.file&&null!==e.file&&o.resumable.removeFile(e.file),o.handledFiles.splice(t,1),o.ajaxService.deleteRequest(e.deleteUrl,o.csfr.value));var n=o.getFilesValue();o.hiddenField.value=n},this.onDragEnter=function(e){e.preventDefault();var t=e.currentTarget,o=e.dataTransfer;o&&o.types.indexOf("Files")>=0?(e.stopPropagation(),o.dropEffect="copy",o.effectAllowed="copy",t.classList.add("dragover")):o&&(o.dropEffect="none",o.effectAllowed="none")},this.onDragLeave=function(e){e.currentTarget.classList.remove("dragover")},this.onFileAdded=function(e,t){o.logger.debug("onFileAdded",e,t),o.resumable.upload()},this.onFileSuccess=function(e,t){var n=JSON.parse(t);!1===o.multiple?o.setFile("@blackcubetmp/"+n.finalFilename,e):o.appendFile("@blackcubetmp/"+n.finalFilename,e),o.logger.debug("onFileSuccess",e,t)},this.onFileProgress=function(e,t){o.logger.debug("onFileProgress",e,t)},this.onFilesAdded=function(e,t){o.logger.debug("onFilesAdded",e,t)},this.onFileRetry=function(e){o.logger.debug("onFileRetry",e)},this.onFileError=function(e,t){o.logger.debug("onFileError",e,t)},this.onUploadStart=function(){o.logger.debug("onUploadStart"),o.handleUploadIcon(1)},this.onComplete=function(){o.logger.debug("onComplete"),o.handleUploadIcon(-1)},this.onProgress=function(){o.logger.debug("onProgress")},this.onError=function(e,t){o.logger.debug("onError",t,e)},this.onPause=function(){o.logger.debug("onPause")},this.onBeforeCancel=function(){o.logger.debug("onBeforeCancel")},this.onCancel=function(){o.logger.debug("onCancel"),o.handleUploadIcon(-1)},this.onChunkingStart=function(e){o.logger.debug("onChunkingStart",e)},this.onChunkingProgress=function(e,t){o.logger.debug("onChunkingProgressd",e,t)},this.onChunkingComplete=function(e){o.logger.debug("onChunkingComplete",e)},this.element=e,this.ajaxService=t,this.logger.debug("Constructor")}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.appendParametersUrl=function(e){var t=new s.default(e);return this.imageWidth&&t.addSearch({width:this.imageWidth}),this.imageHeight&&t.addSearch({height:this.imageHeight}),t.toString()},e.prototype.generatePreviewUrl=function(e){var t=this.previewUrl.replace("__name__",e);return this.appendParametersUrl(t)},e.prototype.generateDeleteUrl=function(e){return this.deleteUrl.replace("__name__",e)},e.prototype.setFiles=function(e){var t=this,o=e.split(/\s*,\s*/);this.handledFiles=o.filter((function(e,t){return""!==e.trim()})).map((function(e,o){return{name:e,shortname:e.split(/.*[\/|\\]/).pop(),previewUrl:t.generatePreviewUrl(e),deleteUrl:t.generateDeleteUrl(e)}})),this.hiddenField.value=this.getFilesValue()},e.prototype.setFile=function(e,t){var o=this;void 0===t&&(t=null),this.handledFiles.forEach((function(e,t){e.file&&null!==e.file&&o.resumable.removeFile(e.file),o.ajaxService.deleteRequest(e.deleteUrl,o.csfr.value)})),this.handledFiles=[{name:e,shortname:e.split(/.*[\/|\\]/).pop(),previewUrl:this.generatePreviewUrl(e),deleteUrl:this.generateDeleteUrl(e),file:t}],this.hiddenField.value=this.getFilesValue()},e.prototype.appendFile=function(e,t){void 0===t&&(t=null),this.handledFiles.push({name:e,shortname:e.split(/.*[\/|\\]/).pop(),previewUrl:this.generatePreviewUrl(e),deleteUrl:this.generateDeleteUrl(e),file:t}),this.hiddenField.value=this.getFilesValue()},e.prototype.getFilesValue=function(){var e=this.handledFiles.map((function(e,t){return e.name})).join(", ");return"string"==typeof e?e:""},e.prototype.attached=function(){this.parentForm=this.element.closest("form"),this.logger.debug("Multiple",this.multiple);var e={target:this.uploadUrl,chunkSize:524288},t=this.fileType.split(/\s*,\s*/).filter((function(e,t){return""!==e.trim()}));if(e.fileType=t,this.parentForm){var o=this.parentForm.querySelector("input[name=_csrf]");this.csfr={name:o.name,value:o.value},e.query={},e.query[this.csfr.name]=this.csfr.value,this.logger.debug("CSRF : ",o.value)}this.hiddenField=document.createElement("input"),this.hiddenField.type="hidden",this.hiddenField.name=this.name,this.element.appendChild(this.hiddenField),this.setFiles(this.value),this.resumable=new l.default(e),this.resumable.support&&(this.logger.debug("Resume js supported",this.browseButton),this.resumable.assignBrowse(this.browseButton,!1),this.resumable.assignDrop(this.browseButton),this.browseButton.addEventListener("dragover",this.onDragEnter),this.browseButton.addEventListener("dragenter",this.onDragEnter),this.browseButton.addEventListener("dragleave",this.onDragLeave),this.browseButton.addEventListener("drop",this.onDragLeave),this.resumable.on("fileAdded",this.onFileAdded),this.resumable.on("fileSuccess",this.onFileSuccess),this.resumable.on("fileProgress",this.onFileProgress),this.resumable.on("filesAdded",this.onFilesAdded),this.resumable.on("fileRetry",this.onFileRetry),this.resumable.on("fileError",this.onFileError),this.resumable.on("uploadStart",this.onUploadStart),this.resumable.on("complete",this.onComplete),this.resumable.on("progress",this.onProgress),this.resumable.on("error",this.onError),this.resumable.on("pause",this.onPause),this.resumable.on("beforeCancel",this.onBeforeCancel),this.resumable.on("cancel",this.onCancel),this.resumable.on("chunkingStart",this.onChunkingStart),this.resumable.on("chunkingProgress",this.onChunkingProgress),this.resumable.on("chunkingComplete",this.onChunkingComplete)),this.logger.debug("Attached")},e.prototype.handleUploadIcon=function(e){this.uploadCount=this.uploadCount+e,this.uploadCount>0?(this.uploadIcon.classList.contains("fa-cloud-upload-alt")&&this.uploadIcon.classList.remove("fa-cloud-upload-alt"),!1===this.uploadIcon.classList.contains("fa-circle-notch")&&this.uploadIcon.classList.add("fa-circle-notch","fa-spin","fa-5x")):(!1===this.uploadIcon.classList.contains("fa-cloud-upload-alt")&&this.uploadIcon.classList.add("fa-cloud-upload-alt"),this.uploadIcon.classList.contains("fa-circle-notch")&&this.uploadIcon.classList.remove("fa-circle-notch","fa-spin","fa-5x"))},Object.defineProperty(e.prototype,"getFiles",{get:function(){return this.resumable.support?this.resumable.files.map((function(e,t){return e.fileName})):[]},enumerable:!1,configurable:!0}),e.prototype.detached=function(){this.logger.debug("Detached")},e.prototype.unbind=function(){this.logger.debug("Unbind")},n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"uploadUrl",void 0),n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"previewUrl",void 0),n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"deleteUrl",void 0),n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"fileType",void 0),n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"name",void 0),n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"multiple",void 0),n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"value",void 0),n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"imageWidth",void 0),n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"imageHeight",void 0),e=n([r.inject(r.DOM.Element,a.AjaxService)],e)}();t.BlackcubeFileCustomElement=c},"components/BlackcubeFileCustomElement.html":function(e,t){e.exports='<template> <button type="button" ref="browseButton" class="uploader"> <i class="fa fa-cloud-upload-alt" ref="uploadIcon"></i> </button> <ul class="w-full"> <li class="inline-block text-gray-600 text-center p-2 relative" repeat.for="handledFile of handledFiles"> <button click.delegate="onRemove(handledFile)" class="absolute top-0 right-0 rounded-full p-1 text-center bg-white border-gray-600 border h-6 w-6 flex items-center justify-center text-xs"> <i class="fa fa-trash-alt"></i> </button> <img class="object-contain max-h-24" src.bind="handledFile.previewUrl" title.bind="handledFile.shortname"> </li> </ul> </template> '},"components/BlackcubePieCustomElement":function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubePieCustomElement=void 0;var l=o("aurelia-framework"),s=a(o(41)),c=function(){function e(e){this.logger=l.LogManager.getLogger("components.ChartistPie"),this.inactive=0,this.activeUrl=0,this.activeNoUrl=0,this.inactiveLabel="Inactive",this.activeUrlLabel="Active",this.activeNoUrlLabel="Active No URL",this.element=e,this.logger.debug("Constructor")}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){this.chart=new s.Pie(this.element,{labels:[this.activeUrlLabel,this.inactiveLabel,this.activeNoUrlLabel],series:[{value:this.activeUrl,name:this.activeUrlLabel,className:"active-url",meta:"Meta One"},{value:this.inactive,name:this.inactiveLabel,className:"inactive",meta:"Meta Two"},{value:this.activeNoUrl,name:this.activeNoUrlLabel,className:"active-no-url",meta:"Meta Three"}]},{width:"220px",height:"220px",donut:!0,labelOffset:-50,donutWidth:25,donutSolid:!0,startAngle:270,showLabel:!0,ignoreEmptyValues:!0}),this.logger.debug("Attached")},e.prototype.detached=function(){this.logger.debug("Detached")},e.prototype.unbind=function(){this.logger.debug("Unbind")},r([l.bindable({defaultBindingMode:l.bindingMode.fromView})],e.prototype,"inactive",void 0),r([l.bindable({defaultBindingMode:l.bindingMode.fromView})],e.prototype,"activeUrl",void 0),r([l.bindable({defaultBindingMode:l.bindingMode.fromView})],e.prototype,"activeNoUrl",void 0),r([l.bindable({defaultBindingMode:l.bindingMode.fromView})],e.prototype,"inactiveLabel",void 0),r([l.bindable({defaultBindingMode:l.bindingMode.fromView})],e.prototype,"activeUrlLabel",void 0),r([l.bindable({defaultBindingMode:l.bindingMode.fromView})],e.prototype,"activeNoUrlLabel",void 0),e=r([l.noView(),l.inject(l.DOM.Element)],e)}();t.BlackcubePieCustomElement=c},"components/BlackcubeRbacCustomAttribute":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeRbacCustomAttribute=void 0;var i=o("aurelia-framework"),r=o(11),a=function(){function e(e,t){var o=this;this.logger=i.LogManager.getLogger("components.BlackcubeRbac"),this.onDelegateChange=function(e){if(e.target){var t=e.target.closest("input[type=checkbox]");if(t&&o.element.contains(t)){o.logger.debug("delegateClick",t.dataset);var n=new FormData;"rbacType"in t.dataset&&n.append("type",t.dataset.rbacType),"rbacName"in t.dataset&&n.append("name",t.dataset.rbacName),n.append("mode",t.checked?"add":"remove"),n.append(o.csrf.name,o.csrf.value),o.ajaxService.updateRbac(o.targetUrl,n).then((function(e){return e.text()})).then((function(e){o.element.innerHTML=e}))}}},this.element=e,this.ajaxService=t,this.logger.debug("Constructor")}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){var e=this.element.closest("form").querySelector("input[name=_csrf]");this.csrf={name:e.name,value:e.value},this.element.addEventListener("change",this.onDelegateChange),this.logger.debug("Attached")},e.prototype.detached=function(){this.element.removeEventListener("change",this.onDelegateChange),this.logger.debug("Detached")},e.prototype.unbind=function(){this.logger.debug("Unbind")},n([i.bindable({primaryProperty:!0})],e.prototype,"targetUrl",void 0),e=n([i.inject(i.DOM.Element,r.AjaxService)],e)}();t.BlackcubeRbacCustomAttribute=a},"components/BlackcubeSchemaEditorCustomElement":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeSchemaEditorCustomElement=void 0;var r=o("aurelia-framework"),a=i(o(34)),l=function(){function e(e){this.logger=r.LogManager.getLogger("components.SchemaEditor"),this.element=e,this.logger.debug("Constructor")}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){this.hiddenField=this.element.querySelector("input[type=hidden]"),this.hiddenField&&(this.fieldId&&(this.hiddenField.id=this.fieldId),this.fieldName&&(this.hiddenField.name=this.fieldName),this.schema&&(this.hiddenField.value=this.schema)),this.jsonEditorElement=this.element.querySelector("div"),this.jsonEditorElement&&this.buildEditor(),this.logger.debug("Attached")},e.prototype.detached=function(){this.logger.debug("Detached")},e.prototype.unbind=function(){this.logger.debug("Unbind")},e.prototype.buildEditor=function(){var e=this,t={mode:"tree",modes:["tree","text"],search:!1,navigationBar:!1,statusBar:!1,mainMenuBar:!0,language:"en",templates:[{text:"Email",title:"Insert Email property",className:"jsoneditor-type-object",value:{type:"string",format:"email",minLength:6,description:"Email"}},{text:"Regexp",title:"Insert Regexp property",className:"jsoneditor-type-object",value:{type:"string",pattern:"^[a-z0-9]+$",minLength:6,description:"Email"}},{text:"Image",title:"Insert Image property",className:"jsoneditor-type-object",value:{type:"string",format:"file",fileType:"png,jpg",imageWidth:600,imageHeight:200,description:"Image size should be 600x200"}},{text:"Wysiwyg",title:"Insert Wysiwyg property",className:"jsoneditor-type-object",value:{type:"string",format:"wysiwyg",description:"Wysiwyg Editor"}}]};this.language&&(t.language=this.language),this.hiddenField&&(t.onChangeJSON=function(t){e.hiddenField.value=JSON.stringify(t,null,4)}),this.jsonSchema=new a.default(this.jsonEditorElement,t),this.jsonSchema.setText(this.schema),this.jsonSchema.expandAll()},n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"fieldId",void 0),n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"fieldName",void 0),n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"schema",void 0),n([r.bindable({defaultBindingMode:r.bindingMode.fromView})],e.prototype,"language",void 0),e=n([r.inject(r.DOM.Element)],e)}();t.BlackcubeSchemaEditorCustomElement=l},"components/BlackcubeSchemaEditorCustomElement.html":function(e,t){e.exports='<template> <input type="hidden"/> <div></div> </template> '},"components/BlackcubeSearchCompositeCustomElement":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeSearchCompositeCustomElement=void 0;var i=o("aurelia-framework"),r=o(11),a=function(){function e(e,t){var o=this;this.logger=i.LogManager.getLogger("components.SearchComposite"),this.composites=[],this.onInput=function(e){o.compositeAdd.value="",o.ajaxService.getRequestJson(o.buildSearchQuery(o.search.value)).then((function(e){o.composites=e}))},this.element=e,this.ajaxService=t,this.logger.debug("Constructor")}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){this.search.addEventListener("focus",this.onInput),this.logger.debug("Attached")},e.prototype.detached=function(){this.search.removeEventListener("focus",this.onInput),this.logger.debug("Detached")},e.prototype.unbind=function(){this.logger.debug("Unbind")},e.prototype.onClick=function(){this.logger.debug("Submit sent"),this.search.value=""},e.prototype.buildSearchQuery=function(e){return this.searchUrl.replace("__query__",e)},e.prototype.onChoose=function(e,t){this.compositeAdd.value=e,this.search.value=t,this.composites=[]},n([i.bindable({defaultBindingMode:i.bindingMode.fromView})],e.prototype,"searchUrl",void 0),e=n([i.inject(i.DOM.Element,r.AjaxService)],e)}();t.BlackcubeSearchCompositeCustomElement=a},"components/BlackcubeSearchCompositeCustomElement.html":function(e,t){e.exports='<template> <div class="bloc bloc-tools relative"> <input type="text" ref="search" input.delegate="onInput($event) & debounce:500" class="border-l border-t border-b border-gray-300 rounded-l outline-none ml-2 p-2"> <button type="button" ref="compositeAdd" click.delegate="onClick()" name="compositeAdd" class="button"> <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"> <path d="M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2zm0 2v14h14V5H5zm8 6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V9a1 1 0 0 1 2 0v2z"/> </svg> </button> <ul show.bind="composites.length > 0" class="absolute z-10 bg-gray-200 w-2/3 text-xs p-1 rounded" style="top:3em;right:1em"> <li repeat.for="composite of composites" click.delegate="onChoose(composite.id, composite.name)" class="border-b border-white rounded hover:bg-blue-800 hover:text-white p-1 cursor-pointer"> ${composite.name} </li> </ul> </div> </template> '},"components/BlackcubeSidebarCustomAttribute":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeSidebarCustomAttribute=void 0;var i=o("aurelia-framework"),r=o(14),a=function(){function e(e,t){var o=this;this.logger=i.LogManager.getLogger("components.BlackcubeSidebar"),this.onDelegateClick=function(e){if(e.target){var t=e.target.closest("[data-blackcube-section]");if(t&&o.element.contains(t)){o.logger.debug("delegateClick");var n=t.dataset.blackcubeSection;if(n){var i=o.storageService.getSectionOpened("menu",n),r=t.nextElementSibling,a=t.querySelector("i.arrow");i?(o.storageService.setSectionClosed("menu",n),r&&r.classList.add("hidden"),a&&(a.classList.remove("fa-angle-down"),a.classList.add("fa-angle-right"))):r&&(o.storageService.setSectionOpened("menu",n),r.classList.remove("hidden"),a&&(a.classList.remove("fa-angle-right"),a.classList.add("fa-angle-down")))}}}},this.element=e,this.storageService=t,this.logger.debug("Constructor")}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){var e=this;this.element.querySelectorAll("[data-blackcube-section]").forEach((function(t){var o=t.dataset.blackcubeSection;if(o){var n=e.storageService.getSectionOpened("menu",o),i=t.nextElementSibling,r=t.querySelector("i.arrow");n?(i&&i.classList.remove("hidden"),r&&(r.classList.remove("fa-angle-right"),r.classList.add("fa-angle-down"))):i&&(i.classList.add("hidden"),r&&(r.classList.remove("fa-angle-down"),r.classList.add("fa-angle-right")))}})),this.element.addEventListener("click",this.onDelegateClick),this.logger.debug("Attached")},e.prototype.detached=function(){this.element.removeEventListener("click",this.onDelegateClick),this.logger.debug("Detached")},e.prototype.unbind=function(){this.logger.debug("Unbind")},e=n([i.inject(i.DOM.Element,r.StorageService)],e)}();t.BlackcubeSidebarCustomAttribute=a},"components/BlackcubeToggleDependenciesCustomAttribute":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeToggleDependenciesCustomAttribute=void 0;var i=o("aurelia-framework"),r=function(){function e(e){var t=this;this.logger=i.LogManager.getLogger("components.ToggleDependencies"),this.onChange=function(e){e.currentTarget.checked?t.activeFields():t.deactivateFields()},this.element=e,this.logger.debug("Constructor")}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){""==this.targetFilter.trim()&&(this.targetFilter="[data-dependency]"),this.toggleCheckbox=this.element.querySelector("input[type=checkbox]"),this.toggleTargets=this.element.querySelectorAll(this.targetFilter),this.deactivateFields(),this.toggleCheckbox&&this.toggleCheckbox.addEventListener("change",this.onChange),this.logger.debug("Attached",this.targetFilter)},e.prototype.detached=function(){this.toggleCheckbox&&this.toggleCheckbox.removeEventListener("change",this.onChange),this.logger.debug("Detached")},e.prototype.unbind=function(){this.logger.debug("Unbind")},e.prototype.activeFields=function(){this.toggleTargets.forEach((function(e){e.classList.contains("opacity-50")&&e.classList.remove("opacity-50"),e.querySelectorAll("input, select").forEach((function(e){e.disabled=!1}))}))},e.prototype.deactivateFields=function(){this.toggleTargets.forEach((function(e){e.classList.contains("opacity-50")||e.classList.add("opacity-50"),e.querySelectorAll("input, select").forEach((function(e){e.disabled=!0}))}))},n([i.bindable({primaryProperty:!0})],e.prototype,"targetFilter",void 0),e=n([i.inject(i.DOM.Element)],e)}();t.BlackcubeToggleDependenciesCustomAttribute=r},"components/BlackcubeToggleElementCustomAttribute":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeToggleElementCustomAttribute=void 0;var i=o("aurelia-framework"),r=o(14),a=function(){function e(e,t){var o=this;this.logger=i.LogManager.getLogger("components.BlackcubeToggleData"),this.onDelegateClick=function(e){if(e.target){var t=e.target.closest("[data-toggle-element=source]");if(t&&o.element.contains(t))o.logger.debug("delegateClick"),o.storageService.getElementOpened(o.elementType,o.elementSubData,o.elementId)?(o.hideTargets(t),o.storageService.setElementClosed(o.elementType,o.elementSubData,o.elementId)):(o.showTargets(t),o.storageService.setElementOpened(o.elementType,o.elementSubData,o.elementId))}},this.element=e,this.storageService=t,this.logger.debug("Constructor")}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){this.logger.debug("Current ID",this.elementId);var e=this.storageService.getElementOpened(this.elementType,this.elementSubData,this.elementId),t=this.element.querySelector("[data-toggle-element=source]");this.showHideTargets=this.element.querySelectorAll("[data-toggle-element=target]"),e?this.showTargets(t):this.hideTargets(t),this.element.addEventListener("click",this.onDelegateClick),this.logger.debug("Attached")},e.prototype.detached=function(){this.logger.debug("Detached")},e.prototype.unbind=function(){this.logger.debug("Unbind")},e.prototype.showTargets=function(e){if(this.showHideTargets.forEach((function(e){e.classList.contains("hidden")&&e.classList.remove("hidden")})),e){var t=e.querySelector(".fa");t&&(t.classList.remove("fa-chevron-down"),t.classList.add("fa-chevron-up"))}},e.prototype.hideTargets=function(e){if(this.showHideTargets.forEach((function(e){e.classList.contains("hidden")||e.classList.add("hidden")})),e){var t=e.querySelector(".fa");t&&(t.classList.remove("fa-chevron-up"),t.classList.add("fa-chevron-down"))}},n([i.bindable()],e.prototype,"elementId",void 0),n([i.bindable()],e.prototype,"elementType",void 0),n([i.bindable()],e.prototype,"elementSubData",void 0),e=n([i.inject(i.DOM.Element,r.StorageService)],e)}();t.BlackcubeToggleElementCustomAttribute=a},"components/BlackcubeToggleSlugCustomAttribute":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeToggleSlugCustomAttribute=void 0;var i=o("aurelia-framework"),r=o("aurelia-event-aggregator"),a=o(14),l=function(){function e(e,t,o){var n=this;this.logger=i.LogManager.getLogger("components.ToggleSlug"),this.toggleBlocInitialDisplay="inherit",this.onToggle=function(){if(n.toggleBloc&&n.toggleCheckbox&&n.toggleCheckbox.checked)if(n.toggleBloc.classList.contains("hidden")){if(n.toggleBloc.classList.remove("hidden"),n.titleBloc)(e=n.titleBloc.querySelector(".fa"))&&(e.classList.remove("fa-chevron-down"),e.classList.add("fa-chevron-up"));n.storageService.setElementSlugOpened(n.elementId)}else{var e;if(n.toggleBloc.classList.add("hidden"),n.titleBloc)(e=n.titleBloc.querySelector(".fa"))&&(e.classList.remove("fa-chevron-up"),e.classList.add("fa-chevron-down"));n.storageService.setElementSlugClosed(n.elementId)}},this.onChange=function(){if(n.toggleBloc&&n.toggleCheckbox)if(n.toggleCheckbox.checked){if(n.toggleBloc.classList.remove("hidden"),n.titleBloc)(e=n.titleBloc.querySelector(".fa"))&&(e.classList.remove("fa-chevron-down"),e.classList.add("fa-chevron-up"));n.storageService.setElementSlugOpened(n.elementId)}else{var e;if(n.toggleBloc.classList.add("hidden"),n.titleBloc)(e=n.titleBloc.querySelector(".fa"))&&(e.classList.remove("fa-chevron-up"),e.classList.add("fa-chevron-down"));n.storageService.setElementSlugClosed(n.elementId)}},this.element=e,this.eventAggregator=t,this.storageService=o,this.logger.debug("Constructor")}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){this.logger.debug("Current ID",this.elementId);var e=this.storageService.getElementSlugOpened(this.elementId);this.toggleCheckbox=this.element.querySelector(".toggle"),this.toggleBloc=this.element.querySelector(".toggle-target"),this.titleBloc=this.element.firstElementChild,this.toggleBloc&&(this.toggleBlocInitialDisplay=this.toggleBloc.style.display,""===this.elementId&&this.toggleCheckbox&&(e=this.toggleCheckbox.checked),!1===e?this.toggleBloc.classList.add("hidden"):this.toggleBloc.classList.remove("hidden")),this.toggleCheckbox&&this.toggleCheckbox.addEventListener("change",this.onChange),this.titleBloc&&this.toggleBloc&&this.titleBloc.addEventListener("click",this.onToggle),this.eventAggregator.publish("RemoveLoader",{}),this.logger.debug("Attached")},e.prototype.detached=function(){this.logger.debug("Detached")},e.prototype.unbind=function(){this.logger.debug("Unbind")},n([i.bindable({primaryProperty:!0})],e.prototype,"elementId",void 0),e=n([i.inject(i.DOM.Element,r.EventAggregator,a.StorageService)],e)}();t.BlackcubeToggleSlugCustomAttribute=l},"components/BlackcubeUrlGeneratorCustomAttribute":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.BlackcubeUrlGeneratorCustomAttribute=void 0;var i,r=o("aurelia-framework"),a=o(11);!function(e){e.CLICK="click",e.DBLCLICK="dblclick",e.INPUT="input",e.CHANGE="change",e.SUBMIT="submit",e.BLUR="blur",e.FOCUS="focus"}(i||(i={}));var l=function(){function e(e,t){var o=this;this.logger=r.LogManager.getLogger("components.BlackcubeUrlGenerator"),this.onClick=function(e){e.preventDefault();var t=o.getUrlGeneratorData();o.ajaxService.postRequestJson(o.urlGenerator,t).then((function(e){var t=r.DOM.querySelector('[name="Slug[path]"]');o.logger.debug("Received : ",e,e.url),t&&(t.value=e.url)})).catch((function(e){o.logger.warn("Error while submitting URL",e)}))},this.element=e,this.ajaxService=t,this.logger.debug("Constructor")}return e.prototype.created=function(e,t){this.logger.debug("Created")},e.prototype.bind=function(e,t){this.logger.debug("Bind")},e.prototype.attached=function(){this.logger.debug("Attached"),this.element.addEventListener("click",this.onClick)},e.prototype.detached=function(){this.logger.debug("Detached"),this.element.removeEventListener("click",this.onClick)},e.prototype.unbind=function(){this.logger.debug("Unbind")},e.prototype.getUrlGeneratorData=function(){var e=r.DOM.querySelector('[name="NodeComposite[nodeId]"]'),t=null,o=null,n="---";if(e&&1===e.selectedOptions.length){var i=e.selectedOptions[0].value,a=r.DOM.querySelector('[name="Composite[name]"]');a&&(n=a.value),t="node",o=i}else{var l;if(e=r.DOM.querySelector('[name="parentNodeId"]'))t="node",o=i=e.value,(l=r.DOM.querySelector('[name="Node[name]"]'))&&(n=l.value);else if(e=r.DOM.querySelector('[name="moveNodeTarget"]'))t="node",o=i=e.value,(l=r.DOM.querySelector('[name="Node[name]"]'))&&(n=l.value);else if((e=r.DOM.querySelector('[name="Tag[categoryId]"]'))&&1===e.selectedOptions.length){t="category",o=e.selectedOptions[0].value;var s=r.DOM.querySelector('[name="Tag[name]"]');s&&(n=s.value)}else{var c=r.DOM.querySelector('[name="Category[name]"]');c&&(n=c.value)}}return{name:n,parentElementType:t,parentElementId:o}},n([r.bindable({primaryProperty:!0})],e.prototype,"urlGenerator",void 0),e=n([r.inject(r.DOM.Element,a.AjaxService)],e)}();t.BlackcubeUrlGeneratorCustomAttribute=l},"components/index":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configure=void 0;o("aurelia-framework");t.configure=function(e){e.globalResources(["components/BlackcubeSchemaEditorCustomElement","components/BlackcubeToggleSlugCustomAttribute","components/BlackcubeBlocsCustomAttribute","components/BlackcubeCompositesCustomAttribute","components/BlackcubeAttachModalCustomAttribute","components/BlackcubeFileCustomElement","components/BlackcubeChoicesCustomAttribute","components/BlackcubePieCustomElement","components/BlackcubeControllerActionCustomAttribute","components/BlackcubeToggleDependenciesCustomAttribute","components/BlackcubeToggleElementCustomAttribute","components/BlackcubeSearchCompositeCustomElement","components/BlackcubeRbacCustomAttribute","components/BlackcubeSidebarCustomAttribute","components/BlackcubeEditorJsCustomElement","components/BlackcubeAjaxifyCustomAttribute","components/BlackcubeUrlGeneratorCustomAttribute"])}}},[[24,0,6]]]);